{"version":3,"sources":["components/NavBar.js","api/api.js","screens/LoginScreen.js","utils/KML_GEN.js","screens/HomeScreen.js","components/Modal.js","screens/LiveView.js","screens/LiveToMap.js","screens/ESRIMapPOC.js","screens/LiveToShape.js","screens/LiveToShape_v2.js","screens/Poc.js","screens/LinearAsset.js","App.js","serviceWorker.js","index.js","assests/search.svg","assests/map.svg","assests/noDataAttribute.svg","assests/gantt_chat.svg","assests/bug.svg"],"names":["NavBar","props","history","useHistory","className","alt","src","viewBox","xmlns","d","showSearch","id","type","name","placeholder","defaultValue","onClick","e","document","getElementById","value","onClickSearch","xmlnsXlink","version","x","y","style","enableBackground","xmlSpace","width","height","showLogoutButton","push","localStorage","clear","fill","stroke","strokeWidth","strokeLinecap","strokeLinejoin","points","x1","y1","x2","y2","axios","require","defaults","timeout","Api","loginDetails","user","pass","attrGroups","this","getToken","contextFields","getAttributeGroups","console","log","p","searchObject","pp","objectAssociations","data","hdl","assocs","generateDataMapEQ","dataMap","objectType","route_length","fixedFields","retData","plaCount","Number","items","assoc","objectByHdl","Hdl","ta","taClass","helperAttrByName","attrs","from_route_chainage","to_route_chainage","attribute_name","attribute_value","attribute_uom","ds_flag","localMap","assocId","class_name","refObj","stylePlace","styleWidth","indexOf","laMap","fixed","ref","it","routeChainage","objId","route_chainage","route_chainage_uom","uom","sort","a","b","searchTerm","ppp","searchObjectWithAttr","pppp","generateDataMap","dataMapRef","routeInfo","route_uom","from_node","to_node","dd","dataMapEq","index","length","JSON","stringify","attrName","key","hasOwnProperty","element","username","password","prefixUrl","request","url","method","baseURL","auth","then","res","headers","common","access_token","query","contextCache","getRequest","assocTo","searchCxt","body","ID","CLASS","DESCRIPTION","postRequest","qReq","resulturl","attrValue","LoginScren","useState","userName","setUserName","setPassword","setPrefixUrl","isUserNameError","setIsUserNameError","isPassError","setIsPassError","isUrlError","setIsUrlError","isError","setisError","errMsg","setErrMsg","isLoading","setIsLoading","inputClass","errInputClass","htmlFor","onChange","target","undefined","setItem","response","token_type","catch","KML_GEN","geoList","inputArray","forEach","i","Object","keys","val","newKey","replace","newKML","map","item","new_html_for_description","j","join","newItem","xml","formatted","lines","split","indent","lastType","transitions","ln","match","single","Boolean","closing","opening","fromTo","padding","substr","formatXml","OBJtoXML","obj","prop","Array","array","AnyReactComponent","text","HomeScreen","setIsError","inputTag","setInputTag","setData","arrSplittedValue","setArrSplittedValue","arrData","counter","splitedValue","trim","getItem","token","fetch","Accept","Authorization","json","responseData","error","submitTagNumber","display","preventDefault","pre_kml_data","parse","file","File","Date","saveAs","class","features","geometry","properties","arrNameValue","arrkeys","bootstrapURLKeys","options","mapTypeControl","defaultCenter","lat","parseFloat","lng","center","distanceToMouse","defaultZoom","nameValue","draggable","allowZeroExpanded","preExpanded","uuid","stroke-width","stroke-linecap","stroke-linejoin","showAttr","Modal","eicData","setEicData","deliverablesData","setDeliverablesData","ensData","setEnsData","sourceData","setSourceData","domainData","setDomainData","finalObj","setFinalObj","selectClass","lableClass","clsToken","baseUrl","cls_baseUrl","classification","useEffect","getEICList","onClickCancel","filteredList","rows","keyToGetValue","filter","getDeliverables","eic","deliverable_keys","Deliverables","filter_list","deliverables_list","getTimeLine","tempObj","onClickSubmit","authCls","getClsToken","getDomains","domain_List","Name","getSourceNames","source_List","getEnsNames","ens_List","params","object_type","eic_handle","deliverable","source_handle","ens_name","aria-hidden","role","aria-modal","aria-labelledby","for","LiveView","arrLiveView","setarrLiveView","showData","setShowData","arrTagNumber","setArrTagNumber","selectedLiveViewHdl","setselectedLiveViewHdl","isContentEditable","setisContentEditable","editedAttr","seteditedAttr","showModal","setshowModal","secondBody","setSecondBody","tempSelectedObj","fetchLiveView","secondApi","thirdApi","myHeaders","Headers","redirect","fourthApi","getResultUrl","createQueryBody","Data","conditions","fields","getFinalResult","finalResult","arrFirstObjKeys","arrModifiedData","arrTagNumberData","queryResult","pageSize","page","hasmore","handleSubmitModal","finalData","xlsxData","firstApi","liveView","selectedLiveView","selectedHdl","fetchSelectedLiveViewData","selectedTag","getAttributes","tag","href","onError","mapTypeId","Latitude","onChangeAttributeValue","search","mapboxgl","accessToken","LiveToMap","selectedLiveViewName","setselectedLiveViewName","showMapBox","setShowMapBox","boxMapData","setBoxMapData","googleMapData","setGoogleMapData","mapContainerRef","useRef","setLng","setLat","zoom","formData","gMapData","tableData","k","coordinates","description","alert","Map","container","addControl","NavigationControl","on","loadImage","image","addImage","addSource","cluster","clusterMaxZoom","clusterRadius","addLayer","source","paint","layout","queryRenderedFeatures","point","layers","clusterId","cluster_id","getSource","getClusterExpansionZoom","err","easeTo","slice","mag","tsunami","Math","abs","lngLat","getCanvas","cursor","Popup","setLngLat","setHTML","addTo","window","InitializeMap","doAuth","selectedIndex","fileReader","FileReader","readAsText","files","onload","result","EsriMapPOC","LiveToShape","selectedType","setSelectedType","random","floor","esriData","setEsriData","esriCenterData","setEsriCenterData","mapBoxData","esriMapBoxData","btoa","textVal","updateEsriMapData","mapData","esriJSONData","LiveToShape_v2","setMapData","setEsriJSONData","setAttributeData","notFound","setNotFound","arrSelectedTagNumber","SetArrSelectedTagNumber","arrSelectedLiveView_2","SetArrSelectedLiveView_2","isLiveView2","setIsLiveView2","isDualCall","setisDualCall","isFirstDataFormed","setIsFirstDataFormed","isSecondDataFormed","setIsSecondDataFormed","arrTagResponseData","multiSelectStyle","chips","background","color","searchBox","border","multiselectContainer","show_data","centerPoint","geojson","lngLat_coordinates","isLiveViewTO","requestOptions","fetchSelectedLiveViewData_liveview2","tempData","liveView_2","formData_liveView2","doSecondCall","tempMapData","arrEsriMapObj","arrObj","arrMapObj","mapObj","hasRoute","itemData","esriMapObj","includes","temp_arrEsriMapObj","liveview2","displayValue","showCheckbox","isObject","onSelect","selectedList","selectedItem","onRemove","removedItem","onSubmitTag","base64Data","noDataAttribute","Poc","tasks","taskStatus","endDate","startDate","d3","gantt","taskTypes","tickFormat","gantt1","tasks2","gantt2","position","offset","stopColor","stopOpacity","LinearAsset","ganttData","setGanttData","setAss_ganttData","attributeData","documentData","setdocumentData","isAttrLoading","setIsAttrLoading","isGanntHaveData","setIsGanntHaveData","isAssociateGanntHaveData","setIsAssociateGanntHaveData","isMapError","setIsMapError","generateGanttData","LaMap","mapdata","fixed_obj","lastObj","pointsToAdd","parseInt","values","toLowerCase","ref_obj","onClickGanttItem","clickedObj","associativeData","ClsName","link","Url","myMap","setZoom","panTo","generateAssociateData","AssociativeData","issueKeys","Issue","issue_obj","Type","valueKeys","Value","value_obj","taskNames","keyword","searchKey","getRouteObj","minHeight","chat","bug","App","exact","path","component","LoginScreen","esriMapPOC","location","hostname","ReactDOM","render","StrictMode","navigator","serviceWorker","ready","registration","unregister","message","module","exports"],"mappings":"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","file":"static/js/main.a9edf4ed.chunk.js","sourcesContent":["import React from 'react';\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nconst NavBar = props => {\r\n    const history = useHistory();\r\n\r\n    const logout = () => {\r\n        //remove all local storage\r\n        localStorage.clear();\r\n        history.push('/');\r\n    }\r\n\r\n    const onClickSearch = () => {\r\n        if(document.getElementById(\"search\").value != \"\"){\r\n            //pass value in props\r\n            props.onClickSearch(document.getElementById(\"search\").value)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <nav className=\"flex items-center justify-between flex-wrap bg-purple-900  p-6\">\r\n            <div className=\"flex items-center flex-shrink-0 text-black mr-6\">\r\n                <img alt=\"Logo\" className=\"w-1/2\" src=\"https://www.datum360.com/assets/img/logo.png\"></img>\r\n            </div>\r\n            <div className=\"block lg:hidden bg-mediaquery\">\r\n                <button className=\"flex items-center px-3 py-2 border rounded text-teal-200 border-teal-400 hover:text-white hover:border-white\">\r\n                    <svg className=\"fill-current h-3 w-3\" viewBox=\"0 0 20 20\" xmlns=\"http://www.w3.org/2000/svg\"><title>Menu</title><path d=\"M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0v-2z\" /></svg>\r\n                </button>\r\n            </div>\r\n            <div className=\"w-full block flex-grow lg:flex lg:items-center lg:w-auto bg-mediaquery\">\r\n                <div className=\"text-sm lg:flex-grow\">\r\n                </div>\r\n                    <div className={props.showSearch ? \"relative mx-auto text-gray-600 mr-3\" : \"hidden\"}> \r\n                        <input id=\"search\" className=\"border-2 bg-gray-300 bg-white h-10 px-5 pr-10 rounded-lg text-sm focus:outline-none\" \r\n                            type=\"search\" name=\"search\" placeholder=\"Enter you tag to search\" \r\n                            defaultValue=\"\"\r\n                        />\r\n                        <button type=\"submit\" className=\"absolute right-0 top-0 mt-5 mr-4 r-5px t-n7px focus:outline-none\" \r\n                            onClick={(e)=> onClickSearch(e)}\r\n                        >\r\n                        <svg className=\"text-gray-600 h-4 w-4 fill-current\" xmlns=\"http://www.w3.org/2000/svg\" xmlnsXlink=\"http://www.w3.org/1999/xlink\" version=\"1.1\" id=\"Capa_1\" x=\"0px\" y=\"0px\" viewBox=\"0 0 56.966 56.966\" style={{enableBackground: 'new 0 0 56.966 56.966'}} xmlSpace=\"preserve\" width=\"512px\" height=\"512px\">\r\n                            <path d=\"M55.146,51.887L41.588,37.786c3.486-4.144,5.396-9.358,5.396-14.786c0-12.682-10.318-23-23-23s-23,10.318-23,23  s10.318,23,23,23c4.761,0,9.298-1.436,13.177-4.162l13.661,14.208c0.571,0.593,1.339,0.92,2.162,0.92  c0.779,0,1.518-0.297,2.079-0.837C56.255,54.982,56.293,53.08,55.146,51.887z M23.984,6c9.374,0,17,7.626,17,17s-7.626,17-17,17  s-17-7.626-17-17S14.61,6,23.984,6z\" />\r\n                        </svg>\r\n                        </button>\r\n                    </div>\r\n\r\n                <div className={`${props.showLogoutButton ? \"\" : \"hidden\"}`}>\r\n                    <button className=\"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded inline-flex items-center mr-3\" onClick={() => history.push(\"/home\")}>\r\n                        <span>Home</span>\r\n                    </button>\r\n                </div>\r\n                <div className={`${props.showLogoutButton ? \"\" : \"hidden\"}`}>\r\n                    <button className=\"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded inline-flex items-center mr-3\" onClick={() => history.push(\"/linearAsset\")}>\r\n                        <span>Linear Asset</span>\r\n                    </button>\r\n                </div>\r\n                <div className={`${props.showLogoutButton ? \"\" : \"hidden\"}`}>\r\n                    <button className=\"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded inline-flex items-center mr-3\" onClick={() => history.push(\"/liveView\")}>\r\n                        <span>Live View</span>\r\n                    </button>\r\n                </div>\r\n                <div className={`${props.showLogoutButton ? \"\" : \"hidden\"}`}>\r\n                    <button className=\"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded inline-flex items-center mr-3\" onClick={() => history.push(\"/liveview2map\")}>\r\n                        <span>LiveView to map</span>\r\n                    </button>\r\n                </div>\r\n                <div className={`${props.showLogoutButton ? \"\" : \"hidden\"}`}>\r\n                    <button className=\"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded inline-flex items-center mr-3\" onClick={() => history.push(\"/l2sv1\")}>\r\n                        <span>L2sv1</span>\r\n                    </button>\r\n                </div>\r\n                <div className={`${props.showLogoutButton ? \"\" : \"hidden\"}`}>\r\n                    <button className=\"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded inline-flex items-center mr-3\" onClick={() => history.push(\"/l2sv2\")}>\r\n                        <span>L2sv2</span>\r\n                    </button>\r\n                </div>\r\n                <div className={`${props.showLogoutButton ? \"\" : \"hidden\"}`}>\r\n                    <button className=\"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded inline-flex items-center\" onClick={() => logout()}>\r\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" className=\"feather feather-log-out\"><path d=\"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4\"></path><polyline points=\"16 17 21 12 16 7\"></polyline><line x1=\"21\" y1=\"12\" x2=\"9\" y2=\"12\"></line></svg>\r\n                        <span>Logout</span>\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </nav>\r\n    );\r\n}\r\n\r\nexport default NavBar;","\r\nconst axios = require('axios');\r\naxios.defaults.timeout = 10000;\r\nexport default class Api {\r\n\r\n    loginDetails = { user: '', pass: '' };\r\n\r\n    attrGroups = {};\r\n\r\n    static async warmUp() {\r\n        await this.getToken();\r\n        await this.contextFields('TAGGED_ITEM');\r\n        this.attrGroups = await this.getAttributeGroups();\r\n    }\r\n\r\n    static setUserPass(user, pass) {\r\n        this.loginDetails = { user: user, pass: pass };\r\n    }\r\n\r\n    static async login() {\r\n        console.log(\"inside login --------->\")\r\n        var p = await this.getToken();\r\n        console.log(p);\r\n\r\n        var pp = await this.searchObject(\"TAGGED_ITEM\", 'Route B to C');\r\n        var assocs = await this.objectAssociations('TAGGED_ITEM', pp.data[0].hdl, \"EQUIPMENT_ITEM\");\r\n        var dd = await this.generateDataMapEQ(assocs, 'TAGGED_ITEM');\r\n\r\n        // var pp = await this.searchObject(\"TAGGED_ITEM\", 'Route B to C');\r\n        // var ppp = await this.objectByHdl('TAGGED_ITEM', pp.data[0].hdl);\r\n\r\n        // var routeInfo = {\r\n        //     route_length: this.helperAttrByName(ppp.attrs, 'Length').value,\r\n        //     route_uom: this.helperAttrByName(ppp.attrs, 'Length').uom,\r\n        //     from_node: this.helperAttrByName(ppp.attrs, 'From Reference Node').value,\r\n        //     to_node: this.helperAttrByName(ppp.attrs, 'To Reference Node').value,\r\n        // }\r\n\r\n        // var pppp = await this.searchObjectWithAttr('TAGGED_ITEM', 'Route', 'Route B To C');\r\n        // await this.generateDataMap(pppp, 'TAGGED_ITEM');\r\n\r\n        console.log('done');\r\n        // var pp = await x.getRequest(\"api/context/fields/TAGGED_ITEM\");\r\n        // console.log(pp.ID);\r\n    }\r\n\r\n    static async generateDataMapEQ(dataMap, objectType, route_length) {\r\n        console.log(\"inside generateDataMapEQ ---------> dataMap \"+ dataMap + \" route_length \" + route_length)\r\n\r\n        let fixedFields = ['Issue', 'Value'];\r\n        let retData = {};\r\n\r\n\r\n        let plaCount = 100 / Number(route_length);\r\n\r\n        for (const assoc of dataMap.items) {\r\n\r\n            let ta = await this.objectByHdl(\"EQUIPMENT_ITEM\", assoc.Hdl);\r\n\r\n            let taClass = this.helperAttrByName(ta.attrs, 'Class Name').value;\r\n            let from_route_chainage = this.helperAttrByName(ta.attrs, 'From Route Chainage');\r\n            let to_route_chainage = this.helperAttrByName(ta.attrs, 'To Route Chainage');\r\n            let attribute_name = this.helperAttrByName(ta.attrs, 'Linear Asset Attribute Name').value;\r\n            let attribute_value = this.helperAttrByName(ta.attrs, 'Linear Asset Attribute Value').value;\r\n            let attribute_uom = this.helperAttrByName(ta.attrs, 'Linear Asset Value UoM').value;\r\n            let ds_flag = this.helperAttrByName(ta.attrs, 'DS Flag').value;\r\n\r\n            let localMap = {\r\n                assocId: assoc.id,\r\n                from_route_chainage: Number(from_route_chainage.value),\r\n                to_route_chainage: Number(to_route_chainage.value),\r\n                class_name: taClass,\r\n                attribute_name: attribute_name,\r\n                attribute_value: attribute_value,\r\n                attribute_uom: attribute_uom,\r\n                ds_flag: ds_flag,\r\n                refObj: assoc\r\n            };\r\n\r\n            localMap.stylePlace = plaCount * localMap.from_route_chainage;\r\n            localMap.styleWidth = (plaCount * localMap.to_route_chainage) - localMap.stylePlace;\r\n\r\n\r\n            if (fixedFields.indexOf(ds_flag) != -1) {\r\n                if (!retData[localMap.ds_flag])\r\n                    retData[localMap.ds_flag] = {};\r\n\r\n                if (!retData[localMap.ds_flag][localMap.class_name])\r\n                    retData[localMap.ds_flag][localMap.class_name] = [];\r\n\r\n                retData[localMap.ds_flag][localMap.class_name].push(localMap);\r\n            }\r\n\r\n        }\r\n\r\n        //retData = retData.sort((a, b) => (a.class_name > b.class_name) ? 1 : -1);\r\n\r\n        return retData;\r\n    }\r\n\r\n\r\n    static async generateDataMap(dataMap, objectType) {\r\n        console.log(\"inside generateDataMap ---------> dataMap \"+ dataMap + \" objectType \" + objectType)\r\n\r\n        let laMap = {\r\n            fixed: [],\r\n            ref: []\r\n        };\r\n\r\n        for (const it of dataMap.data) {\r\n            let fixedFields = ['Isolator', 'AST Booster', 'Section Insulator'];\r\n\r\n            let ta = await this.objectByHdl(objectType, it.hdl);\r\n            let taClass = this.helperAttrByName(ta.attrs, 'Class Name').value;\r\n            let routeChainage = this.helperAttrByName(ta.attrs, 'Route Chainage');\r\n            if (routeChainage) {\r\n                let localMap = {\r\n                    objId: it.objId,\r\n                    class_name: taClass,\r\n                    route_chainage: Number(routeChainage.value),\r\n                    route_chainage_uom: routeChainage.uom,\r\n                    hdl: it.hdl,\r\n                    refObj: ta\r\n                };\r\n\r\n                if (fixedFields.indexOf(taClass) != -1)\r\n                    laMap.fixed.push(localMap);\r\n                else\r\n                    laMap.ref.push(localMap);\r\n            }\r\n        }\r\n\r\n        laMap.fixed = laMap.fixed.sort((a, b) => (a.route_chainage > b.route_chainage) ? 1 : -1);\r\n        laMap.ref = laMap.ref.sort((a, b) => (a.route_chainage > b.route_chainage) ? 1 : -1);\r\n        // console.log(\"laMap --------------> \" + JSON.stringify(laMap));\r\n        // console.log(laMap);\r\n        return laMap;\r\n        //working\r\n    }\r\n\r\n    static async getRouteObj(searchTerm) {\r\n        console.log(\"inside getRouteObj --------> searchTerm \"+searchTerm)\r\n        // var p = await this.getToken();//this is really bad practise as generate datamap could be proper async\r\n        var pp = await this.searchObject(\"TAGGED_ITEM\", searchTerm);\r\n        var ppp = await this.objectByHdl('TAGGED_ITEM', pp.data[0].hdl);\r\n        var pppp = await this.searchObjectWithAttr('TAGGED_ITEM', 'Route', searchTerm);\r\n        var dataMapRef = await this.generateDataMap(pppp, 'TAGGED_ITEM');\r\n        var assocs = await this.objectAssociations('TAGGED_ITEM', pp.data[0].hdl, \"EQUIPMENT_ITEM\");\r\n\r\n        var routeInfo = {\r\n            route_length: Number(this.helperAttrByName(ppp.attrs, 'Length').value),\r\n            route_uom: this.helperAttrByName(ppp.attrs, 'Length').uom,\r\n            from_node: this.helperAttrByName(ppp.attrs, 'From Reference Node').value,\r\n            to_node: this.helperAttrByName(ppp.attrs, 'To Reference Node').value,\r\n            dataMap: dataMapRef\r\n        }\r\n\r\n        let plaCount = 100 / Number(routeInfo.route_length);\r\n\r\n        var dd = await this.generateDataMapEQ(assocs, 'TAGGED_ITEM', routeInfo.route_length);\r\n        routeInfo.dataMapEq = dd;\r\n\r\n        for (let index = 0; index < routeInfo.dataMap.fixed.length; index++) {\r\n            routeInfo.dataMap.fixed[index].stylePlace = plaCount * routeInfo.dataMap.fixed[index].route_chainage;\r\n        }\r\n\r\n        for (let index = 0; index < routeInfo.dataMap.ref.length; index++) {\r\n            routeInfo.dataMap.ref[index].stylePlace = plaCount * routeInfo.dataMap.ref[index].route_chainage;\r\n        }\r\n        console.log(\"routeInfo  ------------> \"+JSON.stringify(routeInfo))\r\n        // console.log(routeInfo)\r\n        return routeInfo;\r\n    }\r\n\r\n    static helperAttrByName(attrs, attrName) {\r\n        //this entire function can be replaced by 1 or two lines TS/ES6\r\n        for (const key in attrs) {\r\n            if (attrs.hasOwnProperty(key)) {\r\n                const element = attrs[key];\r\n                if (element.name == attrName)\r\n                    return element;\r\n            }\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    static async getToken(username, password, prefixUrl) {\r\n        return axios.request({\r\n            url: \"/oauth2/token\",\r\n            method: \"post\",\r\n            baseURL: \"https://\" + prefixUrl + \".acl360.io\",\r\n            auth: {\r\n                username: username,\r\n                password: password\r\n            },\r\n            data: {\r\n                \"grant_type\": \"client_credentials\",\r\n                \"service_url\": \"https://\" + prefixUrl + \".pim360.io/\"\r\n            }\r\n        }).then(function (res) {\r\n            axios.defaults.headers.common = { 'Authorization': \"Bearer \" + res.data.access_token }\r\n            return res;\r\n        });\r\n    }\r\n\r\n    static async getClsToken(username, password, prefixUrl) {\r\n        return axios.request({\r\n            url: \"/oauth2/token\",\r\n            method: \"post\",\r\n            baseURL: \"https://\" + prefixUrl + \".acl360.io\",\r\n            auth: {\r\n                username: username,\r\n                password: password\r\n            },\r\n            data: {\r\n                \"grant_type\": \"client_credentials\",\r\n                \"service_url\": \"https://\" + prefixUrl + \".cls360.io/\"\r\n            }\r\n        }).then(function (res) {\r\n            axios.defaults.headers.common = { 'Authorization': \"Bearer \" + res.data.access_token }\r\n            return res;\r\n        });\r\n    }\r\n\r\n    static async getRequest(url) {\r\n        return axios.request({\r\n            url: url,\r\n            method: \"get\",\r\n            baseURL: \"https://mim.pim360.io/\",\r\n        }).then(function (res) {\r\n            return res.data;\r\n        });\r\n    }\r\n\r\n    static async postRequest(url, query) {\r\n        return axios.request({\r\n            url: url,\r\n            method: \"post\",\r\n            baseURL: \"https://mim.pim360.io/\",\r\n            data: query\r\n        }).then(function (res) {\r\n            console.log(\"res ---------\", res)\r\n            return res.data;\r\n        })\r\n    }\r\n\r\n\r\n    static async contextFields(objectType) {\r\n        console.log(\"inside contextFields ------------> \"+objectType);\r\n        console.log(this.contextCache);\r\n        if (!this.contextCache)\r\n            this.contextCache = {};\r\n\r\n        if (!this.contextCache[objectType]) {\r\n            this.contextCache[objectType] = await this.getRequest('api/context/fields/' + objectType);\r\n        }\r\n\r\n        return this.contextCache[objectType];\r\n    }\r\n\r\n    static async objectByHdl(objectType, hdl) {\r\n        console.log(\"inside objectByHdl ---------> objectType  \" + objectType + \" hdl \" + hdl)\r\n\r\n        return this.getRequest(`api/objects/${objectType}/${hdl}`);\r\n    }\r\n\r\n    static async getAttributeGroups() {\r\n        return this.getRequest(`api/objects/attributegroups`);\r\n    }\r\n\r\n    static async objectAssociations(objectType, hdl, assocTo) {\r\n        return this.getRequest(`api/associations?type=${objectType}&hdl=${hdl}&assoc=${assocTo}&skip=0`);\r\n    }\r\n\r\n    static async searchObject(objectType, searchTerm) {\r\n        let searchCxt = await this.contextFields(objectType);\r\n\r\n        let body = {\r\n            \"type\": \"TAGGED_ITEM\",\r\n            \"eic\": \"\",\r\n            \"filter\": {\r\n                \"logical\": \"AND\",\r\n                \"items\": [\r\n                    {\r\n                        \"handle\": searchCxt.ID.Hdl,\r\n                        \"operator\": \"$regex-l\",\r\n                        \"value\": searchTerm,\r\n                        \"caseSensitive\": false,\r\n                        \"excludeUoM\": false,\r\n                        \"regex\": false\r\n                    }\r\n                ]\r\n            },\r\n            \"fields\": [\r\n                searchCxt.ID.Hdl,\r\n                searchCxt.CLASS.Hdl,\r\n                searchCxt.DESCRIPTION.Hdl\r\n            ]\r\n        };\r\n\r\n        let qReq = await this.postRequest('api/queries', body);\r\n\r\n        return this.getRequest(`api${qReq.resulturl}`);\r\n    }\r\n\r\n    static async searchObjectWithAttr(objectType, attrName, attrValue) {\r\n        console.log(\"inside searchObjectWithAttr ----------> objectType \"+objectType + \" attrName \" + attrName + \" attrValue \" + attrValue)\r\n        let searchCxtR = await this.contextFields(attrName);\r\n        let searchCxt = await this.contextFields(objectType);\r\n\r\n        let body = {\r\n            \"type\": \"TAGGED_ITEM\",\r\n            \"eic\": \"\",\r\n            \"filter\": {\r\n                \"logical\": \"AND\",\r\n                \"items\": [\r\n                    {\r\n                        \"operator\": \"$regex-l\",\r\n                        \"value\": attrValue,\r\n                        \"handle\": \"TMiQuiViT1OEjp8uEeLy_Q\",\r\n                        \"caseSensitive\": false,\r\n                        \"excludeUoM\": false,\r\n                        \"regex\": false\r\n                    }\r\n                ]\r\n            },\r\n            \"fields\": [\r\n                searchCxt.ID.Hdl,\r\n                searchCxt.CLASS.Hdl,\r\n                searchCxt.DESCRIPTION.Hdl\r\n            ]\r\n        };\r\n\r\n        let qReq = await this.postRequest('api/queries', body);\r\n\r\n        return this.getRequest(`api${qReq.resulturl}`);\r\n    }\r\n}","import React, { useState, useEffect } from 'react';\r\nimport { useHistory } from \"react-router-dom\";\r\nimport NavBar from '../components/NavBar'\r\nimport Api from \"../api/api\";\r\n\r\n\r\nfunction LoginScren(props) {\r\n  // Declare a new state variable, which we'll call \"count\"\r\n  // const [count, setCount] = useState(0);\r\n  const history = useHistory();\r\n  // const [userName, setUserName] = useState(\"ranjithdinakaran\");\r\n  // const [password, setPassword] = useState(\"Drk_13232104\");\r\n  // const [prefixUrl, setPrefixUrl] = useState(\"d-lab-2020\");\r\n  const [userName, setUserName] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [prefixUrl, setPrefixUrl] = useState(\"\");\r\n  const [isUserNameError, setIsUserNameError] = useState(false);\r\n  const [isPassError, setIsPassError] = useState(false);\r\n  const [isUrlError, setIsUrlError] = useState(false);\r\n  const [isError, setisError] = useState();\r\n  const [errMsg, setErrMsg] = useState();\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  const inputClass = \"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:border-purple-900\";\r\n  const errInputClass = \"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none border-red-500\";\r\n\r\n\r\n  const doLogin = () => {\r\n    setIsLoading(true);\r\n    //reset error value\r\n    setisError(false);\r\n    setIsUserNameError(false);\r\n    setIsPassError(false);\r\n    setIsUrlError(false);\r\n    setErrMsg(\"\");\r\n\r\n    // validation\r\n    if (userName !== undefined && userName.length > 0 && password.length > 0 && prefixUrl.length > 0) {\r\n      //setting prefix url to localstorage\r\n      localStorage.setItem(\"prefixUrl\", prefixUrl);\r\n      //setting userName to localstorage\r\n      localStorage.setItem(\"userName\", userName);\r\n      //setting password to localstorage\r\n      localStorage.setItem(\"password\", password);\r\n      Api.getToken(userName, password, prefixUrl).then((response) => {\r\n        if (response.data.access_token != \"\") {\r\n          setIsLoading(false);\r\n          //set token in local storage\r\n          localStorage.setItem(\"b_token\", response.data.token_type + \" \" + response.data.access_token);\r\n          history.push('/l2sv2');\r\n        };\r\n      }).catch((e)=>{\r\n        //setting common error\r\n        setisError(true);\r\n        setErrMsg(\"Something went wrong!!!\");\r\n        setIsLoading(false);\r\n      })\r\n    }\r\n    else {\r\n      //setting userName error \r\n      if (userName.length == 0) {\r\n        setIsUserNameError(true);\r\n      }\r\n      //setting password error \r\n      if (password.length == 0) {\r\n        setIsPassError(true);\r\n      }\r\n      //setting userName error \r\n      if (prefixUrl.length == 0) {\r\n        setIsUrlError(true);\r\n      }\r\n      //setting common error\r\n      setisError(true);\r\n      setErrMsg(\"Please fill all the fields\");\r\n      setIsLoading(false);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <NavBar showLogoutButton={false}></NavBar>\r\n      {isLoading ?\r\n        <div className=\"popUpContainer\">\r\n          <div className=\"loader\"></div>\r\n        </div>\r\n        : \"\"}\r\n      <div className=\"w-full max-w-sm login-container mt-5\">\r\n        <form className=\"bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4\">\r\n          <div className=\"mb-4\">\r\n            <label className=\"block text-gray-700 text-sm font-bold mb-2\" htmlFor=\"username\">\r\n              Username\r\n          </label>\r\n            <input className={isUserNameError ? errInputClass : inputClass}\r\n              id=\"username\" type=\"text\" value={userName} placeholder=\"Enter your username\" onChange={(e) => setUserName(e.target.value)}\r\n            />\r\n          </div>\r\n          <div className=\"mb-4\">\r\n            <label className=\"block text-gray-700 text-sm font-bold mb-2\" htmlFor=\"password\">\r\n              Password\r\n          </label>\r\n            <input className={isPassError ? errInputClass : inputClass} value={password}\r\n              id=\"password\" type=\"password\" placeholder=\"Enter your password\" onChange={(e) => setPassword(e.target.value)}\r\n            />\r\n          </div>\r\n          <div className=\"mb-3\">\r\n            <label className=\"block text-gray-700 text-sm font-bold mb-2\" htmlFor=\"username\">\r\n              Prefix URL\r\n          </label>\r\n            <input className={isUrlError ? errInputClass : inputClass} value={prefixUrl}\r\n              id=\"prefixUrl\" type=\"text\" placeholder=\"Enter your prefix url\" onChange={(e) => setPrefixUrl(e.target.value)}\r\n            />\r\n            <span className=\"text-gray-700 text-xs\">Note: Its is 1st portion of your domain name (also known as subdomain), or its called as scope of pim360.</span>\r\n          </div>\r\n          <p className=\"text-center text-red-500\">{isError ? errMsg : \"\"}</p>\r\n          <div className=\"flex\">\r\n            <button className=\"mt-3 bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline m-auto\" type=\"button\"\r\n              onClick={() => { doLogin() }}>\r\n              Proceed\r\n      </button>\r\n          </div>\r\n        </form>\r\n        <br>\r\n        </br>\r\n        <p className=\"text-center\">&copy; Datum360 Limited</p>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default LoginScren;","// KML Generator\\\r\nexport const KML_GEN = (geoList, inputArray) => {\r\n    var latlngToDms = require('latlng-to-dms');\r\n\r\n    function toDegreesMinutesAndSeconds(coordinate) {\r\n        var absolute = Math.abs(coordinate);\r\n        var degrees = Math.floor(absolute);\r\n        var minutesNotTruncated = (absolute - degrees) * 60;\r\n        var minutes = Math.floor(minutesNotTruncated);\r\n        var seconds = Math.floor((minutesNotTruncated - minutes) * 60);\r\n    \r\n        return degrees + \"° \" + minutes + \"' \" + seconds + `''`;\r\n    }\r\n\r\n    if (geoList) {\r\n        if (geoList.length > 0) {\r\n            // remove space with _\r\n            geoList.forEach(function (e, i) {\r\n                // Iterate over the keys of object\r\n                Object.keys(e).forEach(function (key) {\r\n\r\n                    // Copy the value\r\n                    var val = e[key],\r\n                        newKey = key.replace(/\\s+/g, '_');\r\n\r\n                    // Remove key-value from object\r\n                    delete geoList[i][key];\r\n\r\n                    // Add value with new key\r\n                    geoList[i][newKey] = val;\r\n                });\r\n            });\r\n\r\n            // custom json to ready for xml json\r\n            let newKML = [];\r\n            if (geoList.length > 0) {\r\n                geoList.map((item, index) => {\r\n                    let new_html_for_description = Object.keys(item).map((j) => {\r\n                        return \"<div>\" + j + \" - \" + item[j] + \"<br></div>\";\r\n                    }).join('')\r\n\r\n                    let newItem = {\r\n                        \"Placemark\": {\r\n                            \"name\": inputArray[index],\r\n                            \"description\": `<![CDATA[${new_html_for_description}]]>`,\r\n                            \"Point\": {\r\n                                \"coordinates\": `${item[\"Longitude\"]},${item[\"Latitude\"]}`\r\n                                // \"coordinates\": latlngToDms(`${item[\"Latitude\"]}, ${item[\"Longitude\"]}`)\r\n                                // \"coordinates\": `${toDegreesMinutesAndSeconds(item[\"Latitude\"])} ${item[\"Latitude\"] > 0 ? \"N\" : \"S\"}, ${toDegreesMinutesAndSeconds(item[\"Longitude\"])} ${item[\"Longitude\"] > 0 ? \"E\" : \"W\"}`\r\n                            }\r\n                        }\r\n                    };\r\n                    newKML.push(newItem)\r\n                })\r\n            }\r\n\r\n            // object to xml\r\n            function OBJtoXML(obj) {\r\n                var xml = '';\r\n                for (var prop in obj) {\r\n                    xml += obj[prop] instanceof Array ? '' : \"<\" + prop + \">\";\r\n                    if (obj[prop] instanceof Array) {\r\n                        for (var array in obj[prop]) {\r\n                            xml += \"<\" + prop + \">\";\r\n                            xml += OBJtoXML(new Object(obj[prop][array]));\r\n                            xml += \"</\" + prop + \">\";\r\n                        }\r\n                    } else if (typeof obj[prop] == \"object\") {\r\n                        xml += OBJtoXML(new Object(obj[prop]));\r\n                    } else {\r\n                        xml += obj[prop];\r\n                    }\r\n                    xml += obj[prop] instanceof Array ? '' : \"</\" + prop + \">\";\r\n                }\r\n                var xml = xml.replace(/<\\/?[0-9]{1,}>/g, '');\r\n                return xml\r\n            }\r\n\r\n            // formatXml\r\n            function formatXml (xml) {\r\n                var reg = /(>)\\s*(<)(\\/*)/g; // updated Mar 30, 2015\r\n                var wsexp = / *(.*) +\\n/g;\r\n                var contexp = /(<.+>)(.+\\n)/g;\r\n                xml = xml.replace(reg, '$1\\n$2$3').replace(wsexp, '$1\\n').replace(contexp, '$1\\n$2');\r\n                var pad = 0;\r\n                var formatted = '';\r\n                var lines = xml.split('\\n');\r\n                var indent = 0;\r\n                var lastType = 'other';\r\n                // 4 types of tags - single, closing, opening, other (text, doctype, comment) - 4*4 = 16 transitions \r\n                var transitions = {\r\n                    'single->single': 0,\r\n                    'single->closing': -1,\r\n                    'single->opening': 0,\r\n                    'single->other': 0,\r\n                    'closing->single': 0,\r\n                    'closing->closing': -1,\r\n                    'closing->opening': 0,\r\n                    'closing->other': 0,\r\n                    'opening->single': 1,\r\n                    'opening->closing': 0,\r\n                    'opening->opening': 1,\r\n                    'opening->other': 1,\r\n                    'other->single': 0,\r\n                    'other->closing': -1,\r\n                    'other->opening': 0,\r\n                    'other->other': 0\r\n                };\r\n\r\n                for (var i = 0; i < lines.length; i++) {\r\n                    var ln = lines[i];\r\n\r\n                    // Luca Viggiani 2017-07-03: handle optional <?xml ... ?> declaration\r\n                    if (ln.match(/\\s*<\\?xml/)) {\r\n                        formatted += ln + \"\\n\";\r\n                        continue;\r\n                    }\r\n                    // ---\r\n\r\n                    var single = Boolean(ln.match(/<.+\\/>/)); // is this line a single tag? ex. <br />\r\n                    var closing = Boolean(ln.match(/<\\/.+>/)); // is this a closing tag? ex. </a>\r\n                    var opening = Boolean(ln.match(/<[^!].*>/)); // is this even a tag (that's not <!something>)\r\n                    var type = single ? 'single' : closing ? 'closing' : opening ? 'opening' : 'other';\r\n                    var fromTo = lastType + '->' + type;\r\n                    lastType = type;\r\n                    var padding = '';\r\n\r\n                    indent += transitions[fromTo];\r\n                    for (var j = 0; j < indent; j++) {\r\n                        padding += '\\t';\r\n                    }\r\n                    if (fromTo == 'opening->closing')\r\n                        formatted = formatted.substr(0, formatted.length - 1) + ln + '\\n'; // substr removes line break (\\n) from prev loop\r\n                    else\r\n                        formatted += padding + ln + '\\n';\r\n                }\r\n\r\n                return formatted;\r\n            };\r\n\r\n            // final processing\r\n            let beforeKML = OBJtoXML(newKML)\r\n            const responseMessage = `<?xml version=\"1.0\" encoding=\"UTF-8\"?><kml xmlns=\"http://www.opengis.net/kml/2.2\" xmlns:gx=\"http://www.google.com/kml/ext/2.2\"><Document id=\"1\">` + beforeKML + `</Document></kml>`;\r\n\r\n            return formatXml(responseMessage);\r\n        } else {\r\n            return \"\";\r\n        }\r\n    } else {\r\n        return '';\r\n    }\r\n}","import React, { useState, useEffect } from 'react';\r\nimport GoogleMapReact from 'google-map-react';\r\nimport { FileSaver, saveAs } from 'file-saver';\r\nimport { KML_GEN } from '../utils/KML_GEN'\r\nimport NavBar from '../components/NavBar'\r\nimport {\r\n    Accordion,\r\n    AccordionItem,\r\n    AccordionItemHeading,\r\n    AccordionItemButton,\r\n    AccordionItemPanel,\r\n} from 'react-accessible-accordion';\r\nimport map from \"../assests/map.svg\";\r\n\r\nconst AnyReactComponent = ({ text }) => <div><img alt=\"Marker\" src=\"https://img.icons8.com/fluent/48/000000/marker-storm.png\" />{text}</div>;\r\n\r\nconst HomeScreen = props => {\r\n    const inputClass = \"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\";\r\n    const errInputClass = \"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline border-red-500\";\r\n    const [isError, setIsError] = useState();\r\n    const [inputTag, setInputTag] = useState('');\r\n    const [data, setData] = useState([]);\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const [arrSplittedValue, setArrSplittedValue] = useState([]);\r\n\r\n    const submitTagNumber = () => {\r\n        //reset default value \r\n        setIsError(false);\r\n\r\n        //validation\r\n        if (inputTag !== null && inputTag.length > 0) {\r\n            setIsLoading(true)\r\n            let arrData = [];\r\n            let counter = 0;\r\n            var splitedValue = inputTag.split(\",\").map((item) => {\r\n                return item.trim();\r\n            });\r\n            setArrSplittedValue(splitedValue);\r\n            splitedValue.map((id) => {\r\n                let url = \"https://\" + localStorage.getItem(\"prefixUrl\") + \".pim360.io/api/objects/TAGGED_ITEM/id/\" + id;\r\n                let token = localStorage.getItem(\"b_token\");\r\n                fetch(url, {\r\n                    headers: {\r\n                        Accept: \"application/json\",\r\n                        Authorization: token,\r\n                    }\r\n                }).then(response => {\r\n                    var responseValue = response.json();\r\n                    return responseValue;\r\n                }).then(responseData => {\r\n                    if (responseData.attrs !== undefined && responseData.attrs !== null) {\r\n                        arrData.push(responseData);\r\n                    }\r\n                    else {\r\n                        console.log(responseData);\r\n                    }\r\n                    counter += 1;\r\n                    if (counter === splitedValue.length) {\r\n                        setIsLoading(false);\r\n                        setData(arrData);\r\n                        return\r\n                    }\r\n                }).catch(error => {\r\n                    console.log(\"error -------->\" + error);\r\n                    counter += 1\r\n                    if (counter === splitedValue.length) {\r\n                        setIsLoading(false);\r\n                    }\r\n                })\r\n                return '';\r\n            })\r\n        }\r\n        else {\r\n            setIsError(true);\r\n            console.log(\"show error\");\r\n        }\r\n    }\r\n\r\n    const showAttr = () => {\r\n        let arrNameValue = [];\r\n        data.map((item) => {\r\n            let arrkeys = Object.keys(item.attrs)\r\n            let obj = {};\r\n            arrkeys.map((key) => {\r\n                obj[item.attrs[key].name] = item.attrs[key].value;\r\n                return '';\r\n            })\r\n            arrNameValue.push(obj);\r\n            return '';\r\n        });\r\n        console.log(\"arrNameValue ------->\", arrNameValue)\r\n        localStorage.setItem('pre_kml_data', JSON.stringify(arrNameValue))\r\n        localStorage.setItem('inputsArray', JSON.stringify(arrSplittedValue))\r\n        // console.log(JSON.stringify(arrNameValue))\r\n        // console.log(arrSplittedValue);\r\n        return <div className=\"flex mb-4\">\r\n            <div className=\"w-1/2 m-h-500px p-5\">\r\n                {arrNameValue.length > 0 && (arrNameValue[0].hasOwnProperty(\"Latitude\") || arrNameValue[0].hasOwnProperty(\"LATITUDE\") || arrNameValue[0].hasOwnProperty(\"Approved Latitude\")) ?\r\n                    <div className=\"w-full h-full shadow-lg\">\r\n                        <GoogleMapReact\r\n                            bootstrapURLKeys={{ key: \"AIzaSyDNeF0TGdzD6PN696-ZWgdP7z9ltW0l1QY\" }}\r\n                            options={() => {\r\n                                return {\r\n                                    mapTypeControl: true\r\n                                }\r\n                            }}\r\n                            defaultCenter={{\r\n                                lat: parseFloat(arrNameValue[0].hasOwnProperty(\"Latitude\") ? arrNameValue[0][\"Latitude\"] : (arrNameValue[0].hasOwnProperty(\"LATITUDE\") ? arrNameValue[0][\"LATITUDE\"] : (arrNameValue[0].hasOwnProperty(\"Approved Latitude\") ? arrNameValue[0][\"Approved Latitude\"] : 0))),\r\n                                lng: parseFloat(arrNameValue[0].hasOwnProperty(\"Longitude\") ? arrNameValue[0][\"Longitude\"] : (arrNameValue[0].hasOwnProperty(\"LONGITUDE\") ? arrNameValue[0][\"LONGITUDE\"] : (arrNameValue[0].hasOwnProperty(\"Approved Longitude\") ? arrNameValue[0][\"Approved Longitude\"] : 0))),\r\n                                // lat: parseFloat(arrNameValue[0][\"Latitude\"]),\r\n                                // lng: parseFloat(arrNameValue[0][\"Longitude\"])\r\n                            }}\r\n                            center={{\r\n                                // lat: parseFloat(arrNameValue[0][\"Latitude\"]),\r\n                                // lng: parseFloat(arrNameValue[0][\"Longitude\"])\r\n                                lat: parseFloat(arrNameValue[0].hasOwnProperty(\"Latitude\") ? arrNameValue[0][\"Latitude\"] : (arrNameValue[0].hasOwnProperty(\"LATITUDE\") ? arrNameValue[0][\"LATITUDE\"] : (arrNameValue[0].hasOwnProperty(\"Approved Latitude\") ? arrNameValue[0][\"Approved Latitude\"] : 0))),\r\n                                lng: parseFloat(arrNameValue[0].hasOwnProperty(\"Longitude\") ? arrNameValue[0][\"Longitude\"] : (arrNameValue[0].hasOwnProperty(\"LONGITUDE\") ? arrNameValue[0][\"LONGITUDE\"] : (arrNameValue[0].hasOwnProperty(\"Approved Longitude\") ? arrNameValue[0][\"Approved Longitude\"] : 0))),\r\n                            }}\r\n                            distanceToMouse={() => { }}\r\n                            defaultZoom={arrNameValue ? 6 : 6}\r\n                        >\r\n                            {arrNameValue.map((nameValue) => {\r\n                                return <AnyReactComponent\r\n                                lat={parseFloat(nameValue.hasOwnProperty(\"Latitude\") ? nameValue[\"Latitude\"] : (nameValue.hasOwnProperty(\"LATITUDE\") ? nameValue[\"LATITUDE\"] : (nameValue.hasOwnProperty(\"Approved Latitude\") ? nameValue[\"Approved Latitude\"] : 0)))}\r\n                                lng={parseFloat(nameValue.hasOwnProperty(\"Longitude\") ? nameValue[\"Longitude\"] : (nameValue.hasOwnProperty(\"LONGITUDE\") ? nameValue[\"LONGITUDE\"] : (nameValue.hasOwnProperty(\"Approved Longitude\") ? nameValue[\"Approved Longitude\"] : 0)))}\r\n                                />\r\n                            })}\r\n                        </GoogleMapReact>\r\n                    </div>\r\n                    : <div className=\"w-full h-full shadow-lg relative\">\r\n                        <div className=\"centerItem\">\r\n                            <img className=\"attr_chat mx-auto\" draggable={false} src={map} />\r\n                            <p className=\"text-center mt-3 text-purple-800\">Invalid map data</p>\r\n                        </div>\r\n                    </div>\r\n                }\r\n            </div>\r\n            <div className=\"w-1/2 m-h-500px\">\r\n                <div className=\"max-w rounded w-full shadow  p-5\">\r\n                    <p className=\"text-xl font-bold mb-3\">Attributes</p>\r\n                    <Accordion className=\"border-0\" allowZeroExpanded preExpanded={[\"attributes\"]}>\r\n                        {arrNameValue.map((item, index) => {\r\n                            return <AccordionItem className=\"shadow-md mb-3\" key={index} uuid=\"attributes\">\r\n                                <AccordionItemHeading className=\"bg-gray-400 p-2\">\r\n                                    <AccordionItemButton className=\"w-full border-none outline-none focus:border-0 inline-flex\">\r\n                                        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"feather feather-arrow-right\"><line x1=\"5\" y1=\"12\" x2=\"19\" y2=\"12\"></line><polyline points=\"12 5 19 12 12 19\"></polyline></svg>\r\n                                        &emsp;\r\n                                        {arrSplittedValue[index]}\r\n                                    </AccordionItemButton>\r\n                                </AccordionItemHeading>\r\n                                <AccordionItemPanel>\r\n                                    <table class=\"table-auto w-full\">\r\n                                        <tbody>\r\n                                            {Object.keys(item).map((key) => {\r\n                                                return <tr>\r\n                                                    <td class=\"border px-4 py-2\">{key}</td>\r\n                                                    <td class=\"border px-4 py-2\">{item[key]}</td>\r\n                                                </tr>\r\n                                            })}\r\n                                        </tbody>\r\n                                    </table>\r\n                                </AccordionItemPanel>\r\n                            </AccordionItem>\r\n                        })}\r\n                    </Accordion>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <NavBar showLogoutButton={true}></NavBar>\r\n            {isLoading ?\r\n                <div className=\"popUpContainer\">\r\n                    <div className=\"loader\"></div>\r\n                </div>\r\n                : \"\"}\r\n            <div className=\"p-10\">\r\n                <div className=\"w-full max-w\">\r\n                    <form className=\"bg-white rounded pt-6 pb-8 mb-4\">\r\n                        <div>\r\n                            <div className=\"inline-block\">\r\n                                <label className=\"block text-gray-700 text-sm font-bold mb-2\" htmlFor=\"username\">\r\n                                    Tag Number\r\n                            </label>\r\n                                <input className={isError ? errInputClass : inputClass} value={inputTag}\r\n                                    id=\"tagNumber\" type=\"text\" placeholder=\"Enter your tag number\" onChange={(e) => setInputTag(e.target.value)}\r\n                                />\r\n                            </div>\r\n                            <div className=\"inline-block ml-5\">\r\n                                <button className=\"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded focus:outline-none m-auto\" type=\"button\"\r\n                                    onClick={() => { submitTagNumber() }}\r\n                                >\r\n                                    Submit\r\n                             </button>\r\n                            </div>\r\n                            <div className=\"inline-block ml-5\" style={{ display: data.length > 0 ? \"\" : \"none\" }}>\r\n                                <button onClick={(e) => {\r\n                                    e.preventDefault();\r\n                                    // console.log()\r\n                                    let pre_kml_data = JSON.parse(localStorage.getItem('pre_kml_data'))\r\n                                    let inputArray = JSON.parse(localStorage.getItem('inputsArray'))\r\n                                    var file = new File([`${KML_GEN(pre_kml_data, inputArray)}`], `${new Date()}.kml`, { type: \"text/xml;charset=utf-8\" });\r\n                                    saveAs(file);\r\n                                }} class=\"bg-purple-800 hover:bg-purple-900 text-white  py-2 px-4 rounded inline-flex items-center\">\r\n                                    <svg class=\"fill-current w-4 h-4 mr-2\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\"><path d=\"M13 8V2H7v6H2l8 8 8-8h-5zM0 18h20v2H0v-2z\" /></svg>\r\n                                    <span>Download KML</span>\r\n                                </button>\r\n                            </div>\r\n                            <div className=\"inline-block ml-5\" style={{ display: data.length > 0 ? \"\" : \"none\" }}>\r\n                                <button onClick={(e) => {\r\n                                    e.preventDefault();\r\n                                    let pre_kml_data = JSON.parse(localStorage.getItem('pre_kml_data'))\r\n                                    let json = { type: 'FeatureCollection', features: [] };\r\n                                    let temp = pre_kml_data.map((i) => {\r\n                                        json.features.push({\r\n                                            type: 'Feature',\r\n                                            geometry: {\r\n                                                type: 'Point',\r\n                                                // coordinates: [parseFloat(i.Longitude), parseFloat(i.Latitude)],\r\n                                            },\r\n                                            properties: i,\r\n                                        });\r\n                                    });\r\n                                    var file = new File([`${JSON.stringify(json)}`], `${new Date()}.json`, { type: \"application/json;charset=utf-8\" });\r\n                                    saveAs(file);\r\n                                }} class=\"bg-purple-800 hover:bg-purple-900 text-white  py-2 px-4 rounded inline-flex items-center\">\r\n                                    <svg class=\"fill-current w-4 h-4 mr-2\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\"><path d=\"M13 8V2H7v6H2l8 8 8-8h-5zM0 18h20v2H0v-2z\" /></svg>\r\n                                    <span>Download JSON</span>\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                        {isError ? <p className=\"text-red-500 pl-2 text-xs pt-1\">Tag name is required </p> : \"\"}\r\n                    </form>\r\n                </div>\r\n                {data !== undefined && data.length > 0 &&\r\n                    <div>\r\n                        {showAttr()}\r\n                    </div>\r\n                }\r\n                <p className=\"text-center\">&copy; Datum360 Limited</p>\r\n            </div>\r\n        </>\r\n    )\r\n};\r\n\r\nexport default HomeScreen;","import React, { useEffect, useState } from 'react';\r\nimport Api from \"../api/api\";\r\n\r\nconst Modal = (props) => {\r\n    const [eicData, setEicData] = useState([]);\r\n    const [deliverablesData, setDeliverablesData] = useState([]);\r\n    const [ensData, setEnsData] = useState([]);\r\n    const [sourceData, setSourceData] = useState([]);\r\n    const [domainData, setDomainData] = useState([]);\r\n    const [finalObj, setFinalObj] = useState({\r\n        \"hdl\": \"\",\r\n        \"status\": \"PENDING\",\r\n        \"params\": {\r\n            \"eic_handle\": \"\",\r\n            \"manifest_name\": \"\",\r\n            \"inputfile\": \"\",\r\n            \"worksheets\": \"\",\r\n            \"object_type\": \"\",\r\n            \"deliverable\": \"\",\r\n            \"source_handle\": \"\",\r\n            \"classification\": \"\",\r\n            \"ens_name\": \"\",\r\n            \"terminate_attributes\": \"ignore\"\r\n        }\r\n    }\r\n    );\r\n    const selectClass = \"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\";\r\n    const lableClass = \"block text-sm font-medium text-gray-700\";\r\n    let userName = localStorage.getItem(\"userName\");\r\n    let password = localStorage.getItem(\"password\");\r\n    let token = localStorage.getItem(\"b_token\");\r\n    let prefixUrl = localStorage.getItem(\"prefixUrl\");\r\n    let clsToken = localStorage.getItem(\"b_token_cls\");\r\n    let baseUrl = `https://${prefixUrl}.pim360.io/api`;\r\n    let cls_baseUrl = `https://${prefixUrl}.cls360.io/api`;\r\n    const objectType = [\r\n        { value: \"TAGGED_ITEM\", name: \"Tagged Item\" },\r\n        { value: \"EQUIPMENT_ITEM\", name: \"Equipment Item\" },\r\n        { value: \"EQUIPMENT_MODEL\", name: \"Equipment Model\" },\r\n        { value: \"DOCUMENT\", name: \"Document\" }\r\n    ];\r\n    const classification = [\r\n        { value: \"cls\", name: \"CLASS\" },\r\n        { value: \"ens\", name: \"ENS\" }\r\n    ];\r\n\r\n    useEffect(() => {\r\n        getEICList();\r\n    }, []);\r\n\r\n    const onClickCancel = () => {\r\n        if (props.onClickCancel) {\r\n            props.onClickCancel();\r\n        };\r\n    };\r\n\r\n    const getEICList = () => {\r\n        console.log('inside getEICList ---------->')\r\n        let url = `${baseUrl}/eic/list`;\r\n        fetch(url, {\r\n            headers: {\r\n                Accept: \"application/json\",\r\n                Authorization: token,\r\n            }\r\n        }).then(response => {\r\n            var responseValue = response.json();\r\n            return responseValue;\r\n        }).then(responseData => {\r\n            if (responseData !== undefined && responseData !== null) {\r\n                let eic_List = responseData.rows.map((item) => {\r\n                    let keyToGetValue = Object.keys(item)[4];\r\n                    if (item[keyToGetValue] != undefined) {\r\n                        return { \"name\": item[keyToGetValue], \"value\": item.id }\r\n                    }\r\n                    else {\r\n                        return null\r\n                    }\r\n                });\r\n                let filteredList = eic_List.filter(item => item != null);\r\n                // console.log('filteredList -------', JSON.stringify(filteredList))\r\n                setEicData(filteredList)\r\n            }\r\n        }).catch(error => {\r\n            console.log(\"getEICList error -------->\" + error);\r\n        });\r\n    };\r\n\r\n    const getDeliverables = (eic) => {\r\n        console.log('inside getDeliverables ---------->');\r\n        let url = `${baseUrl}/eic/${eic}/deliverables`;\r\n        fetch(url, {\r\n            headers: {\r\n                Accept: \"application/json\",\r\n                Authorization: token,\r\n            }\r\n        }).then(response => {\r\n            var responseValue = response.json();\r\n            return responseValue;\r\n        }).then(responseData => {\r\n            if (responseData !== undefined && responseData !== null) {\r\n                // console.log('getDeliverables   -------->', JSON.stringify(responseData));\r\n                let deliverable_keys = Object.keys(responseData.Deliverables)\r\n                if (deliverable_keys.length != null && deliverable_keys.length > 0) {\r\n                    let filter_list = deliverable_keys.filter(e => e != \"length\");\r\n                    let deliverables_list = [];\r\n                    filter_list.map((filter) => {\r\n                        responseData.Deliverables[filter].map(({ ID, Hdl }) => {\r\n                            deliverables_list.push({ \"name\": ID, \"value\": Hdl });\r\n                        });\r\n                    });\r\n                    setDeliverablesData(deliverables_list);\r\n                }\r\n            }\r\n        }).catch(error => {\r\n            console.log(\"getDeliverables error -------->\" + error);\r\n        });\r\n    };\r\n\r\n    const getTimeLine = () => {\r\n        console.log('inside getTimeLine ---------->');\r\n        let url = `${baseUrl}/timeline?categories=IMPORT&offset=0&limit=200`;\r\n        fetch(url, {\r\n            headers: {\r\n                Accept: \"application/json\",\r\n                Authorization: token,\r\n            }\r\n        }).then(response => {\r\n            var responseValue = response.json();\r\n            return responseValue;\r\n        }).then(responseData => {\r\n            if (responseData !== undefined && responseData !== null) {\r\n                let tempObj = { ...finalObj };\r\n                tempObj.hdl = responseData[0].Hdl;\r\n                setFinalObj(tempObj);\r\n                if (props.onClickSubmit) {\r\n                    props.onClickSubmit(tempObj);\r\n                };\r\n                // console.log('final obj --------', JSON.stringify(tempObj));\r\n            }\r\n        }).catch(error => {\r\n            console.log(\"getTimeLine error -------->\" + error);\r\n        });\r\n    };\r\n\r\n    const authCls = () => {\r\n        console.log('inside authCls -------------> ')\r\n        Api.getClsToken(userName, password, prefixUrl).then((response) => {\r\n            if (response.data.access_token != \"\") {\r\n                //set token in local storage\r\n                localStorage.setItem(\"b_token_cls\", response.data.token_type + \" \" + response.data.access_token);\r\n                clsToken = localStorage.getItem(\"b_token_cls\");\r\n                getDomains();\r\n            };\r\n        }).catch((e) => {\r\n            //setting common error\r\n            console.log('authCls error-------> ');\r\n        });\r\n    };\r\n\r\n    const getDomains = () => {\r\n        console.log('inside getDomains ---------->');\r\n        let url = `${cls_baseUrl}/domains?pageSize=200&page=0`;\r\n        fetch(url, {\r\n            headers: {\r\n                Accept: \"application/json\",\r\n                Authorization: clsToken,\r\n            }\r\n        }).then(response => {\r\n            var responseValue = response.json();\r\n            return responseValue;\r\n        }).then(responseData => {\r\n            if (responseData !== undefined && responseData !== null) {\r\n                let domain_List = responseData.value.map(({ Name, Hdl }) => {\r\n                    return { \"name\": Name, \"value\": Hdl };\r\n                })\r\n                setDomainData(domain_List);\r\n            }\r\n        }).catch(error => {\r\n            console.log(\"getDomains error -------->\" + error);\r\n        });\r\n    };\r\n\r\n    const getSourceNames = (hdl) => {\r\n        console.log('inside getSourceNames ---------->');\r\n        let url = `${cls_baseUrl}/domains/${hdl}/classes?filter=%5BObject%20Type%5D%20cnt%20Source&pageSize=200&page=0`;\r\n        fetch(url, {\r\n            headers: {\r\n                Accept: \"application/json\",\r\n                Authorization: clsToken,\r\n            }\r\n        }).then(response => {\r\n            var responseValue = response.json();\r\n            return responseValue;\r\n        }).then(responseData => {\r\n            if (responseData !== undefined && responseData !== null) {\r\n                let source_List = responseData.value.map(({ Name, Hdl }) => {\r\n                    return { \"name\": Name, \"value\": Hdl }\r\n                })\r\n                setSourceData(source_List);\r\n            }\r\n        }).catch(error => {\r\n            console.log(\"getSourceNames error -------->\" + error);\r\n        });\r\n    };\r\n\r\n    const getEnsNames = (hdl) => {\r\n        console.log('inside getEnsNames ---------->');\r\n        let url = `${cls_baseUrl}/domains/${hdl}/classes?filter=%5BObject%20Type%5D%20cnt%20Numbering&pageSize=200&page=0`;\r\n        fetch(url, {\r\n            headers: {\r\n                Accept: \"application/json\",\r\n                Authorization: clsToken,\r\n            }\r\n        }).then(response => {\r\n            var responseValue = response.json();\r\n            return responseValue;\r\n        }).then(responseData => {\r\n            if (responseData !== undefined && responseData !== null) {\r\n                let ens_List = responseData.value.map(({ Name }) => {\r\n                    return { \"name\": Name, \"value\": Name }\r\n                })\r\n                setEnsData(ens_List);\r\n            }\r\n        }).catch(error => {\r\n            console.log(\"getEnsNames error -------->\" + error);\r\n        });\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <div style={{ display: \"none\" }} className=\"modal-container\">\r\n                <div className=\"modal\">\r\n                    <div className=\"mt-3\">\r\n                        <label className=\"label inline-block mr-3 w-1/4\">\r\n                            Object Type\r\n                        </label>\r\n                        <select className=\"select inline-block w-2/4\"\r\n                            onChange={(e) => {\r\n                                let tempObj = { ...finalObj };\r\n                                tempObj.params.object_type = e.target.value\r\n                                setFinalObj(tempObj);\r\n                            }}\r\n                        >\r\n                            <option value=\"\">Select Object Type</option>\r\n                            {objectType.map((eic) => {\r\n                                return <option value={eic.value}>{eic.name}</option>\r\n                            })}\r\n                        </select>\r\n                    </div>\r\n                    <div className=\"mt-3\">\r\n                        <label className=\"label inline-block mr-3 w-1/4\">\r\n                            Classification\r\n                        </label>\r\n                        <select className=\"select inline-block w-2/4\"\r\n                            onChange={(e) => {\r\n                                let tempObj = { ...finalObj };\r\n                                tempObj.params.classification = e.target.value;\r\n                                setFinalObj(tempObj);\r\n                            }}\r\n                        >\r\n                            <option value=\"\">Select Classification</option>\r\n                            {classification.map((eic) => {\r\n                                return <option value={eic.value}>{eic.name}</option>\r\n                            })}\r\n                        </select>\r\n                    </div>\r\n                    <div className=\"mt-3\">\r\n                        <label className=\"label inline-block mr-3 w-1/4\">\r\n                            EIC\r\n                        </label>\r\n                        <select className=\"select inline-block w-2/4\"\r\n                            onChange={(e) => {\r\n                                let tempObj = { ...finalObj };\r\n                                tempObj.params.eic_handle = e.target.value;\r\n                                setFinalObj(tempObj);\r\n                                getDeliverables(e.target.value)\r\n                            }}\r\n                        >\r\n                            <option value=\"\">Select Eic</option>\r\n                            {eicData.map((eic) => {\r\n                                return <option value={eic.value}>{eic.name}</option>\r\n                            })}\r\n                        </select>\r\n                    </div>\r\n                    <div className=\"mt-3\">\r\n                        <label className=\"label inline-block mr-3 w-1/4\">\r\n                            Deliverables\r\n                        </label>\r\n                        <select className=\"select inline-block w-2/4\"\r\n                            onChange={(e) => {\r\n                                let tempObj = { ...finalObj };\r\n                                tempObj.params.deliverable = e.target.value;\r\n                                setFinalObj(tempObj);\r\n                                authCls();\r\n                            }}\r\n                        >\r\n                            <option value=\"\">Select Deliverables</option>\r\n                            {deliverablesData.map((eic) => {\r\n                                return <option value={eic.value}>{eic.name}</option>\r\n                            })}\r\n                        </select>\r\n                    </div>\r\n                    <div className=\"mt-3\">\r\n                        <label className=\"label inline-block mr-3 w-1/4\">\r\n                            Domains\r\n                        </label>\r\n                        <select className=\"select inline-block w-2/4\"\r\n                            onChange={(e) => {\r\n                                getSourceNames(e.target.value);\r\n                                getEnsNames(e.target.value);\r\n                            }}\r\n                        >\r\n                            <option value=\"\">Select Deliverables</option>\r\n                            {domainData.map((eic) => {\r\n                                return <option value={eic.value}>{eic.name}</option>\r\n                            })}\r\n                        </select>\r\n                    </div>\r\n                    <div className=\"mt-3\">\r\n                        <label className=\"label inline-block mr-3 w-1/4\">\r\n                            Source Name\r\n                        </label>\r\n                        <select className=\"select inline-block w-2/4\"\r\n                            onChange={(e) => {\r\n                                let tempObj = { ...finalObj };\r\n                                tempObj.params.source_handle = e.target.value;\r\n                                setFinalObj(tempObj);\r\n                            }}\r\n                        >\r\n                            <option value=\"\">Select Source</option>\r\n                            {sourceData.map((eic) => {\r\n                                return <option value={eic.value}>{eic.name}</option>\r\n                            })}\r\n                        </select>\r\n                    </div>\r\n                    <div className=\"mt-3\">\r\n                        <label className=\"label inline-block mr-3 w-1/4\">\r\n                            ENS Name\r\n                        </label>\r\n                        <select className=\"select inline-block w-2/4\"\r\n                            onChange={(e) => {\r\n                                let tempObj = { ...finalObj };\r\n                                tempObj.params.ens_name = e.target.value;\r\n                                setFinalObj(tempObj);\r\n                            }}\r\n                        >\r\n                            <option value=\"\">Select Deliverables</option>\r\n                            {ensData.map((eic) => {\r\n                                return <option value={eic.value}>{eic.name}</option>\r\n                            })}\r\n                        </select>\r\n                    </div>\r\n                    <button className=\"x-icon\" onClick={() => onClickCancel()}>\r\n                        X\r\n                    </button>\r\n                    <div>\r\n                        <button className=\"mr-3\" onClick={() => onClickCancel()}>\r\n                            Cancel\r\n                    </button>\r\n                        <button className=\"\" onClick={() => getTimeLine()}>\r\n                            Submit\r\n                    </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"fixed z-10 inset-0 overflow-y-auto\">\r\n                <div class=\"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0\">\r\n                    <div class=\"fixed inset-0 transition-opacity\" aria-hidden=\"true\">\r\n                        <div class=\"absolute inset-0 bg-gray-500 opacity-75\"></div>\r\n                    </div>\r\n                    <span class=\"hidden sm:inline-block sm:align-middle sm:h-screen\" aria-hidden=\"true\">&#8203;</span>\r\n                    <div class=\"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full\" role=\"dialog\" aria-modal=\"true\" aria-labelledby=\"modal-headline\">\r\n                        <div class=\"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4\">\r\n                            <div className=\"mt-3\">\r\n                                <label for=\"objectType\" className={lableClass}>Object Type</label>\r\n                                <select className={selectClass}\r\n                                    onChange={(e) => {\r\n                                        let tempObj = { ...finalObj };\r\n                                        tempObj.params.object_type = e.target.value\r\n                                        setFinalObj(tempObj);\r\n                                    }}\r\n                                >\r\n                                    <option value=\"\">Select Object Type</option>\r\n                                    {objectType.map((eic) => {\r\n                                        return <option value={eic.value}>{eic.name}</option>\r\n                                    })}\r\n                                </select>\r\n                            </div>\r\n                            <div className=\"mt-3\">\r\n                                <label className={lableClass}>\r\n                                    Classification\r\n                                </label>\r\n                                <select className={selectClass}\r\n                                    onChange={(e) => {\r\n                                        let tempObj = { ...finalObj };\r\n                                        tempObj.params.classification = e.target.value;\r\n                                        setFinalObj(tempObj);\r\n                                    }}\r\n                                >\r\n                                    <option value=\"\">Select Classification</option>\r\n                                    {classification.map((eic) => {\r\n                                        return <option value={eic.value}>{eic.name}</option>\r\n                                    })}\r\n                                </select>\r\n                            </div>\r\n                            <div className=\"mt-3\">\r\n                                <label className={lableClass}>\r\n                                    EIC\r\n                        </label>\r\n                                <select className={selectClass}\r\n                                    onChange={(e) => {\r\n                                        let tempObj = { ...finalObj };\r\n                                        tempObj.params.eic_handle = e.target.value;\r\n                                        setFinalObj(tempObj);\r\n                                        getDeliverables(e.target.value)\r\n                                    }}\r\n                                >\r\n                                    <option value=\"\">Select Eic</option>\r\n                                    {eicData.map((eic) => {\r\n                                        return <option value={eic.value}>{eic.name}</option>\r\n                                    })}\r\n                                </select>\r\n                            </div>\r\n                            <div className=\"mt-3\">\r\n                                <label className={lableClass}>\r\n                                    Deliverables\r\n                        </label>\r\n                                <select className={selectClass}\r\n                                    onChange={(e) => {\r\n                                        let tempObj = { ...finalObj };\r\n                                        tempObj.params.deliverable = e.target.value;\r\n                                        setFinalObj(tempObj);\r\n                                        authCls();\r\n                                    }}\r\n                                >\r\n                                    <option value=\"\">Select Deliverables</option>\r\n                                    {deliverablesData.map((eic) => {\r\n                                        return <option value={eic.value}>{eic.name}</option>\r\n                                    })}\r\n                                </select>\r\n                            </div>\r\n                            <div className=\"mt-3\">\r\n                                <label className={lableClass}>\r\n                                    Domains\r\n                        </label>\r\n                                <select className={selectClass}\r\n                                    onChange={(e) => {\r\n                                        getSourceNames(e.target.value);\r\n                                        getEnsNames(e.target.value);\r\n                                    }}\r\n                                >\r\n                                    <option value=\"\">Select Deliverables</option>\r\n                                    {domainData.map((eic) => {\r\n                                        return <option value={eic.value}>{eic.name}</option>\r\n                                    })}\r\n                                </select>\r\n                            </div>\r\n                            <div className=\"mt-3\">\r\n                                <label className={lableClass}>\r\n                                    Source Name\r\n                        </label>\r\n                                <select className={selectClass}\r\n                                    onChange={(e) => {\r\n                                        let tempObj = { ...finalObj };\r\n                                        tempObj.params.source_handle = e.target.value;\r\n                                        setFinalObj(tempObj);\r\n                                    }}\r\n                                >\r\n                                    <option value=\"\">Select Source</option>\r\n                                    {sourceData.map((eic) => {\r\n                                        return <option value={eic.value}>{eic.name}</option>\r\n                                    })}\r\n                                </select>\r\n                            </div>\r\n                            <div className=\"mt-3\">\r\n                                <label className={lableClass}>\r\n                                    ENS Name\r\n                        </label>\r\n                                <select className={selectClass}\r\n                                    onChange={(e) => {\r\n                                        let tempObj = { ...finalObj };\r\n                                        tempObj.params.ens_name = e.target.value;\r\n                                        setFinalObj(tempObj);\r\n                                    }}\r\n                                >\r\n                                    <option value=\"\">Select Deliverables</option>\r\n                                    {ensData.map((eic) => {\r\n                                        return <option value={eic.value}>{eic.name}</option>\r\n                                    })}\r\n                                </select>\r\n                            </div>\r\n\r\n                        </div>\r\n                        <div class=\"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse\">\r\n                            <button onClick={() => getTimeLine()} type=\"button\" class=\"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-purple-900 text-base font-medium text-white hover:bg-purple-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm\">\r\n                                Submit\r\n                            </button>\r\n                            <button onClick={() => onClickCancel()} type=\"button\" class=\"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm\">\r\n                                Cancel\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Modal;","import React, { useEffect, useState } from 'react';\r\nimport NavBar from '../components/NavBar';\r\nimport Modal from '../components/Modal';\r\nimport Upload from \"../components/Upload\";\r\nimport GoogleMapReact from 'google-map-react';\r\nimport { useHistory } from \"react-router-dom\";\r\nimport search from \"../assests/search.svg\";\r\nimport Api from '../api/api';\r\nimport {\r\n    Accordion,\r\n    AccordionItem,\r\n    AccordionItemHeading,\r\n    AccordionItemButton,\r\n    AccordionItemPanel,\r\n} from 'react-accessible-accordion';\r\nimport map from \"../assests/map.svg\";\r\nconst axios = require('axios');\r\nconst AnyReactComponent = ({ text }) => <div><img alt=\"Marker\" src=\"https://img.icons8.com/fluent/48/000000/marker-storm.png\" />{text}</div>;\r\n\r\nfunction LiveView(props) {\r\n    const [arrLiveView, setarrLiveView] = useState([]);\r\n    const [isError, setIsError] = useState();\r\n    const [data, setData] = useState([]);\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const [arrSplittedValue, setArrSplittedValue] = useState([]);\r\n    const [showData, setShowData] = useState(false);\r\n    const [arrTagNumber, setArrTagNumber] = useState([]);\r\n    const [selectedLiveViewHdl, setselectedLiveViewHdl] = useState(\"\");\r\n    const [isContentEditable, setisContentEditable] = useState(false);\r\n    const [editedAttr, seteditedAttr] = useState({});\r\n    const [showModal, setshowModal] = useState(false);\r\n    const [secondBody, setSecondBody] = useState({});\r\n    let tempSelectedObj = {};\r\n    let token = localStorage.getItem(\"b_token\");\r\n    let prefixUrl = localStorage.getItem(\"prefixUrl\");\r\n    let baseUrl = `https://${prefixUrl}.pim360.io/api`;\r\n    let userName = localStorage.getItem(\"userName\");\r\n    let password = localStorage.getItem(\"password\");\r\n    let arrData = [];\r\n\r\n    useEffect(() => {\r\n        fetchLiveView();\r\n    }, []);\r\n\r\n    const fetchLiveView = () => {\r\n        setIsLoading(true);\r\n        let url = `${baseUrl}/customviews?type=LIVE_VIEW`;\r\n        fetch(url, {\r\n            headers: {\r\n                Accept: \"application/json\",\r\n                Authorization: token,\r\n            }\r\n        }).then(response => {\r\n            var responseValue = response.json();\r\n            return responseValue;\r\n        }).then(responseData => {\r\n            if (responseData !== undefined && responseData !== null) {\r\n                setarrLiveView(responseData);\r\n            }\r\n            setIsLoading(false);\r\n        }).catch(error => {\r\n            console.log(\"error -------->\" + error);\r\n            setIsLoading(false);\r\n        });\r\n    };\r\n\r\n    const fetchSelectedLiveViewData = (e, selectedLiveView, selectedHdl) => {\r\n        setselectedLiveViewHdl(selectedLiveView);\r\n        setIsLoading(true);\r\n        let url = `${baseUrl}/customviews/${selectedHdl}`;\r\n        fetch(url, {\r\n            headers: {\r\n                Accept: \"application/json\",\r\n                Authorization: token,\r\n            }\r\n        }).then(response => {\r\n            var responseValue = response.json();\r\n            return responseValue;\r\n        }).then(response => {\r\n            if (response !== undefined && response !== null) {\r\n                getResultUrl(response);\r\n            }\r\n        }).catch(error => {\r\n            console.log(\"fetchSelectedLiveViewData error -------->\" + error);\r\n            setIsLoading(false);\r\n        });\r\n    }\r\n\r\n    const firstApi = () => {\r\n        setIsLoading(true)\r\n        let url = `https://pim4.azurewebsites.net/api/pim360?function_name=auth&username=${userName}&password=${password}&purl=${prefixUrl}`;\r\n        var myHeaders = new Headers();\r\n        var requestOptions = {\r\n            method: 'GET',\r\n            headers: myHeaders,\r\n            redirect: 'follow'\r\n        };\r\n        fetch(url, requestOptions).then(response => response.json())\r\n            .then(data => {\r\n                console.log('firstApi res ----->', JSON.stringify(data));\r\n                secondApi();\r\n            })\r\n            .catch((error) => {\r\n                console.error('firstApi Error:', error);\r\n                setIsLoading(false)\r\n            });\r\n    };\r\n\r\n    const secondApi = () => {\r\n        setIsLoading(true)\r\n        let url = `https://pim4.azurewebsites.net/api/pim360?function_name=import`;\r\n        fetch(url, {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                \"Authorization\": token\r\n            },\r\n            body: JSON.stringify(secondBody),\r\n        }).then(response => response.json())\r\n            .then(data => {\r\n                console.error('secondApi response ------------>', data);\r\n                thirdApi();\r\n            })\r\n            .catch((error) => {\r\n                console.error(' secondApi Error:', error);\r\n                setIsLoading(false)\r\n            });\r\n    };\r\n\r\n    const thirdApi = () => {\r\n        setIsLoading(true)\r\n        let url = `https://pim4.azurewebsites.net/api/pim360?function_name=download-new`;\r\n        var myHeaders = new Headers();\r\n        var requestOptions = {\r\n            method: 'GET',\r\n            headers: myHeaders,\r\n            redirect: 'follow'\r\n        };\r\n        fetch(url, requestOptions).then(response => response.json())\r\n            .then(data => {\r\n                console.log('thirdApi res ----->', JSON.stringify(data));\r\n                fourthApi(data.response);\r\n            })\r\n            .catch((error) => {\r\n                console.error('thirdApi Error:', error);\r\n                setIsLoading(false)\r\n            });\r\n    };\r\n\r\n    const fourthApi = (hdl) => {\r\n        setIsLoading(true)\r\n        let url = `https://pim4.azurewebsites.net/api/pim360?function_name=update&file_hdl=${hdl}`;\r\n        fetch(url, {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                \"Authorization\": token\r\n            },\r\n            body: JSON.stringify(secondBody),\r\n        }).then(response => response.json())\r\n            .then(data => {\r\n                console.error(' fourthApi response--------->:', data);\r\n                setIsLoading(false);\r\n            })\r\n            .catch((error) => {\r\n                console.error(' fourthApi Error:', error);\r\n                setIsLoading(false)\r\n            });\r\n    };\r\n\r\n\r\n    const getResultUrl = (response) => {\r\n        let createQueryBody = {\r\n            \"type\": \"TAGGED_ITEM\",\r\n            \"eic\": \"\",\r\n            \"filter\": response.Data.conditions,\r\n            \"fields\": response.Data.fields\r\n        };\r\n        let url = `${baseUrl}/queries`;\r\n        fetch(url, {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                \"Authorization\": token\r\n            },\r\n            body: JSON.stringify(createQueryBody),\r\n        }).then(response => response.json())\r\n            .then(data => {\r\n                return getFinalResult(data.resulturl).then((finalResult) => {\r\n                    // console.log('finalResult ------->', JSON.stringify(finalResult));\r\n                    setIsLoading(false);\r\n                    let arrFirstObjKeys = Object.keys(finalResult[0]).filter(e => typeof finalResult[0][e] == 'object')\r\n                    let arrModifiedData = [];\r\n                    let arrTagNumberData = [];\r\n                    finalResult.map((item) => {\r\n                        let obj = {};\r\n                        arrFirstObjKeys.map((key) => {\r\n                            if (item[key].name == \"Tag Number\" || item[key].name == \"TAG NUMBER\") {\r\n                                arrTagNumberData.push(item[key].value);\r\n                            }\r\n                            obj[item[key].name] = item[key].value;\r\n                        });\r\n                        arrModifiedData.push(obj);\r\n                    });\r\n                    if (arrModifiedData.length > 0) {\r\n                        if (arrModifiedData[0].hasOwnProperty(\"Tag Number\") || arrModifiedData[0].hasOwnProperty(\"TAG NUMBER\")) {\r\n                            if (arrTagNumberData.length > 0) {\r\n                                setArrTagNumber(arrTagNumberData);\r\n                            }\r\n                            setShowData(true);\r\n                        }\r\n                        else {\r\n                            //finish process and show no data found\r\n                            setShowData(true)\r\n                        }\r\n                    }\r\n                });\r\n            })\r\n            .catch((error) => {\r\n                console.error('Error:', error);\r\n                setIsLoading(false)\r\n            });\r\n    };\r\n\r\n    const getFinalResult = (queryResult, pageSize = 200, page = 0) => {\r\n        let url = `${baseUrl}${queryResult}?limit=${pageSize}&skip=${page}`;\r\n        axios.defaults.headers.common = { 'Authorization': localStorage.getItem(\"b_token\") };\r\n        return Api.getRequest(url).then((response) => {\r\n            arrData.push(...response.data);\r\n            if (response.hasmore) {\r\n                return getFinalResult(queryResult, pageSize, (arrData.length / pageSize) * 200)\r\n            } else {\r\n                setIsLoading(false);\r\n                return arrData;\r\n            }\r\n        });\r\n    }\r\n\r\n    const getAttributes = (selectedTag) => {\r\n        let url = `${baseUrl}/objects/TAGGED_ITEM/id/${selectedTag}`;\r\n        fetch(url, {\r\n            headers: {\r\n                Accept: \"application/json\",\r\n                Authorization: token,\r\n            }\r\n        }).then(response => {\r\n            var responseValue = response.json();\r\n            return responseValue;\r\n        }).then(responseData => {\r\n            setData(responseData);\r\n        }).catch(error => {\r\n            setIsLoading(false);\r\n            console.log(\"getAttributes error -------->\" + error);\r\n        })\r\n    }\r\n\r\n    const onChangeAttributeValue = (value, key) => {\r\n        let obj = {};\r\n        console.log('editedAttr before------->', JSON.stringify(editedAttr))\r\n        if(Object.keys(editedAttr).length > 0){\r\n            console.log('inside if ----->');\r\n            obj = {...editedAttr};\r\n            tempSelectedObj = {};\r\n        }\r\n        else{\r\n            console.log('inside else ----->')\r\n            obj = {...tempSelectedObj};\r\n        }\r\n        obj[key] = value;\r\n        seteditedAttr(obj);\r\n        console.log('editedAttr --------', JSON.stringify(obj));\r\n    }\r\n\r\n    const handleSubmitModal = (value) => {\r\n        let finalData = {\r\n            finalObj: value,\r\n            xlsxData: [editedAttr],\r\n        }\r\n        setSecondBody(finalData);\r\n        console.log('handleSubmitModal --------->', JSON.stringify(finalData));\r\n        setshowModal(false);\r\n        firstApi();\r\n    }\r\n\r\n    const showAttr = () => {\r\n        let arrNameValue = [];\r\n        let arrkeys = Object.keys(data.attrs)\r\n        let obj = {};\r\n        arrkeys.map((key) => {\r\n            obj[data.attrs[key].name] = data.attrs[key].value;\r\n            return '';\r\n        })\r\n        arrNameValue.push(obj);\r\n        tempSelectedObj = arrNameValue[0];\r\n        localStorage.setItem('pre_kml_data', JSON.stringify(arrNameValue))\r\n        localStorage.setItem('inputsArray', JSON.stringify(arrSplittedValue))\r\n        return <div className=\"flex mb-4\">\r\n            <div className=\"w-1/2 m-h-500px p-5\">\r\n                {arrNameValue.length > 0 && arrNameValue[0].hasOwnProperty(\"Approved Longitude\") && arrNameValue[0].hasOwnProperty(\"Approved Latitude\") ?\r\n                    <div className=\"w-full h-full shadow-lg\">\r\n                        <a target=\"_blank\" href={`https://earth.google.com/web/search/Arsenal+fc/@${parseFloat(arrNameValue[0][\"Approved Latitude\"])},${parseFloat(arrNameValue[0][\"Approved Longitude\"])},9.09858867a,612.98636056d,35y,-40.1316669h,45.00000069t,0`}>Click here for Google Earth</a>\r\n                        <GoogleMapReact\r\n                            bootstrapURLKeys={{ key: \"AIzaSyDNeF0TGdzD6PN696-ZWgdP7z9ltW0l1QY\" }}\r\n                            options={() => {\r\n                                return {\r\n                                    mapTypeControl: true,\r\n                                    mapTypeId: \"satellite\"\r\n                                }\r\n                            }}\r\n                            defaultCenter={{\r\n                                lat: parseFloat(arrNameValue[0][\"Approved Latitude\"]),\r\n                                lng: parseFloat(arrNameValue[0][\"Approved Longitude\"])\r\n                            }}\r\n                            center={{\r\n                                lat: parseFloat(arrNameValue[0][\"Approved Latitude\"]),\r\n                                lng: parseFloat(arrNameValue[0][\"Approved Longitude\"])\r\n                            }}\r\n                            distanceToMouse={() => { }}\r\n                            defaultZoom={arrNameValue ? 18 : 6}\r\n                        >\r\n                            {arrNameValue.map((nameValue) => {\r\n                                return <AnyReactComponent\r\n                                    lat={nameValue[\"Approved Latitude\"]}\r\n                                    lng={nameValue[\"Approved Longitude\"]}\r\n                                />\r\n                            })}\r\n                        </GoogleMapReact>\r\n                    </div>\r\n                    : <div className=\"w-full h-full shadow-lg relative\">\r\n                        <div className=\"centerItem\">\r\n                            <img className=\"attr_chat mx-auto\" draggable={false} src={map} />\r\n                            <p className=\"text-center mt-3 text-purple-800\">Invalid map data</p>\r\n                        </div>\r\n                    </div>\r\n                }\r\n            </div>\r\n            <div className=\"w-1/2 m-h-500px\">\r\n                <div className=\"max-w rounded w-full shadow  p-5\">\r\n                    <div>\r\n                        {!isContentEditable \r\n                            ? \r\n                                <button className=\"bg-white py-2 px-3 border border-gray-300 rounded-md shadow-sm text-sm leading-4 font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500\" onClick={()=>setisContentEditable(true)}>\r\n                                    Edit\r\n                                </button>\r\n                            : \r\n                                <div>\r\n                                     <button className=\"bg-white py-2 px-3 border border-gray-300 rounded-md shadow-sm text-sm leading-4 font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 mr-3\" onClick={()=> setisContentEditable(false)}>\r\n                                        Cancel\r\n                                    </button>\r\n                                    <button className=\"inline-flex justify-center py-2 px-3 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-purple-900 hover:bg-purple-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500\" onClick={()=> setshowModal(true)}>\r\n                                        Save\r\n                                    </button>\r\n                                </div>\r\n                        }\r\n                    </div>\r\n                    <p className=\"text-xl font-bold mb-3\">Attributes</p>\r\n                    <Accordion className=\"border-0\" allowZeroExpanded preExpanded={[\"attributes\"]}>\r\n                        {arrNameValue.map((item, index) => {\r\n                            return <AccordionItem className=\"shadow-md mb-3\" key={item.Latitude} uuid=\"attributes\" key={item+index}>\r\n                                <AccordionItemHeading className=\"bg-gray-400 p-2\">\r\n                                    <AccordionItemButton className=\"w-full border-none outline-none focus:border-0 inline-flex\">\r\n                                        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" className=\"feather feather-arrow-right\"><line x1=\"5\" y1=\"12\" x2=\"19\" y2=\"12\"></line><polyline points=\"12 5 19 12 12 19\"></polyline></svg>\r\n                                        &emsp;\r\n                                        {arrNameValue[index].hasOwnProperty(\"Tag Number\") ? arrNameValue[index][\"Tag Number\"] : arrNameValue[index][\"TAG NUMBER\"]}\r\n                                    </AccordionItemButton>\r\n                                </AccordionItemHeading>\r\n                                <AccordionItemPanel className=\"liveView-item-container\">\r\n                                    <table className=\"table-auto w-full\">\r\n                                        <tbody>\r\n                                            {Object.keys(item).map((key, index) => {\r\n                                                return <tr key={key + index}>\r\n                                                    <td className=\"border px-4 py-2\">{key}</td>\r\n                                                    {!isContentEditable \r\n                                                    ? \r\n                                                        <td className=\"border px-4 py-2\">{item[key]}</td>\r\n                                                    : \r\n                                                        <td className=\"border px-4 py-2\">\r\n                                                            <input onChange={(e)=> onChangeAttributeValue(e.target.value, key)} defaultValue={item[key]}></input>\r\n                                                        </td>\r\n                                                    }\r\n                                                    \r\n                                                </tr>\r\n                                            })}\r\n                                        </tbody>\r\n                                    </table>\r\n                                </AccordionItemPanel>\r\n                            </AccordionItem>\r\n                        })}\r\n                    </Accordion>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    }\r\n    return (\r\n        <div>\r\n            <NavBar showLogoutButton={true} showSearch={false}></NavBar>\r\n            {isLoading ?\r\n                <div className=\"popUpContainer\">\r\n                    <div className=\"loader\"></div>\r\n                </div>\r\n                : \"\"\r\n            }\r\n            {showModal ? <Modal onClickCancel={()=> {setshowModal(false)}} onClickSubmit={(value)=> handleSubmitModal(value)} /> : \"\" }\r\n            <div id=\"liveView-container\">\r\n                <div className=\"sideBar bg-purple-900\">\r\n                    {arrLiveView != null && arrLiveView.length > 0 ? arrLiveView.map((liveView, index) => {\r\n                        return (<div  key={liveView.name + liveView.Hdl + index}>\r\n                            <button\r\n                                onClick={(e) => fetchSelectedLiveViewData(e, liveView.Name, liveView.Hdl)}\r\n                               \r\n                                className=\"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded inline-flex my-2 justify-center w-full\">\r\n                                {liveView.Name}\r\n                            </button>\r\n                        </div>)\r\n                    }) : \"\"}\r\n                </div>\r\n                <div className=\"liveView-wrapper\">\r\n                    {showData ?\r\n                        <div className=\"relative\">\r\n                            <div className=\"m-4\">\r\n                                <label className=\"inline-block text-gray-700 text-sm font-bold \" htmlFor=\"username\">\r\n                                    Selected LiveView:\r\n                                </label>\r\n                                <p className=\"inline-block ml-4\">{selectedLiveViewHdl}</p>\r\n                            </div>\r\n                            {arrTagNumber.length > 0 &&\r\n                                <div className=\"m-4 mt-0\">\r\n                                    <label className=\"block text-gray-700 text-sm font-bold mb-2\" htmlFor=\"username\">\r\n                                        Tag Number\r\n                                    </label>\r\n                                    <div className=\"inline-block relative w-1/4\">\r\n                                        <select\r\n                                            className=\"block appearance-none w-full bg-gray-300 border border-gray-400 hover:border-gray-500 px-4 py-2 pr-8 rounded shadow leading-tight focus:outline-none focus:shadow-outline\"\r\n                                            onChange={(e) => {\r\n                                                getAttributes(e.target.value)\r\n                                            }}>\r\n                                            <option value=\"\">Select</option>\r\n                                            {\r\n                                                arrTagNumber.map((tag, index) => {\r\n                                                    return <option value={tag} key={tag + index}>{tag}</option>\r\n                                                })\r\n                                            }\r\n                                        </select>\r\n                                        <div className=\"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700\">\r\n                                            <svg className=\"fill-current h-4 w-4\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\"><path d=\"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z\" /></svg>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"inline-block relative w-1/4 ml-3\">\r\n                                        {\r\n                                            data !== undefined && Object.keys(data).length > 0 ?\r\n                                                <a target=\"_blank\" href={`https://${prefixUrl}.pim360.io/object/TAGGED_ITEM/${data.hdl}`}>\r\n                                                    <img width=\"15%\" src={`https://${prefixUrl}.acl360.io/img/pim360-logo.svg`} onError={(e) => {\r\n                                                        \r\n                                                        e.target.src = `https://${prefixUrl}.acl360.io/img/pim360_logo.png`\r\n                                                    }} />\r\n                                                </a>\r\n                                                : ''\r\n                                        }\r\n                                    </div>\r\n                                </div>\r\n\r\n                            }\r\n                            {data !== undefined && Object.keys(data).length > 0 &&\r\n                                <div>\r\n                                    {showAttr()}\r\n                                </div>\r\n\r\n                            }\r\n                        </div>\r\n                        :\r\n                        <div className=\"centerItem\">\r\n                            <img draggable={false} width={300} src={search} />\r\n                            <p className=\"text-center mt-3 text-purple-800\">Select the liveview to show the data here</p>\r\n                        </div>\r\n                    }\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default LiveView;","import React, { useEffect, useState, useRef } from 'react';\r\nimport NavBar from '../components/NavBar';\r\nimport GoogleMapReact from 'google-map-react';\r\nimport search from \"../assests/search.svg\";\r\nimport Api from '../api/api';\r\nimport map from \"../assests/map.svg\";\r\nimport Upload from \"../components/Upload\";\r\nimport mapboxgl from 'mapbox-gl';\r\n// mapboxgl.accessToken =\r\n//   'pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4M29iazA2Z2gycXA4N2pmbDZmangifQ.-g_vE53SD2WrJ6tFX7QHmA';\r\nmapboxgl.accessToken =\r\n  'pk.eyJ1IjoicmFuaml0aGRpbmFrYXJhbiIsImEiOiJja2h1bHd2azAwNmZvMnZvMm5jYXZubGt1In0.tG3PJN1RAiiFoDhCBFvADQ';\r\nconst AnyReactComponent = ({ text }) => <div><img alt=\"Marker\" src=\"https://img.icons8.com/fluent/48/000000/marker-storm.png\" />{text}</div>;\r\nconst axios = require('axios');\r\n\r\nfunction LiveToMap(props) {\r\n  const [arrLiveView, setarrLiveView] = useState([]);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [showData, setShowData] = useState(false);\r\n  const [selectedLiveViewHdl, setselectedLiveViewHdl] = useState(\"\");\r\n  const [selectedLiveViewName, setselectedLiveViewName] = useState(\"\");\r\n  const [showMapBox, setShowMapBox] = useState(false);\r\n  const [boxMapData, setBoxMapData] = useState({});\r\n  const [googleMapData, setGoogleMapData] = useState([]);\r\n  //map states\r\n  const mapContainerRef = useRef(null);\r\n  const [lng, setLng] = useState(5);\r\n  const [lat, setLat] = useState(34);\r\n  const [zoom, setZoom] = useState(5);\r\n  let map = null;\r\n  //local storage values\r\n  let token = localStorage.getItem(\"b_token\");\r\n  let prefixUrl = localStorage.getItem(\"prefixUrl\");\r\n  let baseUrl = `https://${prefixUrl}.pim360.io/api`;\r\n  let userName = localStorage.getItem(\"userName\");\r\n  let password = localStorage.getItem(\"password\");\r\n  // Initialize map when component mounts\r\n  useEffect(() => {\r\n    fetchLiveView();\r\n  }, []);\r\n\r\n  const show_mapBox = () => {\r\n    map = new mapboxgl.Map({\r\n      container: \"map-container\",\r\n      style: 'mapbox://styles/mapbox/streets-v11',\r\n      center: [lng, lat],\r\n      zoom: zoom\r\n    });\r\n    // Add navigation control (the +/- zoom buttons)\r\n    map.addControl(new mapboxgl.NavigationControl(), 'top-right');\r\n    map.on('load', function () {\r\n      // Add an image to use as a custom marker\r\n      map.loadImage(\r\n        'https://res.cloudinary.com/di9ckb63k/image/upload/v1606463408/ref_1_bzw94s.png',\r\n        function (error, image) {\r\n          if (error) throw error;\r\n          map.addImage('custom-marker', image);\r\n          // console.log('boxMapData --------', JSON.stringify(boxMapData))\r\n          // Add a GeoJSON source with 2 points\r\n          map.addSource('points', {\r\n            'type': 'geojson',\r\n            'data': boxMapData,\r\n            cluster: true,\r\n            clusterMaxZoom: 14, // Max zoom to cluster points on\r\n            clusterRadius: 50 // Radius of each cluster when clustering points (defaults to 50)\r\n          });\r\n\r\n          // Add a symbol layer\r\n          map.addLayer({\r\n            'id': 'points',\r\n            'type': 'symbol',\r\n            'source': 'points',\r\n            'layout': {\r\n              'icon-image': 'custom-marker',\r\n              // get the title name from the source's \"title\" property\r\n              'text-field': ['get', 'title'],\r\n              'text-font': [\r\n                'Open Sans Semibold',\r\n                'Arial Unicode MS Bold'\r\n              ],\r\n              'text-offset': [0, 1.25],\r\n              'text-anchor': 'top'\r\n            }\r\n          });\r\n\r\n          map.addLayer({\r\n            id: 'clusters',\r\n            type: 'circle',\r\n            source: 'points',\r\n            filter: ['has', 'point_count'],\r\n            paint: {\r\n              // Use step expressions (https://docs.mapbox.com/mapbox-gl-js/style-spec/#expressions-step)\r\n              // with three steps to implement three types of circles:\r\n              //   * Blue, 20px circles when point count is less than 100\r\n              //   * Yellow, 30px circles when point count is between 100 and 750\r\n              //   * Pink, 40px circles when point count is greater than or equal to 750\r\n              'circle-color': [\r\n                'step',\r\n                ['get', 'point_count'],\r\n                '#51bbd6',\r\n                100,\r\n                '#f1f075',\r\n                750,\r\n                '#f28cb1'\r\n              ],\r\n              'circle-radius': [\r\n                'step',\r\n                ['get', 'point_count'],\r\n                20,\r\n                100,\r\n                30,\r\n                750,\r\n                40\r\n              ]\r\n            }\r\n          });\r\n\r\n          map.addLayer({\r\n            id: 'cluster-count',\r\n            type: 'symbol',\r\n            source: 'points',\r\n            filter: ['has', 'point_count'],\r\n            layout: {\r\n              'text-field': '{point_count_abbreviated}',\r\n              'text-font': ['DIN Offc Pro Medium', 'Arial Unicode MS Bold'],\r\n              'text-size': 12\r\n            }\r\n          });\r\n\r\n          map.addLayer({\r\n            id: 'unclustered-point',\r\n            type: 'circle',\r\n            source: 'points',\r\n            filter: ['!', ['has', 'point_count']],\r\n            paint: {\r\n              'circle-color': '#11b4da',\r\n              'circle-radius': 4,\r\n              'circle-stroke-width': 1,\r\n              'circle-stroke-color': '#fff'\r\n            }\r\n          });\r\n\r\n          // inspect a cluster on click\r\n          map.on('click', 'clusters', function (e) {\r\n            var features = map.queryRenderedFeatures(e.point, {\r\n              layers: ['clusters']\r\n            });\r\n            var clusterId = features[0].properties.cluster_id;\r\n            map.getSource('points').getClusterExpansionZoom(\r\n              clusterId,\r\n              function (err, zoom) {\r\n                if (err) return;\r\n\r\n                map.easeTo({\r\n                  center: features[0].geometry.coordinates,\r\n                  zoom: zoom\r\n                });\r\n              }\r\n            );\r\n          });\r\n\r\n          // When a click event occurs on a feature in\r\n          // the unclustered-point layer, open a popup at\r\n          // the location of the feature, with\r\n          // description HTML from its properties.\r\n          map.on('click', 'unclustered-point', function (e) {\r\n            var coordinates = e.features[0].geometry.coordinates.slice();\r\n            var mag = e.features[0].properties.mag;\r\n            var tsunami;\r\n\r\n            if (e.features[0].properties.tsunami === 1) {\r\n              tsunami = 'yes';\r\n            } else {\r\n              tsunami = 'no';\r\n            }\r\n\r\n            // Ensure that if the map is zoomed out such that\r\n            // multiple copies of the feature are visible, the\r\n            // popup appears over the copy being pointed to.\r\n            while (Math.abs(e.lngLat.lng - coordinates[0]) > 180) {\r\n              coordinates[0] += e.lngLat.lng > coordinates[0] ? 360 : -360;\r\n            }\r\n\r\n            // new mapboxgl.Popup()\r\n            //   .setLngLat(coordinates)\r\n            //   .setHTML(\r\n            //     'magnitude: ' + mag + '<br>Was there a tsunami?: ' + tsunami\r\n            //   )\r\n            //   .addTo(map);\r\n          });\r\n\r\n          map.on('mouseenter', 'clusters', function () {\r\n            map.getCanvas().style.cursor = 'pointer';\r\n          });\r\n          map.on('mouseleave', 'clusters', function () {\r\n            map.getCanvas().style.cursor = '';\r\n          });\r\n\r\n          // When a click event occurs on a feature in the places layer, open a popup at the\r\n          // location of the feature, with description HTML from its properties.\r\n          map.on('click', 'points', function (e) {\r\n            var coordinates = e.features[0].geometry.coordinates.slice();\r\n            var description = e.features[0].properties.description;\r\n\r\n            // Ensure that if the map is zoomed out such that multiple\r\n            // copies of the feature are visible, the popup appears\r\n            // over the copy being pointed to.\r\n            while (Math.abs(e.lngLat.lng - coordinates[0]) > 180) {\r\n              coordinates[0] += e.lngLat.lng > coordinates[0] ? 360 : -360;\r\n            }\r\n\r\n            new mapboxgl.Popup()\r\n              .setLngLat(coordinates)\r\n              .setHTML(description)\r\n              .addTo(map);\r\n          });\r\n\r\n          // Change the cursor to a pointer when the mouse is over the places layer.\r\n          map.on('mouseenter', 'places', function () {\r\n            map.getCanvas().style.cursor = 'pointer';\r\n          });\r\n\r\n          // Change it back to a pointer when it leaves.\r\n          map.on('mouseleave', 'places', function () {\r\n            map.getCanvas().style.cursor = '';\r\n          });\r\n        }\r\n      );\r\n    });\r\n  };\r\n\r\n  const fetchLiveView = () => {\r\n    setIsLoading(true);\r\n    let url = `${baseUrl}/customviews?type=LIVE_VIEW`;\r\n    fetch(url, {\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        Authorization: token,\r\n      }\r\n    }).then(response => {\r\n      var responseValue = response.json();\r\n      return responseValue;\r\n    }).then(responseData => {\r\n      if (responseData !== undefined && responseData !== null) {\r\n        setarrLiveView(responseData);\r\n      }\r\n      setIsLoading(false);\r\n    }).catch(error => {\r\n      console.log(\"error -------->\" + error);\r\n      setIsLoading(false);\r\n    });\r\n  };\r\n\r\n  const doAuth = (selectedLiveView, selectedHdl) => {\r\n    setIsLoading(true);\r\n    setselectedLiveViewHdl(selectedHdl);\r\n    setselectedLiveViewName(selectedLiveView);\r\n    let url = `https://pim4.azurewebsites.net/api/pim360?function_name=auth&username=${userName}&password=${password}&purl=${prefixUrl}`;\r\n    var myHeaders = new Headers();\r\n    var requestOptions = {\r\n      method: 'GET',\r\n      headers: myHeaders,\r\n      redirect: 'follow'\r\n    };\r\n    fetch(url, requestOptions).then(response => {\r\n      var responseValue = response.json();\r\n      return responseValue;\r\n    }).then(responseData => {\r\n      if (responseData !== undefined && responseData !== null) {\r\n        console.log(\"doAuth responseData-------->\", JSON.stringify(responseData));\r\n        fetchSelectedLiveViewData(selectedLiveView, selectedHdl);\r\n      }\r\n    }).catch(error => {\r\n      console.log(\"doAuth error-------->\", JSON.stringify(error));\r\n      setIsLoading(false);\r\n    });\r\n  };\r\n\r\n  const formData = (response) => {\r\n    let data = { ...response };\r\n    let gMapData = [];\r\n    data.features.map((item, index) => {\r\n      //form mapBoxData\r\n      let keys = Object.keys(item.properties);\r\n      let tableData = \"\";\r\n      tableData += \"<p>\";\r\n      keys.map((k) => {\r\n        tableData += k;\r\n        tableData += \" : \";\r\n        tableData += item.properties[k];\r\n        tableData += \" <br> \";\r\n      });\r\n      tableData += \"</p>\";\r\n\r\n      //form gMapData\r\n      gMapData.push({\r\n        \"lat\": Number(item.geometry.coordinates[1]),\r\n        \"lng\": Number(item.geometry.coordinates[0]),\r\n        \"ref_or_fix\": \"fix\",\r\n        \"desc\": tableData\r\n      });\r\n      console.log('table data  ------>', tableData);\r\n      item.properties.description = tableData;\r\n      // item.properties.title = index + 1;\r\n      let lat = item.geometry.coordinates[1];\r\n      let lng = item.geometry.coordinates[0];\r\n      item.geometry.coordinates[0] = lng;\r\n      item.geometry.coordinates[1] = lat;\r\n    });\r\n\r\n    setLat(data.features[0].geometry.coordinates[1]);\r\n    setLng(data.features[0].geometry.coordinates[0]);\r\n    setBoxMapData(data);\r\n    setGoogleMapData(gMapData);\r\n    setShowData(true);\r\n    setIsLoading(false);\r\n  }\r\n\r\n  const fetchSelectedLiveViewData = (selectedLiveView, selectedHdl) => {\r\n    let url = `https://pim4.azurewebsites.net/api/pim360?function_name=liveview_to_geojson&live_view_name=${selectedLiveView}`;\r\n    var myHeaders = new Headers();\r\n    var requestOptions = {\r\n      method: 'GET',\r\n      headers: myHeaders,\r\n      redirect: 'follow'\r\n    };\r\n    fetch(url, requestOptions)\r\n      .then(response => response.json())\r\n      .then(responseData => {\r\n        // console.log(\"result response-------\", JSON.stringify(responseData));\r\n        if (responseData != null) {\r\n          formData(responseData);\r\n        }\r\n      })\r\n      .catch(error => {\r\n        setIsLoading(false);\r\n        console.log('fetchSelectedLiveViewData error --------->', error)\r\n        alert(error);\r\n      });\r\n  };\r\n\r\n  const handleChange = e => {\r\n    const fileReader = new FileReader();\r\n    fileReader.readAsText(e.target.files[0], \"UTF-8\");\r\n    fileReader.onload = e => {\r\n      let value = JSON.parse(e.target.result);\r\n      formData(value);\r\n    };\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (showData) {\r\n      if (showMapBox) {\r\n        show_mapBox();\r\n      }\r\n      else {\r\n        //initialize map\r\n        window.InitializeMap(googleMapData);\r\n      }\r\n    }\r\n  }, [showMapBox, showData]);\r\n\r\n  return (\r\n    <div>\r\n      <NavBar showLogoutButton={true} showSearch={false}></NavBar>\r\n      {isLoading ?\r\n        <div className=\"popUpContainer\">\r\n          <div className=\"loader\"></div>\r\n        </div>\r\n        : \"\"\r\n      }\r\n      <div className=\"m-4\">\r\n        <label className=\"block text-gray-700 text-sm font-bold mb-2\" htmlFor=\"username\">\r\n          LiveView\r\n            </label>\r\n        <div className=\"inline-block relative w-1/1\">\r\n          <select\r\n            class=\"block appearance-none w-full bg-gray-300 border border-gray-400 hover:border-gray-500 px-4 py-2 pr-8 rounded shadow leading-tight focus:outline-none focus:shadow-outline\"\r\n            onChange={(e) => {\r\n              var textVal = e.target.options[e.target.selectedIndex].text;\r\n              doAuth(textVal, e.target.value);\r\n            }}>\r\n            <option value=\"\">Select</option>\r\n            {arrLiveView != null && arrLiveView.length > 0 ? arrLiveView.map((liveView, index) => {\r\n              return <option name={liveView.Name} value={liveView.Hdl}>{liveView.Name}</option>\r\n            }) : \"\"\r\n            }\r\n          </select>\r\n          <div class=\"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700\">\r\n            <svg class=\"fill-current h-4 w-4\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\"><path d=\"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z\" /></svg>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"inline-block relative mx-3\">\r\n          {\r\n            selectedLiveViewHdl !== undefined && selectedLiveViewHdl != \"\" ?\r\n              // https://d-lab-2019.pim360.io/liveview#view=vkbseBkRSF-CfXDXdy6D7Q\r\n              <a target=\"_blank\" href={`https://${prefixUrl}.pim360.io/liveview#view=${selectedLiveViewHdl}`}>\r\n                <img width=\"15%\" src={`https://${prefixUrl}.acl360.io/img/pim360-logo.svg`} onError={(e) => {\r\n\r\n                  e.target.src = `https://${prefixUrl}.acl360.io/img/pim360_logo.png`\r\n                  // e.src = \"hello.png\"\r\n                }} />\r\n              </a>\r\n              : ''\r\n          }\r\n        </div>\r\n        <div className=\"inline-block relative w-1/4 ml-3\">\r\n          <input type=\"file\" onChange={handleChange} />\r\n        </div>\r\n      </div>\r\n      <div id=\"liveView-container\">\r\n        <div className=\"w-full\">\r\n          {showData ?\r\n            <div className=\"relative\">\r\n              <div className=\"m-4\">\r\n                <label className=\"inline-block text-gray-700 text-sm font-bold \" htmlFor=\"username\">\r\n                  Selected LiveView:\r\n                </label>\r\n                <p className=\"inline-block ml-4\">{selectedLiveViewName}</p>\r\n              </div>\r\n              <div className=\"m-4\">\r\n                <button className={showMapBox ? \"btn\" : \"btn-selected\"} onClick={() => setShowMapBox(false)}>Google Map</button>\r\n                <button className={showMapBox ? \"btn-selected\" : \"btn\"} onClick={() => { setShowMapBox(true) }}>Mapbox</button>\r\n              </div>\r\n              {showMapBox ?\r\n                <div id=\"map-container\" className='map-container m-4 map-height width' ref={mapContainerRef} />\r\n                : \"\"\r\n              }\r\n              {!showMapBox ? <div id=\"dvMap\" className={showMapBox ? \"opacity-25\" : \"opacity-100 min-h-full width m-4 map-height\"}></div> : \"\"}\r\n\r\n\r\n              {/* {!showMapBox && <div>\r\n                {googleMapData.length > 0 ?\r\n                    <div className='m-4 w-full h-full'>\r\n                          Google map\r\n                    </div> \r\n                    : \r\n                    <div className=\"w-full h-full shadow-lg relative\">\r\n                        <div className=\"centerItem\">\r\n                            <img className=\"attr_chat mx-auto\" draggable={false} src={map} />\r\n                            <p className=\"text-center mt-3 text-purple-800\">Invalid map data</p>\r\n                        </div>\r\n                    </div>\r\n                }\r\n              </div>\r\n              } */}\r\n            </div>\r\n            :\r\n            <div className=\"centerItem\">\r\n              <img draggable={false} width={300} src={search} />\r\n              <p className=\"text-center mt-3 text-purple-800\">Select the liveview to show the data here</p>\r\n            </div>\r\n          }\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default LiveToMap;","import React, { useEffect, useState } from 'react';\r\nimport { Map } from '@esri/react-arcgis';\r\n\r\nfunction EsriMapPOC() {    \r\n    return (\r\n        <div style={{ width: '100vw', height: '100vh' }}>\r\n            {/* <Map /> */}\r\n            <iframe style={{ width: '100vw', height: '100vh' }} src=\"https://dev-env.space/esri.php?data=\"></iframe>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default EsriMapPOC;","import React, { useEffect, useState, useRef } from 'react';\r\nimport NavBar from '../components/NavBar';\r\nimport GoogleMapReact from 'google-map-react';\r\nimport search from \"../assests/search.svg\";\r\nimport Api from '../api/api';\r\nimport map from \"../assests/map.svg\";\r\nimport Upload from \"../components/Upload\";\r\nimport mapboxgl from 'mapbox-gl';\r\nimport EsriMapPOC from \"./ESRIMapPOC\";\r\n// mapboxgl.accessToken =\r\n//   'pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4M29iazA2Z2gycXA4N2pmbDZmangifQ.-g_vE53SD2WrJ6tFX7QHmA';\r\nmapboxgl.accessToken =\r\n    'pk.eyJ1IjoicmFuaml0aGRpbmFrYXJhbiIsImEiOiJja2h1bHd2azAwNmZvMnZvMm5jYXZubGt1In0.tG3PJN1RAiiFoDhCBFvADQ';\r\nconst AnyReactComponent = ({ text }) => <div><img alt=\"Marker\" src=\"https://img.icons8.com/fluent/48/000000/marker-storm.png\" />{text}</div>;\r\nconst axios = require('axios');\r\n\r\nfunction LiveToShape(props) {\r\n    const [arrLiveView, setarrLiveView] = useState([]);\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const [showData, setShowData] = useState(false);\r\n    const [selectedLiveViewHdl, setselectedLiveViewHdl] = useState(\"\");\r\n    const [selectedLiveViewName, setselectedLiveViewName] = useState(\"\");\r\n    const [showMapBox, setShowMapBox] = useState(true);\r\n    const [boxMapData, setBoxMapData] = useState({});\r\n    const [googleMapData, setGoogleMapData] = useState([]);\r\n    const [selectedType, setSelectedType] = useState(\"\");\r\n    const types = [\r\n        { value: \"linestring\", name: \"Linestring\" },\r\n        { value: \"polygon\", name: \"Polygon\" },\r\n    ];\r\n    //map states\r\n    const mapContainerRef = useRef(null);\r\n    const [lng, setLng] = useState(5);\r\n    const [lat, setLat] = useState(34);\r\n    const [zoom, setZoom] = useState(5);\r\n    const [randomNum, setRandomNum] = useState(Math.random() * Math.floor(100));\r\n    const [esriData, setEsriData] = useState(null);\r\n    const [ esriCenterData,setEsriCenterData] = useState(\"\");\r\n    let map = null;\r\n    //local storage values\r\n    let token = localStorage.getItem(\"b_token\");\r\n    let prefixUrl = localStorage.getItem(\"prefixUrl\");\r\n    let baseUrl = `https://${prefixUrl}.pim360.io/api`;\r\n    let userName = localStorage.getItem(\"userName\");\r\n    let password = localStorage.getItem(\"password\");\r\n    // Initialize map when component mounts\r\n    useEffect(() => {\r\n        fetchLiveView();\r\n    }, []);\r\n\r\n    const show_linear_mapBox = () => {\r\n        console.log('inside show_linear_mapBox -------->', '')\r\n        map = new mapboxgl.Map({\r\n            container: \"map-container\",\r\n            style: 'mapbox://styles/mapbox/streets-v11',\r\n            center: [lng, lat],\r\n            zoom: zoom\r\n        });\r\n        // Add navigation control (the +/- zoom buttons)\r\n        map.addControl(new mapboxgl.NavigationControl(), 'top-right');\r\n        map.on('load', function () {\r\n            // Add an image to use as a custom marker\r\n            map.loadImage(\r\n                'https://res.cloudinary.com/di9ckb63k/image/upload/v1606463408/ref_1_bzw94s.png',\r\n                function (error, image) {\r\n                    if (error) throw error;\r\n                    map.addImage('custom-marker', image);\r\n                    map.addSource('route', {\r\n                        'type': 'geojson',\r\n                        'data': {\r\n                            'type': 'Feature',\r\n                            'properties': {},\r\n                            'geometry': {\r\n                                'type': 'LineString',\r\n                                'coordinates': boxMapData\r\n                            }\r\n                        }\r\n                    });\r\n\r\n                    map.addLayer({\r\n                        'id': 'route',\r\n                        'type': 'line',\r\n                        'source': 'route',\r\n                        'layout': {\r\n                            'line-join': 'round',\r\n                            'line-cap': 'round'\r\n                        },\r\n                        'paint': {\r\n                            'line-color': '#44337a',\r\n                            'line-width': 8\r\n                        }\r\n                    });\r\n                }\r\n            );\r\n        });\r\n    };\r\n\r\n    const show_polygon_mapBox = () => {\r\n        console.log('inside show_polygon_mapBox -------->', '')\r\n        map = new mapboxgl.Map({\r\n            container: \"map-container\",\r\n            style: 'mapbox://styles/mapbox/streets-v11',\r\n            center: [lng, lat],\r\n            zoom: zoom\r\n        });\r\n        // Add navigation control (the +/- zoom buttons)\r\n        map.addControl(new mapboxgl.NavigationControl(), 'top-right');\r\n        map.on('load', function () {\r\n            // Add an image to use as a custom marker\r\n            map.loadImage(\r\n                'https://res.cloudinary.com/di9ckb63k/image/upload/v1606463408/ref_1_bzw94s.png',\r\n                function (error, image) {\r\n                    if (error) throw error;\r\n                    map.addImage('custom-marker', image);\r\n                    map.addSource('maine', {\r\n                        'type': 'geojson',\r\n                        'data': {\r\n                            'type': 'Feature',\r\n                            'geometry': {\r\n                                'type': 'Polygon',\r\n                                'coordinates': [boxMapData]\r\n                            }\r\n                        }\r\n                    });\r\n                    map.addLayer({\r\n                        'id': 'maine',\r\n                        'type': 'fill',\r\n                        'source': 'maine',\r\n                        'layout': {},\r\n                        'paint': {\r\n                            'fill-color': '#44337a',\r\n                            'fill-opacity': 0.8\r\n                        }\r\n                    });\r\n                }\r\n            );\r\n        });\r\n    };\r\n\r\n    const fetchLiveView = () => {\r\n        setIsLoading(true);\r\n        let url = `${baseUrl}/customviews?type=LIVE_VIEW`;\r\n        fetch(url, {\r\n            headers: {\r\n                Accept: \"application/json\",\r\n                Authorization: token,\r\n            }\r\n        }).then(response => {\r\n            var responseValue = response.json();\r\n            return responseValue;\r\n        }).then(responseData => {\r\n            if (responseData !== undefined && responseData !== null) {\r\n                setarrLiveView(responseData);\r\n            }\r\n            setIsLoading(false);\r\n        }).catch(error => {\r\n            console.log(\"error -------->\" + error);\r\n            setIsLoading(false);\r\n        });\r\n    };\r\n\r\n    const doAuth = (selectedLiveView, selectedHdl) => {\r\n        console.log('inside do auth ------', '')\r\n        setShowMapBox(false);\r\n        setShowData(false)\r\n        setBoxMapData([]);\r\n        setIsLoading(true);\r\n        setselectedLiveViewHdl(selectedHdl);\r\n        setselectedLiveViewName(selectedLiveView);\r\n        let url = `https://pim4.azurewebsites.net/api/pim360?function_name=auth&username=${userName}&password=${password}&purl=${prefixUrl}`;\r\n        var myHeaders = new Headers();\r\n        var requestOptions = {\r\n            method: 'GET',\r\n            headers: myHeaders,\r\n            redirect: 'follow'\r\n        };\r\n        fetch(url, requestOptions).then(response => {\r\n            var responseValue = response.json();\r\n            return responseValue;\r\n        }).then(responseData => {\r\n            if (responseData !== undefined && responseData !== null) {\r\n                console.log(\"doAuth responseData-------->\");\r\n                fetchSelectedLiveViewData(selectedLiveView, selectedHdl);\r\n            }\r\n        }).catch(error => {\r\n            console.log(\"doAuth error-------->\", JSON.stringify(error));\r\n            setIsLoading(false);\r\n        });\r\n    };\r\n\r\n    const formData = (response) => {\r\n        setShowMapBox(true)\r\n        let data = { ...response };\r\n        let gMapData = [];\r\n        let mapBoxData = [];\r\n        let esriMapBoxData = [];\r\n        data.features.map((item, index) => {\r\n            let obj = {\r\n                \"type\": \"Feature\",\r\n                \"properties\": {\r\n                  \"mag\": 500\r\n                },\r\n                \"geometry\": {\r\n                  \"type\": \"Point\",\r\n                  \"coordinates\": [parseFloat(item.properties[\"Geometry.Start.Longitude\"]), parseFloat(item.properties[\"Geometry.Start.Latitude\"])]\r\n                }\r\n              }\r\n            let keys = Object.keys(item.properties);\r\n            keys.map((k)=>{\r\n                obj.properties[k] = item.properties[k];\r\n            });\r\n            if (index == 0) {\r\n                mapBoxData.push([item.properties[\"Geometry.Start.Longitude\"], item.properties[\"Geometry.Start.Latitude\"]]);\r\n                esriMapBoxData.push(obj);\r\n            }\r\n            //form mapboxdata\r\n            mapBoxData.push([item.properties[\"Geometry.End.Longitude\"], item.properties[\"Geometry.End.Latitude\"]]);\r\n            // esriMapBoxData.push([parseFloat(item.properties[\"Geometry.End.Longitude\"]), parseFloat(item.properties[\"Geometry.End.Latitude\"])]);\r\n            esriMapBoxData.push(obj);\r\n\r\n            let lat = item.geometry.coordinates[1];\r\n            let lng = item.geometry.coordinates[0];\r\n            item.geometry.coordinates[0] = lng;\r\n            item.geometry.coordinates[1] = lat;\r\n        });\r\n        setLat(data.features[0].properties[\"Geometry.Start.Latitude\"]);\r\n        setLng(data.features[0].properties[\"Geometry.Start.Longitude\"]);\r\n        setBoxMapData(mapBoxData);\r\n        setShowData(true);\r\n        setIsLoading(false);\r\n        // var arr_20 = esriMapBoxData.slice(0, 20);\r\n        //converting to base64\r\n        // setEsriData(window.btoa(JSON.stringify(arr_20)));\r\n        setEsriData(window.btoa(JSON.stringify(esriMapBoxData)));\r\n        setEsriCenterData(window.btoa(JSON.stringify(esriMapBoxData[0])));\r\n    }\r\n\r\n    const updateEsriMapData = () => {\r\n        setIsLoading(true)\r\n        let data = {\r\n            \"data\": esriData\r\n        };\r\n        let url = `https://dev-env.space/post_req.php`;\r\n        fetch(url, {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n            },\r\n            body: JSON.stringify(data),\r\n        }).then(response => response.json())\r\n            .then(data => {\r\n                setIsLoading(false)\r\n                setShowMapBox(false);\r\n            })\r\n            .catch((error) => {\r\n                // setShowMapBox(false);\r\n                console.error('updateEsriMapData error: ------->', error);\r\n                setIsLoading(false);\r\n            });\r\n    };\r\n\r\n    const fetchSelectedLiveViewData = (selectedLiveView, selectedHdl) => {\r\n        let url = `https://pim4.azurewebsites.net/api/pim360?function_name=liveview_to_geojson&live_view_name=${selectedLiveView}`;\r\n        var myHeaders = new Headers();\r\n        var requestOptions = {\r\n            method: 'GET',\r\n            headers: myHeaders,\r\n            redirect: 'follow'\r\n        };\r\n        fetch(url, requestOptions)\r\n            .then(response => response.json())\r\n            .then(responseData => {\r\n                if (responseData != null) {\r\n                    formData(responseData);\r\n                }\r\n            })\r\n            .catch(error => {\r\n                setIsLoading(false);\r\n                console.log('fetchSelectedLiveViewData error --------->', error)\r\n                alert(error);\r\n            });\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (showData) {\r\n            if (showMapBox) {\r\n                if (selectedType == \"linestring\") {\r\n                    show_linear_mapBox()\r\n                }\r\n                else if (selectedType == \"polygon\") {\r\n                    show_polygon_mapBox()\r\n                }\r\n            }\r\n            else {\r\n                //initialize map\r\n                // window.InitializeMap(googleMapData);\r\n            }\r\n        }\r\n    }, [showMapBox, showData, boxMapData]);\r\n\r\n    function bufferToBase64(buf) {\r\n        var binstr = Array.prototype.map.call(buf, function (ch) {\r\n            return String.fromCharCode(ch);\r\n        }).join('');\r\n        return btoa(binstr);\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <NavBar showLogoutButton={true} showSearch={false}></NavBar>\r\n            {isLoading ?\r\n                <div className=\"popUpContainer\">\r\n                    <div className=\"loader\"></div>\r\n                </div>\r\n                : \"\"\r\n            }\r\n            <div className=\"m-4 inline-block\">\r\n                <label className=\"block text-gray-700 text-sm font-bold mb-2\" htmlFor=\"username\">\r\n                    Choose type\r\n                </label>\r\n                <div className=\"inline-block relative w-1/1\">\r\n                    <select\r\n                        class=\"block appearance-none w-full bg-gray-300 border border-gray-400 hover:border-gray-500 px-4 py-2 pr-8 rounded shadow leading-tight focus:outline-none focus:shadow-outline\"\r\n                        onChange={(e) => {\r\n                            setSelectedType(e.target.value);\r\n                            if (selectedLiveViewName != null && selectedLiveViewName != \"\") {\r\n                                console.log('inside 1 ------->', '')\r\n                                // map = null;\r\n                                // if (e.target.value == \"linestring\") {\r\n                                //     console.log('inside 1 linestring ------->', '')\r\n                                //     show_linear_mapBox()\r\n                                // }\r\n                                // else if (e.target.value == \"polygon\") {\r\n                                //     console.log('inside 1 polygon ------->', '')\r\n                                //     show_polygon_mapBox()\r\n                                // }\r\n                                map = null;\r\n                                doAuth(selectedLiveViewName, selectedLiveViewHdl)\r\n                            }\r\n                        }}>\r\n                        <option value=\"\">Select</option>\r\n                        {types.map((type) => {\r\n                            return <option value={type.value}>{type.name}</option>\r\n                        })}\r\n                    </select>\r\n                    <div class=\"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700\">\r\n                        <svg class=\"fill-current h-4 w-4\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\"><path d=\"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z\" /></svg>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div className=\"m-4 inline-block\">\r\n                <label className=\"block text-gray-700 text-sm font-bold mb-2\" htmlFor=\"username\">\r\n                    LiveView\r\n                </label>\r\n                <div className=\"inline-block relative w-1/1\">\r\n                    <select\r\n                        class=\"block appearance-none w-full bg-gray-300 border border-gray-400 hover:border-gray-500 px-4 py-2 pr-8 rounded shadow leading-tight focus:outline-none focus:shadow-outline\"\r\n                        onChange={(e) => {\r\n                            var textVal = e.target.options[e.target.selectedIndex].text;\r\n                            setShowMapBox(false)\r\n                            doAuth(textVal, e.target.value);\r\n                        }}>\r\n                        <option value=\"\">Select</option>\r\n                        {arrLiveView != null && arrLiveView.length > 0 ? arrLiveView.map((liveView, index) => {\r\n                            return <option name={liveView.Name} value={liveView.Hdl}>{liveView.Name}</option>\r\n                        }) : \"\"\r\n                        }\r\n                    </select>\r\n                    <div class=\"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700\">\r\n                        <svg class=\"fill-current h-4 w-4\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\"><path d=\"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z\" /></svg>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"inline-block relative mx-3\">\r\n                    {\r\n                        selectedLiveViewHdl !== undefined && selectedLiveViewHdl != \"\" ?\r\n                            // https://d-lab-2019.pim360.io/liveview#view=vkbseBkRSF-CfXDXdy6D7Q\r\n                            <a target=\"_blank\" href={`https://${prefixUrl}.pim360.io/liveview#view=${selectedLiveViewHdl}`}>\r\n                                <img width=\"15%\" src={`https://${prefixUrl}.acl360.io/img/pim360-logo.svg`} onError={(e) => {\r\n\r\n                                    e.target.src = `https://${prefixUrl}.acl360.io/img/pim360_logo.png`\r\n                                    // e.src = \"hello.png\"\r\n                                }} />\r\n                            </a>\r\n                            : ''\r\n                    }\r\n                </div>\r\n                {/* <div className=\"inline-block relative w-1/4 ml-3\">\r\n          <input type=\"file\" onChange={handleChange} />\r\n        </div> */}\r\n            </div>\r\n            <div id=\"liveView-container\">\r\n                <div className=\"w-full\">\r\n                    {showData ?\r\n                        <div className=\"relative\">\r\n                            <div className=\"m-4\">\r\n                                <label className=\"inline-block text-gray-700 text-sm font-bold \" htmlFor=\"username\">\r\n                                    Selected LiveView:\r\n                </label>\r\n                                <p className=\"inline-block ml-4\">{selectedLiveViewName}</p>\r\n                            </div>\r\n                            <div className=\"m-4\">\r\n                                <button className={showMapBox ? \"btn-selected\" : \"btn\"} onClick={() => { setShowMapBox(true) }}>Mapbox</button>\r\n                                <button className={showMapBox ? \"btn\" : \"btn-selected\"} onClick={() => updateEsriMapData()}>ESRI</button>\r\n                            </div>\r\n                            {showMapBox ?\r\n                                <div id=\"map-container\" className='map-container m-4 map-height width' ref={mapContainerRef} />\r\n                                : \"\"\r\n                            }\r\n                            {/* {!showMapBox ? <div id=\"dvMap\" className={showMapBox ? \"opacity-25\" : \"opacity-100 min-h-full width m-4 map-height\"}></div> : \"\"} */}\r\n                            {!showMapBox ? <EsriMapPOC  data={esriData != null ? esriData : \"\"} center={esriCenterData}/> : \"\"}\r\n\r\n                            {/* {!showMapBox && <div>\r\n                {googleMapData.length > 0 ?\r\n                    <div className='m-4 w-full h-full'>\r\n                          Google map\r\n                    </div> \r\n                    : \r\n                    <div className=\"w-full h-full shadow-lg relative\">\r\n                        <div className=\"centerItem\">\r\n                            <img className=\"attr_chat mx-auto\" draggable={false} src={map} />\r\n                            <p className=\"text-center mt-3 text-purple-800\">Invalid map data</p>\r\n                        </div>\r\n                    </div>\r\n                }\r\n              </div>\r\n              } */}\r\n                        </div>\r\n                        :\r\n                        <div className=\"centerItem\">\r\n                            <img draggable={false} width={300} src={search} />\r\n                            <p className=\"text-center mt-3 text-purple-800\">Select the liveview to show the data here</p>\r\n                        </div>\r\n                    }\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default LiveToShape;","import React, { useEffect, useState, useRef } from 'react';\r\nimport NavBar from '../components/NavBar';\r\nimport search from \"../assests/search.svg\";\r\nimport noDataAttribute from \"../assests/noDataAttribute.svg\";\r\nimport Api from '../api/api';\r\nimport mapboxgl from 'mapbox-gl';\r\nimport EsriMapPOC from \"./ESRIMapPOC\";\r\nimport { Multiselect } from 'multiselect-react-dropdown';\r\n\r\nmapboxgl.accessToken =\r\n    'pk.eyJ1IjoicmFuaml0aGRpbmFrYXJhbiIsImEiOiJja2h1bHd2azAwNmZvMnZvMm5jYXZubGt1In0.tG3PJN1RAiiFoDhCBFvADQ';\r\nconst AnyReactComponent = ({ text }) => <div><img alt=\"Marker\" src=\"https://img.icons8.com/fluent/48/000000/marker-storm.png\" />{text}</div>;\r\nconst axios = require('axios');\r\nwindow.mapData = [];\r\nwindow.esriJSONData = [];\r\nfunction LiveToShape_v2(props) {\r\n    const [arrLiveView, setarrLiveView] = useState([]);\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const [showData, setShowData] = useState(false);\r\n    const [selectedLiveViewHdl, setselectedLiveViewHdl] = useState(\"\");\r\n    const [selectedLiveViewName, setselectedLiveViewName] = useState(\"\");\r\n    const [showMapBox, setShowMapBox] = useState(true);\r\n    const [mapData, setMapData] = useState([]);\r\n    //map states\r\n    const mapContainerRef = useRef(null);\r\n    const [zoom, setZoom] = useState(5);\r\n    const [esriJSONData, setEsriJSONData] = useState([]);\r\n    const [arrTagNumber, setArrTagNumber] = useState([]);\r\n    const [attributeData, setAttributeData] = useState(null);\r\n    const [notFound, setNotFound] = useState(false);\r\n    const [arrSelectedTagNumber, SetArrSelectedTagNumber] = useState([]);\r\n    const [arrSelectedLiveView_2, SetArrSelectedLiveView_2] = useState([]);\r\n    const [lat, setLat] = useState(0);\r\n    const [lng, setLng] = useState(0);\r\n    const [isLiveView2, setIsLiveView2] = useState(false);\r\n    const [isDualCall, setisDualCall] = useState(false);\r\n    const [isFirstDataFormed, setIsFirstDataFormed] = useState(false);\r\n    const [isSecondDataFormed, setIsSecondDataFormed] = useState(false);\r\n    let map = null;\r\n    //local storage values\r\n    let token = localStorage.getItem(\"b_token\");\r\n    let prefixUrl = localStorage.getItem(\"prefixUrl\");\r\n    let baseUrl = `https://${prefixUrl}.pim360.io/api`;\r\n    let userName = localStorage.getItem(\"userName\");\r\n    let password = localStorage.getItem(\"password\");\r\n    let arrData = [];\r\n    let arrTagResponseData = [];\r\n    let multiSelectStyle = {\r\n        chips: {\r\n            background: \"#44337a\",\r\n            color: \"white\"\r\n        },\r\n        searchBox: {\r\n            border: \"none\",\r\n            \"border-bottom\": \"1px solid blue\",\r\n            \"border-radius\": \"0px\",\r\n\r\n        },\r\n        multiselectContainer: {\r\n            color: \"#44337a\",\r\n        }\r\n    }\r\n    // Initialize map when component mounts\r\n    useEffect(() => {\r\n        fetchLiveView();\r\n    }, []);\r\n\r\n    const show_data = () => {\r\n        console.log(\"inside show_data------------>\")\r\n        let centerPoint = [0, 0];\r\n        if (isLiveView2) {\r\n            if (mapData.length == 0) {\r\n                centerPoint = [lng, lat];\r\n            }\r\n            else {\r\n                if (mapData[0].geometry.coordinates[0].length <= 3) {\r\n                    centerPoint = mapData[0].geometry.coordinates[0];\r\n                }\r\n                else {\r\n                    centerPoint = mapData[0].geometry.coordinates[0][0];\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            if (mapData[0].geometry.coordinates[0].length <= 3) {\r\n                centerPoint = mapData[0].geometry.coordinates[0];\r\n            }\r\n            else {\r\n                centerPoint = mapData[0].geometry.coordinates[0][0];\r\n            }\r\n        }\r\n        var geojson = {\r\n            'type': 'FeatureCollection',\r\n            'features': mapData\r\n        };\r\n        map = null;\r\n        map = new mapboxgl.Map({\r\n            container: \"map-container\",\r\n            style: 'mapbox://styles/mapbox/streets-v11',\r\n            center: centerPoint,\r\n            zoom: zoom\r\n        });\r\n        // Add navigation control (the +/- zoom buttons)\r\n        map.addControl(new mapboxgl.NavigationControl(), 'top-right');\r\n        map.on('load', function () {\r\n            // Add an image to use as a custom marker\r\n            map.loadImage(\r\n                'https://res.cloudinary.com/di9ckb63k/image/upload/v1606463408/ref_1_bzw94s.png',\r\n                function (error, image) {\r\n                    if (error) throw error;\r\n                    map.addImage('custom-marker', image);\r\n                    map.addSource('route', {\r\n                        'type': 'geojson',\r\n                        'data': geojson\r\n                    });\r\n                    if (isLiveView2) {\r\n                        // Add a symbol layer\r\n                        map.addLayer({\r\n                            'id': 'points',\r\n                            'type': 'symbol',\r\n                            'source': 'route',\r\n                            'layout': {\r\n                                'icon-image': 'custom-marker',\r\n                                // get the title name from the source's \"title\" property\r\n                                'text-field': ['get', 'title'],\r\n                                'text-font': [\r\n                                    'Open Sans Semibold',\r\n                                    'Arial Unicode MS Bold'\r\n                                ],\r\n                                'text-offset': [0, 1.25],\r\n                                'text-anchor': 'top'\r\n                            }\r\n                        });\r\n\r\n                        map.addLayer({\r\n                            id: 'clusters',\r\n                            type: 'circle',\r\n                            source: 'route',\r\n                            filter: ['has', 'point_count'],\r\n                            paint: {\r\n                                // Use step expressions (https://docs.mapbox.com/mapbox-gl-js/style-spec/#expressions-step)\r\n                                // with three steps to implement three types of circles:\r\n                                //   * Blue, 20px circles when point count is less than 100\r\n                                //   * Yellow, 30px circles when point count is between 100 and 750\r\n                                //   * Pink, 40px circles when point count is greater than or equal to 750\r\n                                'circle-color': [\r\n                                    'step',\r\n                                    ['get', 'point_count'],\r\n                                    '#51bbd6',\r\n                                    100,\r\n                                    '#f1f075',\r\n                                    750,\r\n                                    '#f28cb1'\r\n                                ],\r\n                                'circle-radius': [\r\n                                    'step',\r\n                                    ['get', 'point_count'],\r\n                                    20,\r\n                                    100,\r\n                                    30,\r\n                                    750,\r\n                                    40\r\n                                ]\r\n                            }\r\n                        });\r\n\r\n                        // map.addLayer({\r\n                        //     id: 'cluster-count',\r\n                        //     type: 'symbol',\r\n                        //     source: 'route',\r\n                        //     filter: ['has', 'point_count'],\r\n                        //     layout: {\r\n                        //         'text-field': '{point_count_abbreviated}',\r\n                        //         'text-font': ['DIN Offc Pro Medium', 'Arial Unicode MS Bold'],\r\n                        //         'text-size': 12\r\n                        //     }\r\n                        // });\r\n\r\n                        // map.addLayer({\r\n                        //     id: 'unclustered-point',\r\n                        //     type: 'circle',\r\n                        //     source: 'route',\r\n                        //     filter: ['!', ['has', 'point_count']],\r\n                        //     paint: {\r\n                        //         'circle-color': '#11b4da',\r\n                        //         'circle-radius': 4,\r\n                        //         'circle-stroke-width': 1,\r\n                        //         'circle-stroke-color': '#fff'\r\n                        //     }\r\n                        // });\r\n                        map.on('click', 'points', function (e) {\r\n                            var coordinates = e.features[0].geometry.coordinates.slice();\r\n                            var description = e.features[0].properties.description;\r\n                            let lngLat_coordinates = coordinates;\r\n                            if (typeof coordinates[0] != \"object\") {\r\n                                lngLat_coordinates = coordinates;\r\n                            }\r\n                            else {\r\n                                if (typeof coordinates[0][0] != \"object\") {\r\n                                    lngLat_coordinates = coordinates[0];\r\n                                }\r\n                            }\r\n                            // Ensure that if the map is zoomed out such that\r\n                            // multiple copies of the feature are visible, the\r\n                            // popup appears over the copy being pointed to.\r\n                            while (Math.abs(e.lngLat.lng - lngLat_coordinates[0]) > 180) {\r\n                                lngLat_coordinates[0] += e.lngLat.lng > lngLat_coordinates[0] ? 360 : -360;\r\n                            }\r\n                            new mapboxgl.Popup()\r\n                                .setLngLat(lngLat_coordinates)\r\n                                .setHTML(description)\r\n                                .addTo(map);\r\n                        })\r\n\r\n                        // // inspect a cluster on click\r\n                        // map.on('click', 'clusters', function (e) {\r\n                        //     alert(\"clusters clicked ------------>\")\r\n                        //     var features = map.queryRenderedFeatures(e.point, {\r\n                        //         layers: ['clusters']\r\n                        //     });\r\n                        //     var clusterId = features[0].properties.cluster_id;\r\n                        //     map.getSource('points').getClusterExpansionZoom(\r\n                        //         clusterId,\r\n                        //         function (err, zoom) {\r\n                        //             if (err) return;\r\n\r\n                        //             map.easeTo({\r\n                        //                 center: features[0].geometry.coordinates,\r\n                        //                 zoom: zoom\r\n                        //             });\r\n                        //         }\r\n                        //     );\r\n                        // });\r\n\r\n                        // When a click event occurs on a feature in\r\n                        // the unclustered-point layer, open a popup at\r\n                        // the location of the feature, with\r\n                        // description HTML from its properties.\r\n                        // map.on('click', 'unclustered-point', function (e, index) {\r\n                        //     alert(\"click unclustered-point ----------------->\")\r\n                        //     var coordinates = e.features[0].geometry.coordinates.slice();\r\n                        //     var description = e.features[0].properties.description;\r\n                        //     let lngLat_coordinates = coordinates;\r\n                        //     if (typeof coordinates[0] != \"object\") {\r\n                        //         lngLat_coordinates = coordinates;\r\n                        //     }\r\n                        //     else {\r\n                        //         if (typeof coordinates[0][0] != \"object\") {\r\n                        //             lngLat_coordinates = coordinates[0];\r\n                        //         }\r\n                        //     }\r\n                        //     // Ensure that if the map is zoomed out such that\r\n                        //     // multiple copies of the feature are visible, the\r\n                        //     // popup appears over the copy being pointed to.\r\n                        //     while (Math.abs(e.lngLat.lng - lngLat_coordinates[0]) > 180) {\r\n                        //         lngLat_coordinates[0] += e.lngLat.lng > lngLat_coordinates[0] ? 360 : -360;\r\n                        //     }\r\n                        //     new mapboxgl.Popup()\r\n                        //         .setLngLat(lngLat_coordinates)\r\n                        //         .setHTML(description)\r\n                        //         .addTo(map);\r\n                        // });\r\n\r\n                        map.on('mouseenter', 'points', function () {\r\n                            map.getCanvas().style.cursor = 'pointer';\r\n                        });\r\n                        map.on('mouseleave', 'points', function () {\r\n                            map.getCanvas().style.cursor = '';\r\n                        });\r\n                    };\r\n                    //linestring line layer\r\n                    map.addLayer({\r\n                        'id': 'route',\r\n                        'type': 'line',\r\n                        'source': 'route',\r\n                        'layout': {\r\n                            'line-join': 'round',\r\n                            'line-cap': 'round'\r\n                        },\r\n                        'paint': {\r\n                            'line-color': '#44337a',\r\n                            'line-width': 2\r\n                        },\r\n                        'filter': ['==', '$type', 'LineString']\r\n                    });\r\n                    //polygon fill layer\r\n                    map.addLayer({\r\n                        'id': 'maine',\r\n                        'type': 'fill',\r\n                        'source': 'route',\r\n                        'layout': {},\r\n                        'paint': {\r\n                            'fill-color': '#44337a',\r\n                            'fill-opacity': 0.8\r\n                        },\r\n                        'filter': ['==', '$type', 'Polygon']\r\n                    });\r\n\r\n                    map.on('mouseenter', 'route', function () {\r\n                        map.getCanvas().style.cursor = 'pointer';\r\n                    });\r\n                    map.on('mouseleave', 'route', function () {\r\n                        map.getCanvas().style.cursor = '';\r\n                    });\r\n\r\n                    // When a click event occurs on a feature in the places layer, open a popup at the\r\n                    // location of the feature, with description HTML from its properties.\r\n                    map.on('click', 'route', function (e) {\r\n                        var coordinates = e.features[0].geometry.coordinates.slice();\r\n                        var description = e.features[0].properties.description;\r\n                        // Ensure that if the map is zoomed out such that multiple\r\n                        // copies of the feature are visible, the popup appears\r\n                        // over the copy being pointed to.\r\n                        while (Math.abs(e.lngLat.lng - coordinates[0]) > 180) {\r\n                            coordinates[0] += e.lngLat.lng > coordinates[0] ? 360 : -360;\r\n                        }\r\n                        new mapboxgl.Popup()\r\n                            .setLngLat(coordinates[0])\r\n                            .setHTML(description)\r\n                            .addTo(map);\r\n                    });\r\n                }\r\n            );\r\n        });\r\n    };\r\n\r\n    const fetchLiveView = () => {\r\n        setIsLoading(true);\r\n        let url = `${baseUrl}/customviews?type=LIVE_VIEW`;\r\n        fetch(url, {\r\n            headers: {\r\n                Accept: \"application/json\",\r\n                Authorization: token,\r\n            }\r\n        }).then(response => {\r\n            var responseValue = response.json();\r\n            return responseValue;\r\n        }).then(responseData => {\r\n            if (responseData !== undefined && responseData !== null) {\r\n                setarrLiveView(responseData);\r\n            }\r\n            setIsLoading(false);\r\n        }).catch(error => {\r\n            console.log(\"error -------->\" + error);\r\n            setIsLoading(false);\r\n        });\r\n    };\r\n\r\n    const doAuth = (selectedLiveView, selectedHdl, isLiveViewTO = false) => {\r\n        setShowData(false);\r\n        setShowMapBox(false);\r\n        setIsLoading(true);\r\n        setselectedLiveViewHdl(selectedHdl);\r\n        setselectedLiveViewName(selectedLiveView);\r\n        let url = `https://pim4.azurewebsites.net/api/pim360?function_name=auth&username=${userName}&password=${password}&purl=${prefixUrl}`;\r\n        var myHeaders = new Headers();\r\n        var requestOptions = {\r\n            method: 'GET',\r\n            headers: myHeaders,\r\n            redirect: 'follow'\r\n        };\r\n        fetch(url, requestOptions).then(response => {\r\n            var responseValue = response.json();\r\n            return responseValue;\r\n        }).then(responseData => {\r\n            if (responseData !== undefined && responseData !== null) {\r\n                if (isLiveViewTO == true) {\r\n                    fetchSelectedLiveViewData_liveview2();\r\n                }\r\n                else {\r\n                    fetchSelectedLiveViewData(selectedLiveView, selectedHdl);\r\n                }\r\n            }\r\n        }).catch(error => {\r\n            console.log(\"doAuth error-------->\", JSON.stringify(error));\r\n            setIsLoading(false);\r\n        });\r\n    };\r\n\r\n    const fetchSelectedLiveViewData_liveview2 = () => {\r\n        setIsLoading(true);\r\n        let counter = 0;\r\n        let tempData = [];\r\n        arrSelectedLiveView_2.map((liveView_2)=>{\r\n            let url = `https://pim4.azurewebsites.net/api/pim360?function_name=liveview_to_geojson&live_view_name=` + liveView_2.Name;\r\n            var myHeaders = new Headers();\r\n            var requestOptions = {\r\n                method: 'GET',\r\n                headers: myHeaders,\r\n                redirect: 'follow'\r\n            };\r\n            fetch(url, requestOptions)\r\n                .then(response => response.json())\r\n                .then(responseData => {\r\n                    if (responseData != null) {\r\n                        tempData.push(responseData);\r\n                        counter  += 1\r\n                        if(counter == arrSelectedLiveView_2.length){\r\n                            formData_liveView2(tempData);\r\n                        }\r\n                    }\r\n                })\r\n                .catch(error => {\r\n                    counter  += 1\r\n                    if(counter == arrSelectedLiveView_2.length){\r\n                        setIsLoading(false);\r\n                        alert(error);\r\n                    }\r\n                    console.log('fetchSelectedLiveViewData error --------->', error)\r\n                });\r\n        });\r\n    };\r\n\r\n    const updateEsriMapData = () => {\r\n        console.log(\"inside updateesrimap data esriJSONData----------->\", esriJSONData);\r\n        let base64Data = window.btoa(JSON.stringify(esriJSONData));\r\n        // setEsriData(window.btoa(JSON.stringify(esriJSONData)));\r\n        setIsLoading(true)\r\n        let data = {\r\n            \"data\": base64Data\r\n        };\r\n        let url = `https://dev-env.space/post_req.php`;\r\n        fetch(url, {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n            },\r\n            body: JSON.stringify(data),\r\n        }).then(response => response.json())\r\n            .then(data => {\r\n                setIsLoading(false);\r\n                setShowMapBox(false);\r\n            })\r\n            .catch((error) => {\r\n                // setShowMapBox(false);\r\n                console.error('updateEsriMapData error: ------->', error);\r\n                setIsLoading(false)\r\n            });\r\n    };\r\n\r\n    const fetchSelectedLiveViewData = (selectedLiveView, selectedHdl) => {\r\n        setIsLoading(true);\r\n        let url = `${baseUrl}/customviews/${selectedHdl}`;\r\n        fetch(url, {\r\n            headers: {\r\n                Accept: \"application/json\",\r\n                Authorization: token,\r\n            }\r\n        }).then(response => {\r\n            var responseValue = response.json();\r\n            return responseValue;\r\n        }).then(response => {\r\n            if (response !== undefined && response !== null) {\r\n                getResultUrl(response);\r\n            }\r\n        }).catch(error => {\r\n            console.log(\"fetchSelectedLiveViewData error -------->\" + error);\r\n            setIsLoading(false);\r\n        });\r\n    }\r\n\r\n    const getFinalResult = (queryResult, pageSize = 200, page = 0) => {\r\n        let url = `${baseUrl}${queryResult}?limit=${pageSize}&skip=${page}`\r\n        axios.defaults.headers.common = { 'Authorization': localStorage.getItem(\"b_token\") };\r\n        return Api.getRequest(url).then((response) => {\r\n            arrData.push(...response.data);\r\n            if (response.hasmore) {\r\n                return getFinalResult(queryResult, pageSize, (arrData.length / pageSize) * 200)\r\n            } else {\r\n                setIsLoading(false);\r\n                return arrData;\r\n            }\r\n        });\r\n    }\r\n\r\n    const getResultUrl = (response) => {\r\n        let createQueryBody = {\r\n            \"type\": \"TAGGED_ITEM\",\r\n            \"eic\": \"\",\r\n            \"filter\": response.Data.conditions,\r\n            \"fields\": response.Data.fields\r\n        };\r\n        let url = `${baseUrl}/queries`;\r\n        fetch(url, {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                \"Authorization\": token\r\n            },\r\n            body: JSON.stringify(createQueryBody),\r\n        }).then(response => response.json())\r\n            .then(data => {\r\n                return getFinalResult(data.resulturl).then((finalResult) => {\r\n                    setIsLoading(false);\r\n                    let arrFirstObjKeys = Object.keys(finalResult[0]).filter(e => typeof finalResult[0][e] == 'object')\r\n                    let arrModifiedData = [];\r\n                    let arrTagNumberData = [];\r\n                    finalResult.map((item) => {\r\n                        let obj = {};\r\n                        arrFirstObjKeys.map((key) => {\r\n                            if (item[key].name == \"Tag Number\" || item[key].name == \"TAG NUMBER\") {\r\n                                arrTagNumberData.push(item[key].value);\r\n                            }\r\n                            obj[item[key].name] = item[key].value;\r\n                        });\r\n                        arrModifiedData.push(obj);\r\n                    });\r\n                    if (arrModifiedData.length > 0) {\r\n                        if (arrModifiedData[0].hasOwnProperty(\"Tag Number\") || arrModifiedData[0].hasOwnProperty(\"TAG NUMBER\")) {\r\n                            if (arrTagNumberData.length > 0) {\r\n                                setArrTagNumber(arrTagNumberData);\r\n                            }\r\n                        }\r\n                        else {\r\n                            //finish process and show no data found\r\n                            setNotFound(true);\r\n                        }\r\n                    }\r\n                });\r\n            })\r\n            .catch((error) => {\r\n                console.error('Error:', error);\r\n                setIsLoading(false)\r\n            });\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (showMapBox) {\r\n            if (Object.keys(mapData).length > 0) {\r\n                if(isDualCall){\r\n                    if(isFirstDataFormed == true && isSecondDataFormed == true){\r\n                        setIsLoading(false);\r\n                        console.log(\" inside call isDualCall showdata  ------------>\")\r\n                        show_data();\r\n                    }\r\n                }else{\r\n                    console.log(\"inside isDualCall else------------>\")\r\n                    show_data()\r\n                }\r\n            }\r\n        }\r\n    }, [mapData, showMapBox]);\r\n\r\n    const onSelect = (selectedList, selectedItem) => {\r\n        setShowData(false);\r\n        SetArrSelectedTagNumber(selectedList)\r\n    }\r\n\r\n    const onRemove = (selectedList, removedItem) => {\r\n        setShowData(false);\r\n        SetArrSelectedTagNumber(selectedList)\r\n    }\r\n\r\n    \r\n    const onSelect_liveView2 = (selectedList, selectedItem) => {\r\n        setIsLiveView2(true);\r\n        setShowData(false);\r\n        SetArrSelectedLiveView_2(selectedList);\r\n    }\r\n\r\n    const onRemove_liveView2 = (selectedList, removedItem) => {\r\n        setIsLiveView2(true);\r\n        setShowData(false);\r\n        SetArrSelectedLiveView_2(selectedList);\r\n    }\r\n\r\n    const onSubmitTag = () => {\r\n        let isDualCall = false;\r\n        setisDualCall(false);\r\n        setIsFirstDataFormed(false);\r\n        setIsSecondDataFormed(false);\r\n        if(arrSelectedTagNumber.length > 0 && arrSelectedLiveView_2.length > 0){\r\n            isDualCall = true;\r\n            setMapData([]);\r\n            setEsriJSONData([]);\r\n            window.esriJSONData = [];\r\n            window.mapData = [];\r\n            setisDualCall(true);\r\n        }\r\n        setIsLoading(true);\r\n        if(isDualCall){\r\n            console.log(\"onSubmitTag if ----------------->\");\r\n            let counter = 0;\r\n            arrSelectedTagNumber.map((selectedTag) => {\r\n                let url = `${baseUrl}/objects/TAGGED_ITEM/id/${selectedTag}`;\r\n                fetch(url, {\r\n                    headers: {\r\n                        Accept: \"application/json\",\r\n                        Authorization: token,\r\n                    }\r\n                }).then(response => {\r\n                    var responseValue = response.json();\r\n                    return responseValue;\r\n                }).then(responseData => {\r\n                    counter += 1;\r\n                    if (responseData !== null && responseData !== undefined && responseData.attrs !== null) {\r\n                        arrTagResponseData.push(responseData.attrs);\r\n                    }\r\n                    if (counter === arrSelectedTagNumber.length) {\r\n                        formData(true);\r\n                        return\r\n                    }\r\n                    // setData(responseData);\r\n                }).catch(error => {\r\n                    counter += 1;\r\n                    if (counter === arrSelectedTagNumber.length) {\r\n                        formData();\r\n                        setIsLoading(false);\r\n                        return\r\n                    }\r\n                    console.log(\"getAttributes error -------->\" + error);\r\n                })\r\n            })\r\n        }\r\n        else{\r\n            console.log(\"onSubmitTag else ----------------->\")\r\n            if(isLiveView2){\r\n                doAuth(\"\", \"\", true);\r\n            }\r\n            else{\r\n                let counter = 0;\r\n                arrSelectedTagNumber.map((selectedTag) => {\r\n                    let url = `${baseUrl}/objects/TAGGED_ITEM/id/${selectedTag}`;\r\n                    fetch(url, {\r\n                        headers: {\r\n                            Accept: \"application/json\",\r\n                            Authorization: token,\r\n                        }\r\n                    }).then(response => {\r\n                        var responseValue = response.json();\r\n                        return responseValue;\r\n                    }).then(responseData => {\r\n                        counter += 1;\r\n                        if (responseData !== null && responseData !== undefined && responseData.attrs !== null) {\r\n                            arrTagResponseData.push(responseData.attrs);\r\n                        }\r\n                        if (counter === arrSelectedTagNumber.length) {\r\n                            formData();\r\n                            return\r\n                        }\r\n                        // setData(responseData);\r\n                    }).catch(error => {\r\n                        counter += 1;\r\n                        if (counter === arrSelectedTagNumber.length) {\r\n                            formData();\r\n                            setIsLoading(false);\r\n                            return\r\n                        }\r\n                        console.log(\"getAttributes error -------->\" + error);\r\n                    })\r\n                })\r\n            }\r\n        }\r\n    }\r\n\r\n    const formData = (doSecondCall = false) => {\r\n        setShowData(true);\r\n        setShowMapBox(true);\r\n        let tempMapData = [...mapData];\r\n        let arrEsriMapObj = [...esriJSONData];\r\n        if(doSecondCall){\r\n            tempMapData = [];\r\n            arrEsriMapObj = [];\r\n        }\r\n        let arrObj = [];\r\n        let arrMapObj = [];\r\n        arrTagResponseData.length > 0 && arrTagResponseData.map((response) => {\r\n            let arrkeys = Object.keys(response);\r\n            let obj = {};\r\n            let mapObj = {}\r\n            let tableData = \"\";\r\n            let hasRoute = false;\r\n            arrkeys.map((key) => {\r\n                if (response[key].name == \"Route\") {\r\n                    hasRoute = true;\r\n                    mapObj = JSON.parse(response[key].value);\r\n                }\r\n                else {\r\n                    obj[response[key].name] = response[key].value;\r\n                    tableData += \"<p>\";\r\n                    tableData += response[key].name;\r\n                    tableData += \" : \";\r\n                    tableData += response[key].value;\r\n                    tableData += \" <br> \";\r\n                    tableData += \"</p>\";\r\n                }\r\n                return;\r\n            });\r\n            if (hasRoute) {\r\n                mapObj.properties.description = tableData;\r\n                arrObj.push(obj);\r\n                arrMapObj.push(mapObj);\r\n                let key =  \"tagno\" + arrMapObj.length;\r\n                let esriObj = {};\r\n                esriObj[key] = mapObj;\r\n                arrEsriMapObj.push(mapObj);\r\n            }\r\n            else {\r\n                setNotFound(true);\r\n            }\r\n        });\r\n        if(!isDualCall){\r\n            setIsLoading(false);\r\n        }\r\n        window.esriJSONData.push(...arrEsriMapObj);\r\n        setEsriJSONData(arrEsriMapObj);\r\n        setIsFirstDataFormed(true);\r\n        setAttributeData(arrObj);\r\n        tempMapData.push(...arrMapObj);\r\n        window.mapData.push(...tempMapData);\r\n        setMapData(tempMapData);\r\n        if(doSecondCall){\r\n            console.log(\"inside calling second api ---------->\");\r\n            doAuth(\"\", \"\", true);\r\n        }\r\n    }\r\n\r\n    const formData_liveView2 = (response) => {\r\n        // let tempMapData = [];\r\n        // let arrEsriMapObj = [];\r\n        // console.log(\"dualcall ------->\", isDualCall)\r\n        // if(isDualCall){\r\n        //     tempMapData = [...window.mapData];\r\n        //     arrEsriMapObj = [...window.esriJSONData];\r\n        // }else{\r\n        //     tempMapData = [...mapData];\r\n        //     arrEsriMapObj = [...esriJSONData];\r\n        // }\r\n        let tempMapData = [...window.mapData];\r\n        let arrEsriMapObj = [...window.esriJSONData];\r\n        response.map((itemData, index)=>{\r\n            let data = { ...itemData };\r\n            let gMapData = [];\r\n            data.features.map((item, index) => {\r\n                //form mapBoxData\r\n                let keys = Object.keys(item.properties);\r\n                let tableData = \"\";\r\n                tableData += \"<p>\";\r\n                keys.map((k) => {\r\n                    tableData += k;\r\n                    tableData += \" : \";\r\n                    tableData += item.properties[k];\r\n                    tableData += \" <br> \";\r\n                });\r\n                tableData += \"</p>\";\r\n    \r\n                //form gMapData\r\n                gMapData.push({\r\n                    \"lat\": Number(item.geometry.coordinates[1]),\r\n                    \"lng\": Number(item.geometry.coordinates[0]),\r\n                    \"ref_or_fix\": \"fix\",\r\n                    \"desc\": tableData\r\n                });\r\n                item.properties.description = tableData;\r\n                let lat = item.geometry.coordinates[1];\r\n                let lng = item.geometry.coordinates[0];\r\n                item.geometry.coordinates[0] = lng;\r\n                item.geometry.coordinates[1] = lat;\r\n            });\r\n            \r\n            setLat(data.features[0].geometry.coordinates[1]);\r\n            setLng(data.features[0].geometry.coordinates[0]);\r\n            let tempKey = \"liveview2\";\r\n            let esriMapObj = {};\r\n            esriMapObj[tempKey] = data;\r\n            if(arrEsriMapObj.length > 0){\r\n                if(Object.keys(arrEsriMapObj[arrEsriMapObj.length - 1]).includes(\"liveview2\")){\r\n                    let temp_arrEsriMapObj = [...data.features];\r\n                    arrEsriMapObj[arrEsriMapObj.length - 1].liveview2.features.push(...temp_arrEsriMapObj)\r\n                    console.log(\"includes ---------->\")\r\n                }\r\n                else{\r\n                    arrEsriMapObj.push(esriMapObj);\r\n                    console.log(\"not includes ---------->\");\r\n                }\r\n            }\r\n            else{\r\n                arrEsriMapObj.push(esriMapObj);\r\n            }\r\n            tempMapData.push(...data.features);\r\n        });\r\n        if(!isDualCall){\r\n            setIsLoading(false);\r\n        }\r\n        setIsSecondDataFormed(true);\r\n        setMapData(tempMapData);\r\n        window.esriJSONData.push(...arrEsriMapObj);\r\n        window.mapData.push(...tempMapData);\r\n        setEsriJSONData(arrEsriMapObj);\r\n        setShowData(true);\r\n        setShowMapBox(true);\r\n    }\r\n\r\n    return (\r\n        <div id=\"v2\">\r\n            <NavBar showLogoutButton={true} showSearch={false}></NavBar>\r\n            {isLoading ?\r\n                <div className=\"popUpContainer\">\r\n                    <div className=\"loader\"></div>\r\n                </div>\r\n                : \"\"\r\n            }\r\n            <div className=\"m-4 inline-block relative  w-1/1\">\r\n                <label className=\"block text-gray-700 text-sm font-bold mb-2\" htmlFor=\"username\">\r\n                    LiveView\r\n                </label>\r\n                <div className=\"inline-block relative w-1/1\">\r\n                    <select\r\n                        class=\"block appearance-none w-full bg-gray-300 border border-gray-400 hover:border-gray-500 px-4 py-2 pr-8 rounded shadow leading-tight focus:outline-none focus:shadow-outline\"\r\n                        onChange={(e) => {\r\n                            var textVal = e.target.options[e.target.selectedIndex].text;\r\n                            setIsLiveView2(false)\r\n                            setShowMapBox(false)\r\n                            doAuth(textVal, e.target.value);\r\n                        }}>\r\n                        <option value=\"\">Select</option>\r\n                        {arrLiveView != null && arrLiveView.length > 0 ? arrLiveView.map((liveView, index) => {\r\n                            return <option name={liveView.Name} value={liveView.Hdl}>{liveView.Name}</option>\r\n                        }) : \"\"\r\n                        }\r\n                    </select>\r\n                    <div class=\"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700\">\r\n                        <svg class=\"fill-current h-4 w-4\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\"><path d=\"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z\" /></svg>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {\r\n                arrTagNumber.length > 0 &&\r\n                <div className=\"m-4 inline-block relative  w-1/1\">\r\n                    <Multiselect\r\n                        displayValue=\"key\"\r\n                        showCheckbox={true}\r\n                        style={multiSelectStyle}\r\n                        options={arrTagNumber}\r\n                        isObject={false}\r\n                        onSelect={onSelect}\r\n                        onRemove={onRemove}\r\n                    />\r\n                </div>\r\n            }\r\n            <div className=\"inline-block relative mx-3\">\r\n                {\r\n                    selectedLiveViewHdl !== undefined && selectedLiveViewHdl != \"\" ?\r\n                        <a target=\"_blank\" href={`https://${prefixUrl}.pim360.io/liveview#view=${selectedLiveViewHdl}`}>\r\n                            <img width=\"15%\" src={`https://${prefixUrl}.acl360.io/img/pim360-logo.svg`} onError={(e) => {\r\n\r\n                                e.target.src = `https://${prefixUrl}.acl360.io/img/pim360_logo.png`\r\n                            }} />\r\n                        </a>\r\n                        : ''\r\n                }\r\n            </div>\r\n            <div className=\"m-4 relative  w-1/1\">\r\n                <label className=\"block text-gray-700 text-sm font-bold mb-2\" htmlFor=\"username\">\r\n                    LiveView2\r\n                </label>\r\n                <div className=\"inline-block relative w-1/1\">\r\n                    {/* <select\r\n                        class=\"block appearance-none w-full bg-gray-300 border border-gray-400 hover:border-gray-500 px-4 py-2 pr-8 rounded shadow leading-tight focus:outline-none focus:shadow-outline\"\r\n                        onChange={(e) => {\r\n                            var textVal = e.target.options[e.target.selectedIndex].text;\r\n                            setIsLiveView2(true);\r\n                            setShowMapBox(false);\r\n                            doAuth(textVal, e.target.value, true);\r\n                        }}>\r\n                        <option value=\"\">Select</option>\r\n                        {arrLiveView != null && arrLiveView.length > 0 ? arrLiveView.map((liveView, index) => {\r\n                            return <option name={liveView.Name} value={liveView.Hdl}>{liveView.Name}</option>\r\n                        }) : \"\"\r\n                        }\r\n                    </select>\r\n                    <div class=\"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700\">\r\n                        <svg class=\"fill-current h-4 w-4\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\"><path d=\"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z\" /></svg>\r\n                    </div> */}\r\n                     <Multiselect\r\n                        displayValue=\"Name\"\r\n                        showCheckbox={true}\r\n                        style={multiSelectStyle}\r\n                        options={arrLiveView}\r\n                        onSelect={onSelect_liveView2}\r\n                        onRemove={onRemove_liveView2}\r\n                    />\r\n                </div>\r\n            </div>\r\n            <div className=\"m-4 relative  w-1/1\">\r\n                {arrSelectedTagNumber.length > 0 || arrSelectedLiveView_2.length > 0 ?\r\n                    < button className=\"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded focus:outline-none m-auto\" type=\"button\"\r\n                        onClick={() => { onSubmitTag() }}\r\n                    >\r\n                        Submit\r\n                    </button>\r\n                    : \"\"\r\n                }\r\n            </div>\r\n            <div id=\"liveView-container\">\r\n                <div className=\"w-full\">\r\n                    {showData ?\r\n                        <div className=\"relative\">\r\n                            <div className=\"m-4\">\r\n                                <label className=\"inline-block text-gray-700 text-sm font-bold \" htmlFor=\"username\">\r\n                                    Selected LiveView:\r\n                                </label>\r\n                                <p className=\"inline-block ml-4\">{selectedLiveViewName}</p>\r\n                            </div>\r\n                            <div className=\"m-4\">\r\n                                <button className={showMapBox ? \"btn-selected\" : \"btn\"} onClick={() => { setShowMapBox(true) }}>Mapbox</button>\r\n                                <button className={showMapBox ? \"btn\" : \"btn-selected\"} onClick={() => updateEsriMapData()} >ESRI</button>\r\n                            </div>\r\n                            {showMapBox ?\r\n                                <div id=\"map-container\" className='map-container m-4 map-height width' ref={mapContainerRef} />\r\n                                : \"\"\r\n                            }\r\n                            {!showMapBox ? <EsriMapPOC /> : \"\"}\r\n                        </div>\r\n                        : notFound\r\n                            ?\r\n                            <div className=\"centerItem mt-5 pt-5 pri\">\r\n                                <img draggable={false} width={300} src={noDataAttribute} />\r\n                                <p className=\"text-center mt-3 text-purple-800\">No Route found</p>\r\n                            </div>\r\n                            :\r\n                            <div className=\"centerItem mt-5 pt-5 pri\">\r\n                                <img draggable={false} width={300} src={search} />\r\n                                <p className=\"text-center mt-3 text-purple-800\">Select the liveview to show the data here</p>\r\n                            </div>\r\n                    }\r\n                </div>\r\n            </div>\r\n        </div >\r\n    );\r\n}\r\n\r\nexport default LiveToShape_v2;","import React, { useEffect } from 'react';\r\nimport NavBar from '../components/NavBar'\r\n\r\nfunction Poc(props) {\r\n    useEffect(() => {\r\n        var tasks = [\r\n            {\r\n                \"startDate\": 2885, \"endDate\": 3293, \"taskName\": \"Hexo\", \"status\": \"KILLED\", \"attrs\": [\r\n                    {\r\n                        \"name\": \"Wear\",\r\n                        \"value\": \"here\",\r\n                    },\r\n                    {\r\n                        \"name\": \"ABC\",\r\n                        \"value\": \"XYZ\",\r\n                    }\r\n                ]\r\n            },\r\n            { \"startDate\": 4333, \"endDate\": 4453, \"taskName\": \"Fixed\", \"status\": \"RUNNING\", \"tootl\": \"hello2\" },\r\n            { \"startDate\": 7025, \"endDate\": 9280, \"taskName\": \"Reference\", \"status\": \"SUCCEEDED\", \"tootl\": \"hello3\" },\r\n            // { \"startDate\": 94, \"endDate\": 194, \"taskName\": \"Reference\", \"status\": \"SUCCEEDED\" },\r\n            // { \"startDate\": 1000, \"endDate\": 1100, \"taskName\": \"Fixed\", \"status\": \"RUNNING\" },\r\n            // { \"startDate\": 2000, \"endDate\": 2100, \"taskName\": \"Fixed\", \"status\": \"RUNNING\" },\r\n            // { \"startDate\": 3200, \"endDate\": 3300, \"taskName\": \"Reference\", \"status\": \"SUCCEEDED\" },\r\n        ];\r\n\r\n        var taskStatus = {\r\n            \"SUCCEEDED\": \"bar\",\r\n            \"FAILED\": \"bar-failed\",\r\n            \"RUNNING\": \"bar-running\",\r\n            \"KILLED\": \"bar-killed\"\r\n        };\r\n\r\n        var taskNames = [\"Hexo\", \"Fixed\", \"Reference\"];\r\n\r\n        tasks.sort(function (a, b) {\r\n            return a.endDate - b.endDate;\r\n        });\r\n        var maxDate = tasks[tasks.length - 1].endDate;\r\n        tasks.sort(function (a, b) {\r\n            return a.startDate - b.startDate;\r\n        });\r\n        var minDate = tasks[0].startDate;\r\n\r\n\r\n        var format = \"%H:%M\";\r\n\r\n        // gantt 1\r\n        var gantt1 = window.d3.gantt(\"new-gantt\", tasks).taskTypes(taskNames).taskStatus(taskStatus).tickFormat(format);\r\n        gantt1(tasks);\r\n\r\n\r\n        //gantt2\r\n        var tasks2 = [\r\n            { \"startDate\": 35, \"endDate\": 45, \"taskName\": \"DS - Inner Rail Wear\", \"status\": \"RUNNING\", \"wear\": \"<0.5km\" },\r\n            { \"startDate\": 40, \"endDate\": 50, \"taskName\": \"DS - Outer Rail Wear\", \"status\": \"SUCCEEDED\", \"wear\": \"<0.1km\" },\r\n            { \"startDate\": 75, \"endDate\": 85, \"taskName\": \"DS - Speed Restriction\", \"status\": \"FAILED\", \"wear\": \"<10km\" },\r\n            { \"startDate\": 100, \"endDate\": 110, \"taskName\": \"DS - Vertical Clearance Limitation\", \"status\": \"RUNNING\", \"wear\": \"<3km\" },\r\n            { \"startDate\": 120, \"endDate\": 130, \"taskName\": \"DS - Vertical Clearance Limitation\", \"status\": \"KILLED\", \"wear\": \"<5km\" },\r\n        ];\r\n\r\n\r\n        var taskNames2 = [\"DS - Inner Rail Wear\", \"DS - Outer Rail Wear\", \"DS - Speed Restriction\", \"DS - Vertical Clearance Limitation\"];\r\n\r\n        tasks2.sort(function (a, b) {\r\n            return a.endDate - b.endDate;\r\n        });\r\n\r\n\r\n        // gantt 2\r\n        var gantt2 = window.d3.gantt(\"new-gantt2\", tasks2).taskTypes(taskNames2).taskStatus(taskStatus).tickFormat(format);\r\n        gantt2(tasks2);\r\n\r\n        // // for map\r\n        window.InitializeMap([{ \"lat\": 21.2379446999999998979546944610774517059326171875, \"lng\": 72.77922780000000102518242783844470977783203125 }, { \"lat\": 21.237881200000000347927198163233697414398193359375, \"lng\": 72.77926089999999703650246374309062957763671875 }, { \"lat\": 21.23800320000000141362761496566236019134521484375, \"lng\": 72.779213999999996076439856551587581634521484375 }, { \"lat\": 21.23816790000000054305928642861545085906982421875, \"lng\": 72.7788641000000069425368565134704113006591796875 }]);\r\n\r\n    }, [])\r\n    return (\r\n        <div>\r\n            <NavBar showLogoutButton={true}></NavBar>\r\n            <br></br>\r\n            {/* <!-- // just for styling purpoe --> */}\r\n            <svg style={{ height: 0, position: \"absolute\" }}>\r\n                <defs>\r\n                    <linearGradient id=\"red\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"0%\">\r\n                        <stop offset=\"0%\" style={{ stopColor: \"#fd3c3c\", stopOpacity: 1 }} />\r\n                        <stop offset=\"100%\" style={{ stopColor: \"#dc281e\", stopOpacity: 1 }} />\r\n                    </linearGradient>\r\n                    <linearGradient id=\"green\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"0%\">\r\n                        <stop offset=\"0%\" style={{ stopColor: \"#7bdb06\", stopOpacity: 1 }} />\r\n                        <stop offset=\"100%\" style={{ stopColor: \"#36ac00\", stopOpacity: 1 }} />\r\n                    </linearGradient>\r\n                    <linearGradient id=\"blue\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"0%\">\r\n                        <stop offset=\"0%\" style={{ stopColor: \"#00c6ff\", stopOpacity: 1 }} />\r\n                        <stop offset=\"100%\" style={{ stopColor: \"#0072ff\", stopOpacity: 1 }} />\r\n                    </linearGradient>\r\n                    <linearGradient id=\"orange\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"0%\">\r\n                        <stop offset=\"0%\" style={{ stopColor: \"#fe8c00\", stopOpacity: 1 }} />\r\n                        <stop offset=\"100%\" style={{ stopColor: \"#f83600\", stopOpacity: 1 }} />\r\n                    </linearGradient>\r\n                </defs>\r\n            </svg>\r\n\r\n            <h3>Gantt 1</h3>\r\n            <div id=\"new-gantt\" style={{ height: \"130px\", width: \"1000px\" }}></div>\r\n            <h3>Gantt 2</h3>\r\n            <div id=\"new-gantt2\" style={{ height: \"200px\", width: \"1000px\" }}></div>\r\n\r\n            <br></br>\r\n\r\n            <h3>Map</h3>\r\n            <br></br>\r\n            <div id=\"dvMap\" style={{ height: \"500px\", width: \"35%\" }}></div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Poc;","import React, { useState, useEffect } from 'react';\r\nimport { useHistory } from \"react-router-dom\";\r\nimport NavBar from '../components/NavBar'\r\nimport Api from \"../api/api\";\r\nimport bug from \"../assests/bug.svg\";\r\nimport chat from \"../assests/gantt_chat.svg\";\r\nimport map from \"../assests/map.svg\";\r\nimport search from \"../assests/search.svg\";\r\nimport noDataAttribute from \"../assests/noDataAttribute.svg\";\r\nimport {\r\n    Accordion,\r\n    AccordionItem,\r\n    AccordionItemHeading,\r\n    AccordionItemButton,\r\n    AccordionItemPanel,\r\n} from 'react-accessible-accordion';\r\nconst axios = require('axios');\r\n\r\nfunction LinearAsset(props) {\r\n    const [ganttData, setGanttData] = useState([]);\r\n    const [ass_ganttData, setAss_ganttData] = useState([]);\r\n    const [attributeData, setAttributeData] = useState([]);\r\n    const [documentData, setdocumentData] = useState([]);\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const [isAttrLoading, setIsAttrLoading] = useState(false);\r\n    const [isError, setIsError] = useState(false);\r\n    const [errMsg, setErrorMsg] = useState();\r\n    const [showData, setShowData] = useState(false);\r\n    const [isGanntHaveData, setIsGanntHaveData] = useState(false);\r\n    const [isAssociateGanntHaveData, setIsAssociateGanntHaveData] = useState(false);\r\n    const [isMapError, setIsMapError] = useState(false);\r\n    const doApi = (searchKey) => {\r\n        setIsLoading(true);\r\n        //setting token in header\r\n        axios.defaults.headers.common = { 'Authorization': localStorage.getItem(\"b_token\") };\r\n        Api.getRouteObj(searchKey).then((response) => {\r\n            console.log(\"response ------------>\");\r\n            console.log(response);\r\n            if (response != undefined && response != null) {\r\n                setShowData(true);\r\n                if (response.dataMap != undefined && response.dataMap != null && Object.keys(response.dataMap).length > 0) {\r\n                    console.log(\"inside if\")\r\n                    setIsGanntHaveData(true);\r\n\r\n                    //generating data\r\n                    generateGanttData(response.dataMap);\r\n                }\r\n                else {\r\n                    console.log(\"inside else\")\r\n                    //set gantt data error\r\n                    setIsGanntHaveData(false);\r\n                }\r\n                if (response.dataMapEq != undefined && response.dataMapEq != null && Object.keys(response.dataMapEq).length > 0) {\r\n                    setIsAssociateGanntHaveData(true);\r\n\r\n                    //generate associate Data\r\n                    generateAssociateData(response);\r\n                }\r\n                else {\r\n                    //set gantt data error\r\n                    setIsAssociateGanntHaveData(false);\r\n                }\r\n            }\r\n            console.log(\"isGanntHaveData----------->\" + isGanntHaveData)\r\n            console.log(\"isAssociateGanntHaveData ------------ \" + isAssociateGanntHaveData)\r\n            setIsLoading(false);\r\n        }).catch(error => {\r\n            console.log(\"doApi error ------------>\");\r\n            console.log(error);\r\n            setIsLoading(false);\r\n            console.log(\"isGanntHaveData----------->\" + isGanntHaveData)\r\n            console.log(\"isAssociateGanntHaveData ------------ \" + isAssociateGanntHaveData)\r\n            if (!isAssociateGanntHaveData && !ganttData) {\r\n                setIsError(true);\r\n            }\r\n            // setIsError(true);\r\n            // setErrorMsg(\"Something went wrong. Please Try again!!\");\r\n        });\r\n    };\r\n\r\n    const generateGanttData = (LaMap) => {\r\n        //getting y keys from main object\r\n        let ganntKeys = Object.keys(LaMap);\r\n        //variable to store all data\r\n        let data = [];\r\n        let mapdata = [];\r\n        //generating data for fixed key\r\n        LaMap.fixed.map((fixed_obj) => {\r\n            let lastObj = LaMap.fixed[LaMap.fixed.length - 1];\r\n            let pointsToAdd = 0;\r\n            if(parseInt(lastObj.route_chainage) < 25000) {\r\n                pointsToAdd = 300;\r\n            }\r\n            else{\r\n                pointsToAdd = 1500;\r\n            }\r\n\r\n            //getting all keys from attrs\r\n            let arrkeys = Object.keys(fixed_obj.refObj.attrs);\r\n\r\n            //initalize object\r\n            let obj = {};\r\n\r\n            //looping attribute keys and getting attribute values\r\n            arrkeys.map((key, index) => {\r\n                obj[fixed_obj.refObj.attrs[key].name] = fixed_obj.refObj.attrs[key].value;\r\n            });\r\n\r\n            //getting lat and lang\r\n            let lat = Number(Object.values(fixed_obj.refObj.attrs).filter(e => e.name == 'Approved Latitude' || e.name.toLowerCase() == 'latitude')[0].value)\r\n            // let lng = Number(Object.values(fixed_obj.refObj.attrs).filter(e => e.name == 'Approved Longitude')[0].value.replace(\" E\", \"\")) > 0 ? Number(Object.values(fixed_obj.refObj.attrs).filter(e => e.name == 'Approved Longitude')[0].value.replace(\" E\", \"\")) : Number(Object.values(fixed_obj.refObj.attrs).filter(e => e.name == 'Approved Longitude')[0].value.replace(\" E\", \"\").substring(1))\r\n            let lng = Number(Object.values(fixed_obj.refObj.attrs).filter(e => e.name == 'Approved Longitude' || e.name.toLowerCase() == 'longitude')[0].value)\r\n            \r\n            if(lat){\r\n                mapdata.push({\r\n                    \"lat\": lat ,\r\n                    \"lng\": lng,\r\n                    \"ref_or_fix\": \"fix\"\r\n                });\r\n            }\r\n            \r\n            //creating object with required values  \r\n            data.push({\r\n                \"startDate\": fixed_obj.route_chainage,\r\n                \"endDate\": (fixed_obj.route_chainage + pointsToAdd),\r\n                \"taskName\": \"Fixed\",\r\n                \"type\": fixed_obj.refObj.type,\r\n                \"status\": \"RUNNING\",\r\n                \"attrs\": [{\r\n                    \"name\": \"Tag: \",\r\n                    \"value\": fixed_obj.objId\r\n                }],\r\n                \"hdl\": fixed_obj.hdl,\r\n                \"lat\": lat,\r\n                \"lng\": lng\r\n            });\r\n        });\r\n\r\n        //generating data for ref key\r\n        LaMap.ref.map((ref_obj) => {\r\n            let lastObj = LaMap.ref[LaMap.ref.length - 1];\r\n            let pointsToAdd = 0;\r\n            if(parseInt(lastObj.route_chainage) < 25000) {\r\n                pointsToAdd = 300;\r\n            }\r\n            else{\r\n                pointsToAdd = 1500;\r\n            }\r\n\r\n            //getting lat and lang\r\n            let lat = Number(Object.values(ref_obj.refObj.attrs).filter(e => e.name == 'Approved Latitude' || e.name.toLowerCase() == 'latitude')[0].value)\r\n            let lng = Number(Object.values(ref_obj.refObj.attrs).filter(e => e.name == 'Approved Longitude' || e.name.toLowerCase() == 'longitude')[0].value)\r\n            if(lat){\r\n                mapdata.push({\r\n                    \"lat\": lat ,\r\n                    \"lng\": lng,\r\n                    \"ref_or_fix\": \"ref\"\r\n                });\r\n            }\r\n            //creating object with required values\r\n            data.push({\r\n                \"startDate\": ref_obj.route_chainage,\r\n                \"endDate\": (ref_obj.route_chainage + pointsToAdd),\r\n                \"taskName\": \"Reference\",\r\n                \"type\": ref_obj.refObj.type,\r\n                \"status\": \"SUCCEEDED\",\r\n                \"attrs\": [{\r\n                    \"name\": \"Tag: \",\r\n                    \"value\": ref_obj.objId\r\n                }],\r\n                \"hdl\": ref_obj.hdl,\r\n                \"lat\": lat,\r\n                \"lng\": lng\r\n            });\r\n        });\r\n\r\n        //generating map data\r\n        // generateMapData(mapdata);\r\n\r\n        //initialize map\r\n        window.InitializeMap(mapdata);\r\n\r\n        //set generated data to state\r\n        setGanttData(data);\r\n\r\n        var taskStatus = {\r\n            \"SUCCEEDED\": \"bar\",\r\n            \"FAILED\": \"bar-failed\",\r\n            \"RUNNING\": \"bar-running\",\r\n            \"KILLED\": \"bar-killed\"\r\n        };\r\n\r\n        var taskNames = [\"Fixed\", \"Reference\"];\r\n        var format = \"%H:%M\";\r\n        // gantt 1\r\n        var gantt1 = window.d3.gantt(\"gantt\", data, onClickGanttItem).taskTypes(taskNames).taskStatus(taskStatus).tickFormat(format);\r\n        gantt1(data);\r\n    };\r\n\r\n    const onClickGanttItem = (clickedObj) => {\r\n        console.log(\"clickedObj -------> \"+JSON.stringify(clickedObj));\r\n        setAttributeData([]);\r\n        setdocumentData([]);\r\n        setIsMapError(false);\r\n        setIsAttrLoading(true);\r\n        let objType = \"TAGGED_ITEM\";\r\n        //setting token in header\r\n        axios.defaults.headers.common = { 'Authorization': localStorage.getItem(\"b_token\") }\r\n\r\n        //initialize required variables\r\n        let hdlData = [];\r\n\r\n        //doing api call for getting attributes data\r\n        Api.objectByHdl(clickedObj.type, clickedObj.hdl).then((response) => {\r\n            if (response != null) {\r\n                //getting all keys from attrs\r\n                let arrkeys = Object.keys(response.attrs);\r\n                //initalize object\r\n                let obj = {};\r\n                //looping attribute keys and getting attribute values\r\n                arrkeys.map((key) => {\r\n                    obj[response.attrs[key].name] = response.attrs[key].value;\r\n                });\r\n                //set data to state            \r\n                setAttributeData(obj);\r\n                setIsAttrLoading(false);\r\n            }\r\n        }).catch(error => {\r\n            setIsAttrLoading(false);\r\n            console.log(\"objectByHdl error---------->\" + JSON.stringify(error));\r\n        });\r\n\r\n        //doing api call for getting document link data\r\n        Api.objectAssociations(objType, clickedObj.hdl, \"DOCUMENT\").then((response) => {\r\n            let associativeData = [];\r\n            if (response != null) {\r\n                if (response.items.length > 0) {\r\n                    {\r\n                        response.items.map((item) => {\r\n                            associativeData.push({\r\n                                name: item.ID,\r\n                                class: item.ClsName,\r\n                                link: item.Url\r\n                            })\r\n                        })\r\n                    }\r\n                    setdocumentData(associativeData);\r\n                    setIsAttrLoading(false);\r\n                }\r\n            }\r\n        }).catch(error => {\r\n            setIsAttrLoading(false);\r\n            console.log(\"objectAssociations error---------->\" + JSON.stringify(error));\r\n        });\r\n        \r\n        // window.myMap.setCenter({lat:clickedObj.lat, lng:clickedObj.lng})    ;\r\n        window.myMap.setZoom(17);\r\n\r\n        window.myMap.panTo({ lat: clickedObj.lat, lng: clickedObj.lng });\r\n        // window.myMap.setZoom(18);      // This will trigger a zoom_changed on the map\r\n    };\r\n\r\n    const generateAssociateData = (AssociativeData) => {\r\n        // console.log(JSON.stringify(AssociativeData))\r\n        //getting y keys from main object\r\n        let issueKeys = Object.keys(AssociativeData.dataMapEq.Issue);\r\n        //variable to store all data\r\n        let data = [];\r\n        issueKeys.map((key) => {\r\n            //generating data for fixed key\r\n            AssociativeData.dataMapEq.Issue[key].map((issue_obj) => {\r\n                if (issue_obj.attribute_name != \"\") {\r\n                    //creating object with required values  \r\n                    data.push({\r\n                        \"startDate\": issue_obj.from_route_chainage,\r\n                        \"endDate\": issue_obj.to_route_chainage,\r\n                        \"taskName\": issue_obj.class_name,\r\n                        \"type\": issue_obj.refObj.Type,\r\n                        \"status\": \"KILLED\",\r\n                        \"attrs\": [{\r\n                            \"name\": issue_obj.attribute_name + \": \",\r\n                            \"value\": issue_obj.attribute_value + \" \" + issue_obj.attribute_uom\r\n                        },\r\n                        {\r\n                            \"name\": \"Ref: \",\r\n                            \"value\": issue_obj.refObj.ID\r\n                        }\r\n                        ],\r\n                        \"hdl\": issue_obj.refObj.Hdl,\r\n                    });\r\n                }\r\n            });\r\n        });\r\n\r\n        //getting y keys from main object\r\n        let valueKeys = Object.keys(AssociativeData.dataMapEq.Value);\r\n        //variable to store all data\r\n        valueKeys.map((key) => {\r\n            //generating data for fixed key\r\n            AssociativeData.dataMapEq.Value[key].map((value_obj) => {\r\n                if (value_obj.attribute_name != \"\") {\r\n                    //creating object with required values  \r\n                    data.push({\r\n                        \"startDate\": value_obj.from_route_chainage,\r\n                        \"endDate\": value_obj.to_route_chainage,\r\n                        \"taskName\": value_obj.class_name,\r\n                        \"status\": \"RUNNING\",\r\n                        \"attrs\": [{\r\n                            \"name\": value_obj.attribute_name + \": \",\r\n                            \"value\": value_obj.attribute_value + \" \" + value_obj.attribute_uom\r\n                        },\r\n                        {\r\n                            \"name\": \"Ref: \",\r\n                            \"value\": value_obj.refObj.ID\r\n                        }\r\n                        ],\r\n                        \"hdl\": value_obj.refObj.Hdl,\r\n                    });\r\n                }\r\n            });\r\n        });\r\n        //set generated associative data to state\r\n        setAss_ganttData(data);\r\n\r\n        var taskStatus = {\r\n            \"SUCCEEDED\": \"bar\",\r\n            \"FAILED\": \"bar-failed\",\r\n            \"RUNNING\": \"bar-running\",\r\n            \"KILLED\": \"bar-killed\"\r\n        };\r\n        var taskNames = [...issueKeys, ...valueKeys];\r\n        var format = \"%H:%M\";\r\n        var gantt1 = window.d3.gantt(\"associate_gantt\", data, onClickGanttItem).taskTypes(taskNames).taskStatus(taskStatus).tickFormat(format);\r\n        gantt1(data);\r\n    };\r\n\r\n    const generateMapData = (data) => {\r\n        // console.log(JSON.stringify(data))\r\n        let mapObj = {\r\n            \"optimizeWaypoints\": false,\r\n            \"travelMode\": \"DRIVING\"\r\n        };\r\n        let waypoints = [];\r\n        {\r\n            data.map((item, index) => {\r\n                if (index == 0) {\r\n                    mapObj.origin = {\r\n                        \"lat\": item.lat,\r\n                        \"lng\": item.lng\r\n                    }\r\n                }\r\n                else if (index == (data.length - 1)) {\r\n                    mapObj.destination = {\r\n                        \"lat\": item.lat,\r\n                        \"lng\": item.lng\r\n                    }\r\n                    mapObj.waypoints = waypoints;\r\n                }\r\n                else {\r\n                    waypoints.push({\r\n                        \"location\": {\r\n                            \"lat\": item.lat,\r\n                            \"lng\": item.lng\r\n                        },\r\n                        \"stopover\": true\r\n                    })\r\n                }\r\n            })\r\n        }\r\n        // console.log(\"mapObj ------->\"+JSON.stringify(mapObj));\r\n        window.InitializeMap(mapObj);\r\n    };\r\n\r\n    const mapErrorCallback = (is) => {\r\n        setIsMapError(is);\r\n    }\r\n    const searchClicked = (keyword) => {\r\n        setShowData(false);\r\n        setAttributeData([]);\r\n        setdocumentData([]);\r\n        doApi(keyword);\r\n    }\r\n\r\n    useEffect(() => {\r\n        // window.mapErrorCallback = mapErrorCallback;\r\n    }, []);\r\n    return (\r\n        <div>\r\n            <NavBar showLogoutButton={true} showSearch={true} onClickSearch={searchClicked} ></NavBar>\r\n            {isLoading ?\r\n                <div className=\"popUpContainer\">\r\n                    <div className=\"loader\"></div>\r\n                </div>\r\n                :\r\n                \"\"\r\n            }\r\n            {isAttrLoading ?\r\n                <div className=\"popUpContainer\">\r\n                    <div className=\"loader\"></div>\r\n                </div>\r\n                : \"\"}\r\n\r\n            {showData ?\r\n                <div className=\"relative\">\r\n                    <svg style={{ height: 0, position: \"absolute\" }}>\r\n                        <defs>\r\n                            <linearGradient id=\"red\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"0%\">\r\n                                <stop offset=\"0%\" style={{ stopColor: \"#fd3c3c\", stopOpacity: 1 }} />\r\n                                <stop offset=\"100%\" style={{ stopColor: \"#dc281e\", stopOpacity: 1 }} />\r\n                            </linearGradient>\r\n                            <linearGradient id=\"green\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"0%\">\r\n                                <stop offset=\"0%\" style={{ stopColor: \"#7bdb06\", stopOpacity: 1 }} />\r\n                                <stop offset=\"100%\" style={{ stopColor: \"#36ac00\", stopOpacity: 1 }} />\r\n                            </linearGradient>\r\n                            <linearGradient id=\"blue\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"0%\">\r\n                                <stop offset=\"0%\" style={{ stopColor: \"#00c6ff\", stopOpacity: 1 }} />\r\n                                <stop offset=\"100%\" style={{ stopColor: \"#0072ff\", stopOpacity: 1 }} />\r\n                            </linearGradient>\r\n                            <linearGradient id=\"orange\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"0%\">\r\n                                <stop offset=\"0%\" style={{ stopColor: \"#fe8c00\", stopOpacity: 1 }} />\r\n                                <stop offset=\"100%\" style={{ stopColor: \"#f83600\", stopOpacity: 1 }} />\r\n                            </linearGradient>\r\n                        </defs>\r\n                    </svg>\r\n                    <div className=\"flex\">\r\n                        <div className=\"w-1/4 pb-5\">\r\n                            <div id=\"dvMap\" className={isMapError ? \"opacity-25\" : \"opacity-100 min-h-full\"}></div>\r\n                            {isMapError ?\r\n                                <div className=\"min-h-full mx-auto border-dashed border border-gray-600 relative mb-5\">\r\n                                    <div className=\"centerItem\">\r\n                                        <img className=\"attr_chat mx-auto\" draggable={false} src={map} />\r\n                                        <p className=\"text-center mt-3 text-purple-800\">Invalid map data</p>\r\n                                    </div>\r\n                                </div>\r\n                                :\r\n                                \"\"\r\n                            }\r\n                        </div>\r\n                        <div className=\"w-3/4 p-5\">\r\n                            {/* gantt chat */}\r\n\r\n                            <div id=\"gantt\" className={isGanntHaveData ? \"block\" : \"hidden\"} style={{ minHeight: \"130px\" }}></div>\r\n                            {isGanntHaveData\r\n                                ? \"\"\r\n                                :\r\n                                <div className=\"h-64 mx-auto border-dashed border border-gray-600 relative mb-5\">\r\n                                    <div className=\"centerItem\">\r\n                                        <img className=\"attr_chat mx-auto\" draggable={false} src={chat} />\r\n                                        <p className=\"text-center mt-3 text-purple-800\">No fixed and refrence data found</p>\r\n                                    </div>\r\n                                </div>\r\n                            }\r\n                            {/* associate_gantt chat*/}\r\n                            <div id=\"associate_gantt\" className={isAssociateGanntHaveData ? \"block\" : \"hidden\"} style={{ height: \"200px\" }}></div>\r\n                            {isAssociateGanntHaveData\r\n                                ? \"\"\r\n                                :\r\n                                <div className=\"h-64 mx-auto border-dashed border border-gray-600 relative mb-5\">\r\n                                    <div className=\"centerItem\">\r\n                                        <img className=\"attr_chat mx-auto\" draggable={false} src={chat} />\r\n                                        <p className=\"text-center mt-3 text-purple-800\">No associatives data found</p>\r\n                                    </div>\r\n                                </div>\r\n                            }\r\n                            <div className=\"grid grid-cols-2 gap-4\">\r\n                                {/* attribute */}\r\n                                {attributeData != undefined && attributeData != \"\"\r\n                                    ?\r\n                                    <div>\r\n                                            {/* <p className=\"text-xl font-bold mb-3\">Attributes</p> */}\r\n                                            <Accordion className=\"border-0\" preExpanded={[\"attributes\"]} >\r\n                                                <AccordionItem className=\"shadow-md mb-3\" uuid=\"attributes\"\r\n                                                // key={item.Latitude}\r\n                                                >\r\n                                                    <AccordionItemHeading className=\"bg-gray-400 p-2\">\r\n                                                        <AccordionItemButton className=\"w-full border-none outline-none focus:border-0 inline-flex\">\r\n                                                            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"feather feather-arrow-right\"><line x1=\"5\" y1=\"12\" x2=\"19\" y2=\"12\"></line><polyline points=\"12 5 19 12 12 19\"></polyline></svg>\r\n                                                        &emsp;\r\n                                                        {/* {arrSplittedValue[index]} */}\r\n                                                        Attributes\r\n                                                    </AccordionItemButton>\r\n                                                    </AccordionItemHeading>\r\n                                                    <AccordionItemPanel className=\"h-56 overflow-y-auto\">\r\n                                                        <table class=\"table-auto w-full\">\r\n                                                            <tbody>\r\n                                                                {Object.keys(attributeData).map((key) => {\r\n                                                                    return <tr>\r\n                                                                        <td class=\"border px-4 py-2\">{key}</td>\r\n                                                                        <td class=\"border px-4 py-2\">{attributeData[key]}</td>\r\n                                                                    </tr>\r\n                                                                })}\r\n                                                            </tbody>\r\n                                                        </table>\r\n                                                    </AccordionItemPanel>\r\n                                                </AccordionItem>\r\n                                            </Accordion>\r\n                                    </div>\r\n                                    :\r\n                                    <div className=\"h-64 border-dashed border border-gray-600 relative\">\r\n                                        <div className=\"centerItem\">\r\n                                            <img className=\"attr_chat mx-auto\" draggable={false} src={noDataAttribute} />\r\n                                            <p className=\"text-center mt-3 text-purple-800\">No attributes data found</p>\r\n                                        </div>\r\n                                    </div>\r\n                                }\r\n                                {/* document link data */}\r\n                                {documentData != undefined && documentData.length > 0\r\n                                    ?\r\n                                    <div>\r\n                                            {/* <p className=\"text-xl font-bold mb-3\">Attributes</p> */}\r\n                                            <Accordion className=\"border-0\" preExpanded={[\"doc\"]}>\r\n                                                <AccordionItem className=\"shadow-md mb-3\" uuid=\"doc\"\r\n                                                // key={item.Latitude}\r\n                                                >\r\n                                                    <AccordionItemHeading className=\"bg-gray-400 p-2\">\r\n                                                        <AccordionItemButton className=\"w-full border-none outline-none focus:border-0 inline-flex\">\r\n                                                            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"feather feather-arrow-right\"><line x1=\"5\" y1=\"12\" x2=\"19\" y2=\"12\"></line><polyline points=\"12 5 19 12 12 19\"></polyline></svg>\r\n                                                        &emsp;\r\n                                                        {/* {arrSplittedValue[index]} */}\r\n                                                        Document Links\r\n                                                    </AccordionItemButton>\r\n                                                    </AccordionItemHeading>\r\n                                                    <AccordionItemPanel className=\"h-56 overflow-y-auto\">\r\n                                                        <table class=\"table-auto w-full\">\r\n                                                            <tbody>\r\n                                                                {documentData.map((item) => {\r\n                                                                    return <tr>\r\n                                                                        <td class=\"border px-4 py-2\">{item.name}</td>\r\n                                                                        <td class=\"border px-4 py-2\">{item.class}</td>\r\n                                                                        <td class=\"border px-4 py-2\" >\r\n                                                                            <a href={item.link} target=\"_blank\">\r\n                                                                                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"17\" height=\"17\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"feather feather-link\"><path d=\"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71\"></path><path d=\"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71\"></path></svg>\r\n                                                                            </a>\r\n                                                                        </td>\r\n                                                                    </tr>\r\n                                                                })}\r\n                                                            </tbody>\r\n                                                        </table>\r\n                                                    </AccordionItemPanel>\r\n                                                </AccordionItem>\r\n                                            </Accordion>\r\n                                    </div>\r\n                                    :\r\n                                    <div className=\"h-64 border-dashed border border-gray-600 relative\">\r\n                                        <div className=\"centerItem\">\r\n                                            <img className=\"attr_chat mx-auto\" draggable={false} src={noDataAttribute} />\r\n                                            <p className=\"text-center mt-3 text-purple-800\">No documents data found</p>\r\n                                        </div>\r\n                                    </div>\r\n                                }\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                :\r\n                <div className=\"centerItem\">\r\n                    <img draggable={false} width={300} src={search} />\r\n                    <p className=\"text-center mt-3 text-purple-800\">Search to show the data here</p>\r\n                </div>\r\n            }\r\n\r\n            {isError ?\r\n                <div className=\"centerItem\">\r\n                    <img draggable={false} width={300} src={bug} />\r\n                    <p className=\"text-center mt-3 text-purple-800\">Something went wrong. Please try again!!</p>\r\n                </div>\r\n                : \"\"}\r\n            {/* loader */}\r\n            {/* searchBar */}\r\n            {/* map */}\r\n\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default LinearAsset;","import React from 'react';\r\nimport LoginScreen from './screens/LoginScreen';\r\nimport HomeScreen from './screens/HomeScreen';\r\nimport LiveView from './screens/LiveView';\r\nimport LiveToMap from './screens/LiveToMap';\r\nimport LiveToShape from './screens/LiveToShape';\r\nimport LiveToShape_v2 from './screens/LiveToShape_v2';\r\n\r\nimport esriMapPOC from './screens/ESRIMapPOC';\r\nimport Poc from './screens/Poc';\r\nimport \"./App.css\";\r\nimport { BrowserRouter as Router, Route } from \"react-router-dom\";\r\nimport LinearAsset from \"./screens/LinearAsset\";\r\n\r\n\r\nfunction App() {\r\n  return (\r\n    <div>\r\n      <Router>\r\n        <Route exact path=\"/\" component={LoginScreen} />\r\n        <Route exact path=\"/home\" component={HomeScreen} />\r\n        <Route exact path=\"/liveView\" component={LiveView} />\r\n        <Route exact path=\"/poc\" component={Poc} />\r\n        <Route exact path=\"/linearAsset\" component={LinearAsset} />\r\n        <Route exact path=\"/liveview2map\" component={LiveToMap} />\r\n        <Route exact path=\"/l2sv1\" component={LiveToShape} />\r\n        <Route exact path=\"/l2sv2\" component={LiveToShape_v2} />\r\n        <Route exact path=\"/esriMapPOC\" component={esriMapPOC} />\r\n      </Router>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n","module.exports = __webpack_public_path__ + \"static/media/search.0f7fe590.svg\";","module.exports = __webpack_public_path__ + \"static/media/map.a856e094.svg\";","module.exports = __webpack_public_path__ + \"static/media/noDataAttribute.cb61ac4f.svg\";","module.exports = __webpack_public_path__ + \"static/media/gantt_chat.dd2288fc.svg\";","module.exports = __webpack_public_path__ + \"static/media/bug.9062dc5c.svg\";"],"sourceRoot":""}