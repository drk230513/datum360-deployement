(this.webpackJsonpdatum360=this.webpackJsonpdatum360||[]).push([[0],{10:function(e,t,a){e.exports=a.p+"static/media/search.0f7fe590.svg"},103:function(e,t,a){},104:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(26),c=a.n(o),l=a(1),s=a(7),i=function(e){var t=Object(s.e)();Object(n.useEffect)((function(){if("/"!=window.location.pathname){var e=localStorage.getItem("b_token"),a=localStorage.getItem("redirectPath");if(null==e){var n=window.location.href.split("/");localStorage.setItem("redirectPath",n[n.length-1]),t.push("/")}else null!=a&&(t.push(a),localStorage.removeItem("redirectPath"))}}),[]);return r.a.createElement("nav",{className:"flex items-center justify-between flex-wrap bg-purple-900  p-6"},r.a.createElement("div",{className:"flex items-center flex-shrink-0 text-black mr-6"},r.a.createElement("img",{alt:"Logo",className:"w-1/2",src:"https://www.datum360.com/assets/img/logo.png"})),r.a.createElement("div",{className:"block lg:hidden bg-mediaquery"},r.a.createElement("button",{className:"flex items-center px-3 py-2 border rounded text-teal-200 border-teal-400 hover:text-white hover:border-white"},r.a.createElement("svg",{className:"fill-current h-3 w-3",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("title",null,"Menu"),r.a.createElement("path",{d:"M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0v-2z"})))),r.a.createElement("div",{className:"w-full block flex-grow lg:flex lg:items-center lg:w-auto bg-mediaquery"},r.a.createElement("div",{className:"text-sm lg:flex-grow"}),r.a.createElement("div",{className:e.showSearch?"relative mx-auto text-gray-600 mr-3":"hidden"},r.a.createElement("input",{id:"search",className:"border-2 bg-gray-300 bg-white h-10 px-5 pr-10 rounded-lg text-sm focus:outline-none",type:"search",name:"search",placeholder:"Enter you tag to search",defaultValue:""}),r.a.createElement("button",{type:"submit",className:"absolute right-0 top-0 mt-5 mr-4 r-5px t-n7px focus:outline-none",onClick:function(t){""!=document.getElementById("search").value&&e.onClickSearch(document.getElementById("search").value)}},r.a.createElement("svg",{className:"text-gray-600 h-4 w-4 fill-current",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",version:"1.1",id:"Capa_1",x:"0px",y:"0px",viewBox:"0 0 56.966 56.966",style:{enableBackground:"new 0 0 56.966 56.966"},xmlSpace:"preserve",width:"512px",height:"512px"},r.a.createElement("path",{d:"M55.146,51.887L41.588,37.786c3.486-4.144,5.396-9.358,5.396-14.786c0-12.682-10.318-23-23-23s-23,10.318-23,23  s10.318,23,23,23c4.761,0,9.298-1.436,13.177-4.162l13.661,14.208c0.571,0.593,1.339,0.92,2.162,0.92  c0.779,0,1.518-0.297,2.079-0.837C56.255,54.982,56.293,53.08,55.146,51.887z M23.984,6c9.374,0,17,7.626,17,17s-7.626,17-17,17  s-17-7.626-17-17S14.61,6,23.984,6z"})))),r.a.createElement("div",{className:"".concat(e.showLogoutButton?"":"hidden")},r.a.createElement("button",{className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded inline-flex items-center mr-3",onClick:function(){return t.push("/home")}},r.a.createElement("span",null,"Home"))),r.a.createElement("div",{className:"".concat(e.showLogoutButton?"":"hidden")},r.a.createElement("button",{className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded inline-flex items-center mr-3",onClick:function(){return t.push("/search")}},r.a.createElement("span",null,"Search"))),r.a.createElement("div",{className:"".concat(e.showLogoutButton?"":"hidden")},r.a.createElement("button",{className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded inline-flex items-center mr-3",onClick:function(){return t.push("/linearAsset")}},r.a.createElement("span",null,"Linear Asset"))),r.a.createElement("div",{className:"".concat(e.showLogoutButton?"":"hidden")},r.a.createElement("button",{className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded inline-flex items-center mr-3",onClick:function(){return t.push("/liveView")}},r.a.createElement("span",null,"Live View"))),r.a.createElement("div",{className:"".concat(e.showLogoutButton?"":"hidden")},r.a.createElement("button",{className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded inline-flex items-center mr-3",onClick:function(){return t.push("/liveView_Table")}},r.a.createElement("span",null,"LiveView Table"))),r.a.createElement("div",{className:"".concat(e.showLogoutButton?"":"hidden")},r.a.createElement("button",{className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded inline-flex items-center mr-3",onClick:function(){return t.push("/liveview2map")}},r.a.createElement("span",null,"LiveView to map"))),r.a.createElement("div",{className:"".concat(e.showLogoutButton?"":"hidden")},r.a.createElement("button",{className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded inline-flex items-center mr-3",onClick:function(){return t.push("/liveview2link")}},r.a.createElement("span",null,"LiveView to link"))),r.a.createElement("div",{className:"".concat(e.showLogoutButton?"":"hidden")},r.a.createElement("button",{className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded inline-flex items-center mr-3",onClick:function(){return t.push("/l2sv1")}},r.a.createElement("span",null,"L2sv1"))),r.a.createElement("div",{className:"".concat(e.showLogoutButton?"":"hidden")},r.a.createElement("button",{className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded inline-flex items-center mr-3",onClick:function(){return t.push("/l2sv2")}},r.a.createElement("span",null,"L2sv2"))),r.a.createElement("div",{className:"".concat(e.showLogoutButton?"":"hidden")},r.a.createElement("button",{className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded inline-flex items-center",onClick:function(){return localStorage.clear(),void t.push("/")}},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-log-out"},r.a.createElement("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),r.a.createElement("polyline",{points:"16 17 21 12 16 7"}),r.a.createElement("line",{x1:"21",y1:"12",x2:"9",y2:"12"})),r.a.createElement("span",null,"Logout")))))},u=a(29),m=a(3),p=a.n(m),d=a(9),f=a(52),h=a(53),g=a(18);g.defaults.timeout=1e4;localStorage.getItem("prefixUrl");var b=function(){function e(){Object(f.a)(this,e),this.loginDetails={user:"",pass:""},this.attrGroups={}}return Object(h.a)(e,null,[{key:"warmUp",value:function(){var e=Object(d.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getToken();case 2:return e.next=4,this.contextFields("TAGGED_ITEM");case 4:return e.next=6,this.getAttributeGroups();case 6:this.attrGroups=e.sent;case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setUserPass",value:function(e,t){this.loginDetails={user:e,pass:t}}},{key:"login",value:function(){var e=Object(d.a)(p.a.mark((function e(){var t,a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("inside login ---------\x3e"),e.next=3,this.getToken();case 3:return t=e.sent,console.log(t),e.next=7,this.searchObject("TAGGED_ITEM","Route B to C");case 7:return a=e.sent,e.next=10,this.objectAssociations("TAGGED_ITEM",a.data[0].hdl,"EQUIPMENT_ITEM");case 10:return n=e.sent,e.next=13,this.generateDataMapEQ(n,"TAGGED_ITEM");case 13:e.sent,console.log("done");case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"generateDataMapEQ",value:function(){var e=Object(d.a)(p.a.mark((function e(t,a,n){var r,o,c,l,s,i,m,d,f,h,g,b,v,E,y;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("inside generateDataMapEQ ---------\x3e dataMap "+t+" route_length "+n),r=["Issue","Value"],o={},c=100/Number(n),l=Object(u.a)(t.items),e.prev=5,l.s();case 7:if((s=l.n()).done){e.next=25;break}return i=s.value,e.next=11,this.objectByHdl("EQUIPMENT_ITEM",i.Hdl);case 11:m=e.sent,d=this.helperAttrByName(m.attrs,"Class Name").value,f=this.helperAttrByName(m.attrs,"From Route Chainage"),h=this.helperAttrByName(m.attrs,"To Route Chainage"),g=this.helperAttrByName(m.attrs,"Linear Asset Attribute Name").value,b=this.helperAttrByName(m.attrs,"Linear Asset Attribute Value").value,v=this.helperAttrByName(m.attrs,"Linear Asset Value UoM").value,E=this.helperAttrByName(m.attrs,"DS Flag").value,(y={assocId:i.id,from_route_chainage:Number(f.value),to_route_chainage:Number(h.value),class_name:d,attribute_name:g,attribute_value:b,attribute_uom:v,ds_flag:E,refObj:i}).stylePlace=c*y.from_route_chainage,y.styleWidth=c*y.to_route_chainage-y.stylePlace,-1!=r.indexOf(E)&&(o[y.ds_flag]||(o[y.ds_flag]={}),o[y.ds_flag][y.class_name]||(o[y.ds_flag][y.class_name]=[]),o[y.ds_flag][y.class_name].push(y));case 23:e.next=7;break;case 25:e.next=30;break;case 27:e.prev=27,e.t0=e.catch(5),l.e(e.t0);case 30:return e.prev=30,l.f(),e.finish(30);case 33:return e.abrupt("return",o);case 34:case"end":return e.stop()}}),e,this,[[5,27,30,33]])})));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"generateDataMap",value:function(){var e=Object(d.a)(p.a.mark((function e(t,a){var n,r,o,c,l,s,i,m,d;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("inside generateDataMap ---------\x3e dataMap "+t+" objectType "+a),n={fixed:[],ref:[]},r=Object(u.a)(t.data),e.prev=3,r.s();case 5:if((o=r.n()).done){e.next=16;break}return c=o.value,l=["Isolator","AST Booster","Section Insulator"],e.next=10,this.objectByHdl(a,c.hdl);case 10:s=e.sent,i=this.helperAttrByName(s.attrs,"Class Name").value,(m=this.helperAttrByName(s.attrs,"Route Chainage"))&&(d={objId:c.objId,class_name:i,route_chainage:Number(m.value),route_chainage_uom:m.uom,hdl:c.hdl,refObj:s},-1!=l.indexOf(i)?n.fixed.push(d):n.ref.push(d));case 14:e.next=5;break;case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(3),r.e(e.t0);case 21:return e.prev=21,r.f(),e.finish(21);case 24:return n.fixed=n.fixed.sort((function(e,t){return e.route_chainage>t.route_chainage?1:-1})),n.ref=n.ref.sort((function(e,t){return e.route_chainage>t.route_chainage?1:-1})),e.abrupt("return",n);case 27:case"end":return e.stop()}}),e,this,[[3,18,21,24]])})));return function(t,a){return e.apply(this,arguments)}}()},{key:"getRouteObj",value:function(){var e=Object(d.a)(p.a.mark((function e(t){var a,n,r,o,c,l,s,i,u,m;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("inside getRouteObj --------\x3e searchTerm "+t),e.next=3,this.searchObject("TAGGED_ITEM",t);case 3:return a=e.sent,e.next=6,this.objectByHdl("TAGGED_ITEM",a.data[0].hdl);case 6:return n=e.sent,e.next=9,this.searchObjectWithAttr("TAGGED_ITEM","Route",t);case 9:return r=e.sent,e.next=12,this.generateDataMap(r,"TAGGED_ITEM");case 12:return o=e.sent,e.next=15,this.objectAssociations("TAGGED_ITEM",a.data[0].hdl,"EQUIPMENT_ITEM");case 15:return c=e.sent,l={route_length:Number(this.helperAttrByName(n.attrs,"Length").value),route_uom:this.helperAttrByName(n.attrs,"Length").uom,from_node:this.helperAttrByName(n.attrs,"From Reference Node").value,to_node:this.helperAttrByName(n.attrs,"To Reference Node").value,dataMap:o},s=100/Number(l.route_length),e.next=20,this.generateDataMapEQ(c,"TAGGED_ITEM",l.route_length);case 20:for(i=e.sent,l.dataMapEq=i,u=0;u<l.dataMap.fixed.length;u++)l.dataMap.fixed[u].stylePlace=s*l.dataMap.fixed[u].route_chainage;for(m=0;m<l.dataMap.ref.length;m++)l.dataMap.ref[m].stylePlace=s*l.dataMap.ref[m].route_chainage;return console.log("routeInfo  ------------\x3e "+JSON.stringify(l)),e.abrupt("return",l);case 26:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"helperAttrByName",value:function(e,t){for(var a in e)if(e.hasOwnProperty(a)){var n=e[a];if(n.name==t)return n}return null}},{key:"getToken",value:function(){var e=Object(d.a)(p.a.mark((function e(t,a,n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",g.request({url:"/oauth2/token",method:"post",baseURL:"https://"+n+".acl360.io",auth:{username:t,password:a},data:{grant_type:"client_credentials",service_url:"https://"+n+".pim360.io/"}}).then((function(e){return g.defaults.headers.common={Authorization:"Bearer "+e.data.access_token},e})));case 1:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"getClsToken",value:function(){var e=Object(d.a)(p.a.mark((function e(t,a,n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",g.request({url:"/oauth2/token",method:"post",baseURL:"https://"+n+".acl360.io",auth:{username:t,password:a},data:{grant_type:"client_credentials",service_url:"https://"+n+".cls360.io/"}}).then((function(e){return g.defaults.headers.common={Authorization:"Bearer "+e.data.access_token},e})));case 1:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"getRequest",value:function(){var e=Object(d.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",g.request({url:t,method:"get",baseURL:"https://".concat(localStorage.getItem("prefixUrl"),".pim360.io/")}).then((function(e){return e.data})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"postRequest",value:function(){var e=Object(d.a)(p.a.mark((function e(t,a){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",g.request({url:t,method:"post",baseURL:"https://".concat(localStorage.getItem("prefixUrl"),".pim360.io/"),data:a}).then((function(e){return console.log("res ---------",e),e.data})));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"contextFields",value:function(){var e=Object(d.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("inside contextFields ------------\x3e "+t),console.log(this.contextCache),this.contextCache||(this.contextCache={}),this.contextCache[t]){e.next=7;break}return e.next=6,this.getRequest("api/context/fields/"+t);case 6:this.contextCache[t]=e.sent;case 7:return e.abrupt("return",this.contextCache[t]);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"objectByHdl",value:function(){var e=Object(d.a)(p.a.mark((function e(t,a){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.getRequest("api/objects/".concat(t,"/").concat(a)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"getAttributeGroups",value:function(){var e=Object(d.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.getRequest("api/objects/attributegroups"));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"objectAssociations",value:function(){var e=Object(d.a)(p.a.mark((function e(t,a,n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.getRequest("api/associations?type=".concat(t,"&hdl=").concat(a,"&assoc=").concat(n,"&skip=0")));case 1:case"end":return e.stop()}}),e,this)})));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"searchObject",value:function(){var e=Object(d.a)(p.a.mark((function e(t,a){var n,r,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.contextFields(t);case 2:return n=e.sent,r={type:"TAGGED_ITEM",eic:"",filter:{logical:"AND",items:[{handle:n.ID.Hdl,operator:"$regex-l",value:a,caseSensitive:!1,excludeUoM:!1,regex:!1}]},fields:[n.ID.Hdl,n.CLASS.Hdl,n.DESCRIPTION.Hdl]},e.next=6,this.postRequest("api/queries",r);case 6:return o=e.sent,e.abrupt("return",this.getRequest("api".concat(o.resulturl)));case 8:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"searchObjectWithAttr",value:function(){var e=Object(d.a)(p.a.mark((function e(t,a,n){var r,o,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("inside searchObjectWithAttr ----------\x3e objectType "+t+" attrName "+a+" attrValue "+n),e.next=3,this.contextFields(a);case 3:return e.sent,e.next=6,this.contextFields(t);case 6:return r=e.sent,o={type:"TAGGED_ITEM",eic:"",filter:{logical:"AND",items:[{operator:"$regex-l",value:n,handle:"TMiQuiViT1OEjp8uEeLy_Q",caseSensitive:!1,excludeUoM:!1,regex:!1}]},fields:[r.ID.Hdl,r.CLASS.Hdl,r.DESCRIPTION.Hdl]},e.next=10,this.postRequest("api/queries",o);case 10:return c=e.sent,e.abrupt("return",this.getRequest("api".concat(c.resulturl)));case 12:case"end":return e.stop()}}),e,this)})));return function(t,a,n){return e.apply(this,arguments)}}()}]),e}();var v=function(e){var t=Object(s.e)(),a=Object(n.useState)(""),o=Object(l.a)(a,2),c=o[0],u=o[1],m=Object(n.useState)(""),p=Object(l.a)(m,2),d=p[0],f=p[1],h=Object(n.useState)(""),g=Object(l.a)(h,2),v=g[0],E=g[1],y=Object(n.useState)(!1),w=Object(l.a)(y,2),x=w[0],N=w[1],O=Object(n.useState)(!1),j=Object(l.a)(O,2),k=j[0],S=j[1],_=Object(n.useState)(!1),A=Object(l.a)(_,2),L=A[0],I=A[1],T=Object(n.useState)(),C=Object(l.a)(T,2),D=C[0],M=C[1],G=Object(n.useState)(),P=Object(l.a)(G,2),z=P[0],U=P[1],B=Object(n.useState)(!1),F=Object(l.a)(B,2),R=F[0],H=F[1],V="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:border-purple-900",J="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none border-red-500";return r.a.createElement(r.a.Fragment,null,r.a.createElement(i,{showLogoutButton:!1}),R?r.a.createElement("div",{className:"popUpContainer"},r.a.createElement("div",{className:"loader"})):"",r.a.createElement("div",{className:"w-full max-w-sm login-container mt-5"},r.a.createElement("form",{className:"bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4"},r.a.createElement("div",{className:"mb-4"},r.a.createElement("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"username"},"Username"),r.a.createElement("input",{className:x?J:V,id:"username",type:"text",value:c,placeholder:"Enter your username",onChange:function(e){return u(e.target.value)}})),r.a.createElement("div",{className:"mb-4"},r.a.createElement("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"password"},"Password"),r.a.createElement("input",{className:k?J:V,value:d,id:"password",type:"password",placeholder:"Enter your password",onChange:function(e){return f(e.target.value)}})),r.a.createElement("div",{className:"mb-3"},r.a.createElement("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"username"},"Prefix URL"),r.a.createElement("input",{className:L?J:V,value:v,id:"prefixUrl",type:"text",placeholder:"Enter your prefix url",onChange:function(e){return E(e.target.value)}}),r.a.createElement("span",{className:"text-gray-700 text-xs"},"Note: Its is 1st portion of your domain name (also known as subdomain), or its called as scope of pim360.")),r.a.createElement("p",{className:"text-center text-red-500"},D?z:""),r.a.createElement("div",{className:"flex"},r.a.createElement("button",{className:"mt-3 bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline m-auto",type:"button",onClick:function(){H(!0),M(!1),N(!1),S(!1),I(!1),U(""),void 0!==c&&c.length>0&&d.length>0&&v.length>0?(localStorage.setItem("prefixUrl",v),localStorage.setItem("userName",c),localStorage.setItem("password",d),b.getToken(c,d,v).then((function(e){""!=e.data.access_token&&(H(!1),localStorage.setItem("b_token",e.data.token_type+" "+e.data.access_token),t.push("/l2sv2"))})).catch((function(e){M(!0),U("Something went wrong!!!"),H(!1)}))):(0==c.length&&N(!0),0==d.length&&S(!0),0==v.length&&I(!0),M(!0),U("Please fill all the fields"),H(!1))}},"Proceed"))),r.a.createElement("br",null),r.a.createElement("p",{className:"text-center"},"\xa9 Datum360 Limited")))},E=a(15),y=a.n(E),w=a(30),x=function(e,t){a(102);if(e){if(e.length>0){e.forEach((function(t,a){Object.keys(t).forEach((function(n){var r=t[n],o=n.replace(/\s+/g,"_");delete e[a][n],e[a][o]=r}))}));var n=[];return e.length>0&&e.map((function(e,a){var r=Object.keys(e).map((function(t){return"<div>"+t+" - "+e[t]+"<br></div>"})).join(""),o={Placemark:{name:t[a],description:"<![CDATA[".concat(r,"]]>"),Point:{coordinates:"".concat(e.Longitude,",").concat(e.Latitude)}}};n.push(o)})),function(e){for(var t="",a=(e=e.replace(/(>)\s*(<)(\/*)/g,"$1\n$2$3").replace(/ *(.*) +\n/g,"$1\n").replace(/(<.+>)(.+\n)/g,"$1\n$2")).split("\n"),n=0,r="other",o={"single->single":0,"single->closing":-1,"single->opening":0,"single->other":0,"closing->single":0,"closing->closing":-1,"closing->opening":0,"closing->other":0,"opening->single":1,"opening->closing":0,"opening->opening":1,"opening->other":1,"other->single":0,"other->closing":-1,"other->opening":0,"other->other":0},c=0;c<a.length;c++){var l=a[c];if(l.match(/\s*<\?xml/))t+=l+"\n";else{var s=Boolean(l.match(/<.+\/>/)),i=Boolean(l.match(/<\/.+>/)),u=Boolean(l.match(/<[^!].*>/)),m=s?"single":i?"closing":u?"opening":"other",p=r+"->"+m;r=m;var d="";n+=o[p];for(var f=0;f<n;f++)d+="\t";"opening->closing"==p?t=t.substr(0,t.length-1)+l+"\n":t+=d+l+"\n"}}return t}('<?xml version="1.0" encoding="UTF-8"?><kml xmlns="http://www.opengis.net/kml/2.2" xmlns:gx="http://www.google.com/kml/ext/2.2"><Document id="1">'+function e(t){var a="";for(var n in t){if(a+=t[n]instanceof Array?"":"<"+n+">",t[n]instanceof Array)for(var r in t[n])a+="<"+n+">",a+=e(new Object(t[n][r])),a+="</"+n+">";else"object"==typeof t[n]?a+=e(new Object(t[n])):a+=t[n];a+=t[n]instanceof Array?"":"</"+n+">"}return a=a.replace(/<\/?[0-9]{1,}>/g,"")}(n)+"</Document></kml>")}return""}return""},N=a(2),O=a(16),j=a.n(O),k=function(e){var t=e.text;return r.a.createElement("div",null,r.a.createElement("img",{alt:"Marker",src:"https://res.cloudinary.com/di9ckb63k/image/upload/v1606463408/ref_1_bzw94s.png"}),t)},S=function(e){var t=Object(n.useState)(),a=Object(l.a)(t,2),o=a[0],c=a[1],s=Object(n.useState)(""),u=Object(l.a)(s,2),m=u[0],p=u[1],d=Object(n.useState)([]),f=Object(l.a)(d,2),h=f[0],g=f[1],b=Object(n.useState)(!1),v=Object(l.a)(b,2),E=v[0],O=v[1],S=Object(n.useState)([]),_=Object(l.a)(S,2),A=_[0],L=_[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(i,{showLogoutButton:!0}),E?r.a.createElement("div",{className:"popUpContainer"},r.a.createElement("div",{className:"loader"})):"",r.a.createElement("div",{className:"p-10"},r.a.createElement("div",{className:"w-full max-w"},r.a.createElement("form",{className:"bg-white rounded pt-6 pb-8 mb-4"},r.a.createElement("div",null,r.a.createElement("div",{className:"inline-block"},r.a.createElement("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"username"},"Tag Number"),r.a.createElement("input",{className:o?"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline border-red-500":"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",value:m,id:"tagNumber",type:"text",placeholder:"Enter your tag number",onChange:function(e){return p(e.target.value)}})),r.a.createElement("div",{className:"inline-block ml-5"},r.a.createElement("button",{className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded focus:outline-none m-auto",type:"button",onClick:function(){!function(){if(c(!1),null!==m&&m.length>0){O(!0);var e=[],t=0,a=m.split(",").map((function(e){return e.trim()}));L(a),a.map((function(n){var r="https://"+localStorage.getItem("prefixUrl")+".pim360.io/api/objects/TAGGED_ITEM/id/"+n,o=localStorage.getItem("b_token");return fetch(r,{headers:{Accept:"application/json",Authorization:o}}).then((function(e){return e.json()})).then((function(n){if(void 0!==n.attrs&&null!==n.attrs?e.push(n):console.log(n),(t+=1)===a.length)return O(!1),void g(e)})).catch((function(e){console.log("error --------\x3e"+e),(t+=1)===a.length&&O(!1)})),""}))}else c(!0),console.log("show error")}()}},"Submit")),r.a.createElement("div",{className:"inline-block ml-5",style:{display:h.length>0?"":"none"}},r.a.createElement("button",{onClick:function(e){e.preventDefault();var t=JSON.parse(localStorage.getItem("pre_kml_data")),a=JSON.parse(localStorage.getItem("inputsArray")),n=new File(["".concat(x(t,a))],"".concat(new Date,".kml"),{type:"text/xml;charset=utf-8"});Object(w.saveAs)(n)},class:"bg-purple-800 hover:bg-purple-900 text-white  py-2 px-4 rounded inline-flex items-center"},r.a.createElement("svg",{class:"fill-current w-4 h-4 mr-2",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},r.a.createElement("path",{d:"M13 8V2H7v6H2l8 8 8-8h-5zM0 18h20v2H0v-2z"})),r.a.createElement("span",null,"Download KML"))),r.a.createElement("div",{className:"inline-block ml-5",style:{display:h.length>0?"":"none"}},r.a.createElement("button",{onClick:function(e){e.preventDefault();var t=JSON.parse(localStorage.getItem("pre_kml_data")),a={type:"FeatureCollection",features:[]},n=(t.map((function(e){a.features.push({type:"Feature",geometry:{type:"Point"},properties:e})})),new File(["".concat(JSON.stringify(a))],"".concat(new Date,".json"),{type:"application/json;charset=utf-8"}));Object(w.saveAs)(n)},class:"bg-purple-800 hover:bg-purple-900 text-white  py-2 px-4 rounded inline-flex items-center"},r.a.createElement("svg",{class:"fill-current w-4 h-4 mr-2",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},r.a.createElement("path",{d:"M13 8V2H7v6H2l8 8 8-8h-5zM0 18h20v2H0v-2z"})),r.a.createElement("span",null,"Download JSON")))),o?r.a.createElement("p",{className:"text-red-500 pl-2 text-xs pt-1"},"Tag name is required "):"")),void 0!==h&&h.length>0&&r.a.createElement("div",null,function(){var e=[];return h.map((function(t){var a=Object.keys(t.attrs),n={};return a.map((function(e){return n[t.attrs[e].name]=t.attrs[e].value,""})),e.push(n),""})),console.log("arrNameValue -------\x3e",e),localStorage.setItem("pre_kml_data",JSON.stringify(e)),localStorage.setItem("inputsArray",JSON.stringify(A)),r.a.createElement("div",{className:"flex mb-4"},r.a.createElement("div",{className:"w-1/2 m-h-500px p-5"},e.length>0&&(e[0].hasOwnProperty("Latitude")||e[0].hasOwnProperty("LATITUDE")||e[0].hasOwnProperty("Approved Latitude"))?r.a.createElement("div",{className:"w-full h-full shadow-lg"},r.a.createElement(y.a,{bootstrapURLKeys:{key:"AIzaSyDNeF0TGdzD6PN696-ZWgdP7z9ltW0l1QY"},options:function(){return{mapTypeControl:!0}},defaultCenter:{lat:parseFloat(e[0].hasOwnProperty("Latitude")?e[0].Latitude:e[0].hasOwnProperty("LATITUDE")?e[0].LATITUDE:e[0].hasOwnProperty("Approved Latitude")?e[0]["Approved Latitude"]:0),lng:parseFloat(e[0].hasOwnProperty("Longitude")?e[0].Longitude:e[0].hasOwnProperty("LONGITUDE")?e[0].LONGITUDE:e[0].hasOwnProperty("Approved Longitude")?e[0]["Approved Longitude"]:0)},center:{lat:parseFloat(e[0].hasOwnProperty("Latitude")?e[0].Latitude:e[0].hasOwnProperty("LATITUDE")?e[0].LATITUDE:e[0].hasOwnProperty("Approved Latitude")?e[0]["Approved Latitude"]:0),lng:parseFloat(e[0].hasOwnProperty("Longitude")?e[0].Longitude:e[0].hasOwnProperty("LONGITUDE")?e[0].LONGITUDE:e[0].hasOwnProperty("Approved Longitude")?e[0]["Approved Longitude"]:0)},distanceToMouse:function(){},defaultZoom:e?18:6},e.map((function(e){return r.a.createElement(k,{lat:parseFloat(e.hasOwnProperty("Latitude")?e.Latitude:e.hasOwnProperty("LATITUDE")?e.LATITUDE:e.hasOwnProperty("Approved Latitude")?e["Approved Latitude"]:0),lng:parseFloat(e.hasOwnProperty("Longitude")?e.Longitude:e.hasOwnProperty("LONGITUDE")?e.LONGITUDE:e.hasOwnProperty("Approved Longitude")?e["Approved Longitude"]:0)})})))):r.a.createElement("div",{className:"w-full h-full shadow-lg relative"},r.a.createElement("div",{className:"centerItem"},r.a.createElement("img",{className:"attr_chat mx-auto",draggable:!1,src:j.a}),r.a.createElement("p",{className:"text-center mt-3 text-purple-800"},"Invalid map data")))),r.a.createElement("div",{className:"w-1/2 m-h-500px"},r.a.createElement("div",{className:"max-w rounded w-full shadow  p-5"},r.a.createElement("p",{className:"text-xl font-bold mb-3"},"Attributes"),r.a.createElement(N.a,{className:"border-0",allowZeroExpanded:!0,preExpanded:["attributes"]},e.map((function(e,t){return r.a.createElement(N.b,{className:"shadow-md mb-3",key:t,uuid:"attributes"},r.a.createElement(N.d,{className:"bg-gray-400 p-2"},r.a.createElement(N.c,{className:"w-full border-none outline-none focus:border-0 inline-flex"},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-arrow-right"},r.a.createElement("line",{x1:"5",y1:"12",x2:"19",y2:"12"}),r.a.createElement("polyline",{points:"12 5 19 12 12 19"})),"\u2003",A[t])),r.a.createElement(N.e,null,r.a.createElement("table",{class:"table-auto w-full"},r.a.createElement("tbody",null,Object.keys(e).map((function(t){return r.a.createElement("tr",null,r.a.createElement("td",{class:"border px-4 py-2"},t),r.a.createElement("td",{class:"border px-4 py-2"},e[t]))}))))))}))))))}()),r.a.createElement("p",{className:"text-center"},"\xa9 Datum360 Limited")))},_=a(22),A=a(4),L=a(5),I=function(e){var t=Object(n.useState)([]),a=Object(l.a)(t,2),o=a[0],c=a[1],s=Object(n.useState)([]),i=Object(l.a)(s,2),u=i[0],m=i[1],p=Object(n.useState)([]),d=Object(l.a)(p,2),f=d[0],h=d[1],g=Object(n.useState)([]),v=Object(l.a)(g,2),E=v[0],y=v[1],w=Object(n.useState)([]),x=Object(l.a)(w,2),N=x[0],O=x[1],j=Object(n.useState)({hdl:"",status:"PENDING",params:{eic_handle:"",manifest_name:"",inputfile:"",worksheets:"",object_type:"",deliverable:"",source_handle:"",classification:"",ens_name:"",terminate_attributes:"ignore"}}),k=Object(l.a)(j,2),S=k[0],_=k[1],L="mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",I="block text-sm font-medium text-gray-700",T=localStorage.getItem("userName"),C=localStorage.getItem("password"),D=localStorage.getItem("b_token"),M=localStorage.getItem("prefixUrl"),G=localStorage.getItem("b_token_cls"),P="https://".concat(M,".pim360.io/api"),z="https://".concat(M,".cls360.io/api"),U=[{value:"TAGGED_ITEM",name:"Tagged Item"},{value:"EQUIPMENT_ITEM",name:"Equipment Item"},{value:"EQUIPMENT_MODEL",name:"Equipment Model"},{value:"DOCUMENT",name:"Document"}],B=[{value:"cls",name:"CLASS"},{value:"ens",name:"ENS"}];Object(n.useEffect)((function(){R()}),[]);var F=function(){e.onClickCancel&&e.onClickCancel()},R=function(){console.log("inside getEICList ----------\x3e");var e="".concat(P,"/eic/list");fetch(e,{headers:{Accept:"application/json",Authorization:D}}).then((function(e){return e.json()})).then((function(e){if(void 0!==e&&null!==e){var t=e.rows.map((function(e){var t=Object.keys(e)[4];return void 0!=e[t]?{name:e[t],value:e.id}:null})).filter((function(e){return null!=e}));c(t)}})).catch((function(e){console.log("getEICList error --------\x3e"+e)}))},H=function(e){console.log("inside getDeliverables ----------\x3e");var t="".concat(P,"/eic/").concat(e,"/deliverables");fetch(t,{headers:{Accept:"application/json",Authorization:D}}).then((function(e){return e.json()})).then((function(e){if(void 0!==e&&null!==e){var t=Object.keys(e.Deliverables);if(null!=t.length&&t.length>0){var a=t.filter((function(e){return"length"!=e})),n=[];a.map((function(t){e.Deliverables[t].map((function(e){var t=e.ID,a=e.Hdl;n.push({name:t,value:a})}))})),m(n)}}})).catch((function(e){console.log("getDeliverables error --------\x3e"+e)}))},V=function(){console.log("inside getTimeLine ----------\x3e");var t="".concat(P,"/timeline?categories=IMPORT&offset=0&limit=200");fetch(t,{headers:{Accept:"application/json",Authorization:D}}).then((function(e){return e.json()})).then((function(t){if(void 0!==t&&null!==t){var a=Object(A.a)({},S);a.hdl=t[0].Hdl,_(a),e.onClickSubmit&&e.onClickSubmit(a)}})).catch((function(e){console.log("getTimeLine error --------\x3e"+e)}))},J=function(){console.log("inside authCls -------------\x3e "),b.getClsToken(T,C,M).then((function(e){""!=e.data.access_token&&(localStorage.setItem("b_token_cls",e.data.token_type+" "+e.data.access_token),G=localStorage.getItem("b_token_cls"),q())})).catch((function(e){console.log("authCls error-------\x3e ")}))},q=function(){console.log("inside getDomains ----------\x3e");var e="".concat(z,"/domains?pageSize=200&page=0");fetch(e,{headers:{Accept:"application/json",Authorization:G}}).then((function(e){return e.json()})).then((function(e){if(void 0!==e&&null!==e){var t=e.value.map((function(e){return{name:e.Name,value:e.Hdl}}));O(t)}})).catch((function(e){console.log("getDomains error --------\x3e"+e)}))},Z=function(e){console.log("inside getSourceNames ----------\x3e");var t="".concat(z,"/domains/").concat(e,"/classes?filter=%5BObject%20Type%5D%20cnt%20Source&pageSize=200&page=0");fetch(t,{headers:{Accept:"application/json",Authorization:G}}).then((function(e){return e.json()})).then((function(e){if(void 0!==e&&null!==e){var t=e.value.map((function(e){return{name:e.Name,value:e.Hdl}}));y(t)}})).catch((function(e){console.log("getSourceNames error --------\x3e"+e)}))},W=function(e){console.log("inside getEnsNames ----------\x3e");var t="".concat(z,"/domains/").concat(e,"/classes?filter=%5BObject%20Type%5D%20cnt%20Numbering&pageSize=200&page=0");fetch(t,{headers:{Accept:"application/json",Authorization:G}}).then((function(e){return e.json()})).then((function(e){if(void 0!==e&&null!==e){var t=e.value.map((function(e){var t=e.Name;return{name:t,value:t}}));h(t)}})).catch((function(e){console.log("getEnsNames error --------\x3e"+e)}))};return r.a.createElement("div",null,r.a.createElement("div",{style:{display:"none"},className:"modal-container"},r.a.createElement("div",{className:"modal"},r.a.createElement("div",{className:"mt-3"},r.a.createElement("label",{className:"label inline-block mr-3 w-1/4"},"Object Type"),r.a.createElement("select",{className:"select inline-block w-2/4",onChange:function(e){var t=Object(A.a)({},S);t.params.object_type=e.target.value,_(t)}},r.a.createElement("option",{value:""},"Select Object Type"),U.map((function(e){return r.a.createElement("option",{value:e.value},e.name)})))),r.a.createElement("div",{className:"mt-3"},r.a.createElement("label",{className:"label inline-block mr-3 w-1/4"},"Classification"),r.a.createElement("select",{className:"select inline-block w-2/4",onChange:function(e){var t=Object(A.a)({},S);t.params.classification=e.target.value,_(t)}},r.a.createElement("option",{value:""},"Select Classification"),B.map((function(e){return r.a.createElement("option",{value:e.value},e.name)})))),r.a.createElement("div",{className:"mt-3"},r.a.createElement("label",{className:"label inline-block mr-3 w-1/4"},"EIC"),r.a.createElement("select",{className:"select inline-block w-2/4",onChange:function(e){var t=Object(A.a)({},S);t.params.eic_handle=e.target.value,_(t),H(e.target.value)}},r.a.createElement("option",{value:""},"Select Eic"),o.map((function(e){return r.a.createElement("option",{value:e.value},e.name)})))),r.a.createElement("div",{className:"mt-3"},r.a.createElement("label",{className:"label inline-block mr-3 w-1/4"},"Deliverables"),r.a.createElement("select",{className:"select inline-block w-2/4",onChange:function(e){var t=Object(A.a)({},S);t.params.deliverable=e.target.value,_(t),J()}},r.a.createElement("option",{value:""},"Select Deliverables"),u.map((function(e){return r.a.createElement("option",{value:e.value},e.name)})))),r.a.createElement("div",{className:"mt-3"},r.a.createElement("label",{className:"label inline-block mr-3 w-1/4"},"Domains"),r.a.createElement("select",{className:"select inline-block w-2/4",onChange:function(e){Z(e.target.value),W(e.target.value)}},r.a.createElement("option",{value:""},"Select Deliverables"),N.map((function(e){return r.a.createElement("option",{value:e.value},e.name)})))),r.a.createElement("div",{className:"mt-3"},r.a.createElement("label",{className:"label inline-block mr-3 w-1/4"},"Source Name"),r.a.createElement("select",{className:"select inline-block w-2/4",onChange:function(e){var t=Object(A.a)({},S);t.params.source_handle=e.target.value,_(t)}},r.a.createElement("option",{value:""},"Select Source"),E.map((function(e){return r.a.createElement("option",{value:e.value},e.name)})))),r.a.createElement("div",{className:"mt-3"},r.a.createElement("label",{className:"label inline-block mr-3 w-1/4"},"ENS Name"),r.a.createElement("select",{className:"select inline-block w-2/4",onChange:function(e){var t=Object(A.a)({},S);t.params.ens_name=e.target.value,_(t)}},r.a.createElement("option",{value:""},"Select Deliverables"),f.map((function(e){return r.a.createElement("option",{value:e.value},e.name)})))),r.a.createElement("button",{className:"x-icon",onClick:function(){return F()}},"X"),r.a.createElement("div",null,r.a.createElement("button",{className:"mr-3",onClick:function(){return F()}},"Cancel"),r.a.createElement("button",{className:"",onClick:function(){return V()}},"Submit")))),r.a.createElement("div",{class:"fixed z-10 inset-0 overflow-y-auto"},r.a.createElement("div",{class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},r.a.createElement("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true"},r.a.createElement("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})),r.a.createElement("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"\u200b"),r.a.createElement("div",{class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},r.a.createElement("div",{class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},r.a.createElement("div",{className:"mt-3"},r.a.createElement("label",{for:"objectType",className:I},"Object Type"),r.a.createElement("select",{className:L,onChange:function(e){var t=Object(A.a)({},S);t.params.object_type=e.target.value,_(t)}},r.a.createElement("option",{value:""},"Select Object Type"),U.map((function(e){return r.a.createElement("option",{value:e.value},e.name)})))),r.a.createElement("div",{className:"mt-3"},r.a.createElement("label",{className:I},"Classification"),r.a.createElement("select",{className:L,onChange:function(e){var t=Object(A.a)({},S);t.params.classification=e.target.value,_(t)}},r.a.createElement("option",{value:""},"Select Classification"),B.map((function(e){return r.a.createElement("option",{value:e.value},e.name)})))),r.a.createElement("div",{className:"mt-3"},r.a.createElement("label",{className:I},"EIC"),r.a.createElement("select",{className:L,onChange:function(e){var t=Object(A.a)({},S);t.params.eic_handle=e.target.value,_(t),H(e.target.value)}},r.a.createElement("option",{value:""},"Select Eic"),o.map((function(e){return r.a.createElement("option",{value:e.value},e.name)})))),r.a.createElement("div",{className:"mt-3"},r.a.createElement("label",{className:I},"Deliverables"),r.a.createElement("select",{className:L,onChange:function(e){var t=Object(A.a)({},S);t.params.deliverable=e.target.value,_(t),J()}},r.a.createElement("option",{value:""},"Select Deliverables"),u.map((function(e){return r.a.createElement("option",{value:e.value},e.name)})))),r.a.createElement("div",{className:"mt-3"},r.a.createElement("label",{className:I},"Domains"),r.a.createElement("select",{className:L,onChange:function(e){Z(e.target.value),W(e.target.value)}},r.a.createElement("option",{value:""},"Select Deliverables"),N.map((function(e){return r.a.createElement("option",{value:e.value},e.name)})))),r.a.createElement("div",{className:"mt-3"},r.a.createElement("label",{className:I},"Source Name"),r.a.createElement("select",{className:L,onChange:function(e){var t=Object(A.a)({},S);t.params.source_handle=e.target.value,_(t)}},r.a.createElement("option",{value:""},"Select Source"),E.map((function(e){return r.a.createElement("option",{value:e.value},e.name)})))),r.a.createElement("div",{className:"mt-3"},r.a.createElement("label",{className:I},"ENS Name"),r.a.createElement("select",{className:L,onChange:function(e){var t=Object(A.a)({},S);t.params.ens_name=e.target.value,_(t)}},r.a.createElement("option",{value:""},"Select Deliverables"),f.map((function(e){return r.a.createElement("option",{value:e.value},e.name)}))))),r.a.createElement("div",{class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},r.a.createElement("button",{onClick:function(){return V()},type:"button",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-purple-900 text-base font-medium text-white hover:bg-purple-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm"},"Submit"),r.a.createElement("button",{onClick:function(){return F()},type:"button",class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"},"Cancel"))))))};var T=a(10),C=a.n(T),D=a(18),M=function(e){var t=e.text;return r.a.createElement("div",null,r.a.createElement("img",{alt:"Marker",src:"https://img.icons8.com/fluent/48/000000/marker-storm.png"}),t)};var G=function(e){var t=Object(n.useState)([]),a=Object(l.a)(t,2),o=a[0],c=a[1],s=Object(n.useState)(),u=Object(l.a)(s,2),m=(u[0],u[1],Object(n.useState)([])),p=Object(l.a)(m,2),d=p[0],f=p[1],h=Object(n.useState)(!1),g=Object(l.a)(h,2),v=g[0],E=g[1],w=Object(n.useState)([]),x=Object(l.a)(w,2),O=x[0],k=(x[1],Object(n.useState)(!1)),S=Object(l.a)(k,2),T=S[0],G=S[1],P=Object(n.useState)([]),z=Object(l.a)(P,2),U=z[0],B=z[1],F=Object(n.useState)(""),R=Object(l.a)(F,2),H=R[0],V=R[1],J=Object(n.useState)(!1),q=Object(l.a)(J,2),Z=q[0],W=q[1],Q=Object(n.useState)({}),Y=Object(l.a)(Q,2),K=Y[0],X=Y[1],$=Object(n.useState)(!1),ee=Object(l.a)($,2),te=ee[0],ae=ee[1],ne={},re={},oe=localStorage.getItem("b_token"),ce=localStorage.getItem("prefixUrl"),le="https://".concat(ce,".pim360.io/api"),se=localStorage.getItem("userName"),ie=localStorage.getItem("password"),ue=[];Object(n.useEffect)((function(){me()}),[]);var me=function(){E(!0);var e="".concat(le,"/customviews?type=LIVE_VIEW");fetch(e,{headers:{Accept:"application/json",Authorization:oe}}).then((function(e){return e.json()})).then((function(e){void 0!==e&&null!==e&&c(e),E(!1)})).catch((function(e){console.log("error --------\x3e"+e),E(!1)}))},pe=function(){E(!0);fetch("https://pim4.azurewebsites.net/api/pim360?function_name=import",{method:"POST",headers:{"Content-Type":"application/json",Authorization:oe},body:JSON.stringify(ne)}).then((function(e){return e.json()})).then((function(e){console.error("secondApi response ------------\x3e",e),de()})).catch((function(e){console.error(" secondApi Error:",e),E(!1)}))},de=function(){E(!0);var e=new Headers;fetch("https://pim4.azurewebsites.net/api/pim360?function_name=download-new",{method:"GET",headers:e,redirect:"follow"}).then((function(e){return e.json()})).then((function(e){console.log("thirdApi res -----\x3e",JSON.stringify(e)),fe(e.response)})).catch((function(e){console.error("thirdApi Error:",e),E(!1)}))},fe=function(e){E(!0);var t="https://pim4.azurewebsites.net/api/pim360?function_name=update&file_hdl=".concat(e);fetch(t,{method:"POST",headers:{"Content-Type":"application/json",Authorization:oe},body:JSON.stringify(ne)}).then((function(e){return e.json()})).then((function(e){console.error(" fourthApi response---------\x3e:",e),E(!1),alert("Successfully updated.")})).catch((function(e){console.error(" fourthApi Error:",e),E(!1)}))},he=function(e){var t={type:"TAGGED_ITEM",eic:"",filter:e.Data.conditions,fields:e.Data.fields},a="".concat(le,"/queries");fetch(a,{method:"POST",headers:{"Content-Type":"application/json",Authorization:oe},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){return ge(e.resulturl).then((function(e){E(!1);var t=Object.keys(e[0]).filter((function(t){return"object"==typeof e[0][t]})),a=[],n=[];e.map((function(e){var r={};t.map((function(t){"Tag Number"!=e[t].name&&"TAG NUMBER"!=e[t].name||n.push(e[t].value),r[e[t].name]=e[t].value})),a.push(r)})),a.length>0&&(a[0].hasOwnProperty("Tag Number")||a[0].hasOwnProperty("TAG NUMBER")?(n.length>0&&B(n),G(!0)):G(!0))}))})).catch((function(e){console.error("Error:",e),E(!1)}))},ge=function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r="".concat(le).concat(t,"?limit=").concat(a,"&skip=").concat(n);return D.defaults.headers.common={Authorization:localStorage.getItem("b_token")},b.getRequest(r).then((function(n){return ue.push.apply(ue,Object(L.a)(n.data)),n.hasmore?e(t,a,ue.length/a*200):(E(!1),ue)}))},be=function(e){ne={finalObj:e,xlsxData:[K]},ae(!1),function(){E(!0);var e="https://pim4.azurewebsites.net/api/pim360?function_name=auth&username=".concat(se,"&password=").concat(ie,"&purl=").concat(ce),t=new Headers;fetch(e,{method:"GET",headers:t,redirect:"follow"}).then((function(e){return e.json()})).then((function(e){console.log("firstApi res -----\x3e",JSON.stringify(e)),pe()})).catch((function(e){console.error("firstApi Error:",e),E(!1)}))}()};return r.a.createElement("div",null,r.a.createElement(i,{showLogoutButton:!0,showSearch:!1}),v?r.a.createElement("div",{className:"popUpContainer"},r.a.createElement("div",{className:"loader"})):"",te?r.a.createElement(I,{onClickCancel:function(){ae(!1)},onClickSubmit:function(e){return be(e)}}):"",r.a.createElement("div",{id:"liveView-container"},r.a.createElement("div",{className:"sideBar bg-purple-900"},null!=o&&o.length>0?o.map((function(e,t){return r.a.createElement("div",{key:e.name+e.Hdl+t},r.a.createElement("button",{onClick:function(t){return function(e,t,a){V(t),E(!0);var n="".concat(le,"/customviews/").concat(a);fetch(n,{headers:{Accept:"application/json",Authorization:oe}}).then((function(e){return e.json()})).then((function(e){void 0!==e&&null!==e&&he(e)})).catch((function(e){console.log("fetchSelectedLiveViewData error --------\x3e"+e),E(!1)}))}(0,e.Name,e.Hdl)},className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded inline-flex my-2 justify-center w-full"},e.Name))})):""),r.a.createElement("div",{className:"liveView-wrapper"},T?r.a.createElement("div",{className:"relative"},r.a.createElement("div",{className:"m-4"},r.a.createElement("label",{className:"inline-block text-gray-700 text-sm font-bold ",htmlFor:"username"},"Selected LiveView:"),r.a.createElement("p",{className:"inline-block ml-4"},H)),U.length>0&&r.a.createElement("div",{className:"m-4 mt-0"},r.a.createElement("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"username"},"Tag Number"),r.a.createElement("div",{className:"inline-block relative w-1/4"},r.a.createElement("select",{className:"block appearance-none w-full bg-gray-300 border border-gray-400 hover:border-gray-500 px-4 py-2 pr-8 rounded shadow leading-tight focus:outline-none focus:shadow-outline",onChange:function(e){!function(e){var t="".concat(le,"/objects/TAGGED_ITEM/id/").concat(e);fetch(t,{headers:{Accept:"application/json",Authorization:oe}}).then((function(e){return e.json()})).then((function(e){f(e)})).catch((function(e){E(!1),console.log("getAttributes error --------\x3e"+e)}))}(e.target.value)}},r.a.createElement("option",{value:""},"Select"),U.map((function(e,t){return r.a.createElement("option",{value:e,key:e+t},e)}))),r.a.createElement("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},r.a.createElement("svg",{className:"fill-current h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},r.a.createElement("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})))),r.a.createElement("div",{className:"inline-block relative w-1/4 ml-3"},void 0!==d&&Object.keys(d).length>0?r.a.createElement("a",{target:"_blank",href:"https://".concat(ce,".pim360.io/object/TAGGED_ITEM/").concat(d.hdl)},r.a.createElement("img",{width:"15%",src:"https://".concat(ce,".acl360.io/img/pim360-logo.svg"),onError:function(e){e.target.src="https://".concat(ce,".acl360.io/img/pim360_logo.png")}})):"")),void 0!==d&&Object.keys(d).length>0&&r.a.createElement("div",null,function(){var e=[],t=Object.keys(d.attrs),a={};return t.map((function(e){return a[d.attrs[e].name]=d.attrs[e].value,""})),e.push(a),re=e[0],localStorage.setItem("pre_kml_data",JSON.stringify(e)),localStorage.setItem("inputsArray",JSON.stringify(O)),r.a.createElement("div",{className:"flex mb-4"},r.a.createElement("div",{className:"w-1/2 m-h-500px p-5"},e.length>0&&e[0].hasOwnProperty("Approved Longitude")&&e[0].hasOwnProperty("Approved Latitude")?r.a.createElement("div",{className:"w-full h-full shadow-lg"},r.a.createElement("a",{target:"_blank",href:"https://earth.google.com/web/search/Arsenal+fc/@".concat(parseFloat(e[0]["Approved Latitude"]),",").concat(parseFloat(e[0]["Approved Longitude"]),",9.09858867a,612.98636056d,35y,-40.1316669h,45.00000069t,0")},"Click here for Google Earth"),r.a.createElement(y.a,{bootstrapURLKeys:{key:"AIzaSyDNeF0TGdzD6PN696-ZWgdP7z9ltW0l1QY"},options:function(){return{mapTypeControl:!0,mapTypeId:"satellite"}},defaultCenter:{lat:parseFloat(e[0]["Approved Latitude"]),lng:parseFloat(e[0]["Approved Longitude"])},center:{lat:parseFloat(e[0]["Approved Latitude"]),lng:parseFloat(e[0]["Approved Longitude"])},distanceToMouse:function(){},defaultZoom:e?18:6},e.map((function(e){return r.a.createElement(M,{lat:e["Approved Latitude"],lng:e["Approved Longitude"]})})))):r.a.createElement("div",{className:"w-full h-full shadow-lg relative"},r.a.createElement("div",{className:"centerItem"},r.a.createElement("img",{className:"attr_chat mx-auto",draggable:!1,src:j.a}),r.a.createElement("p",{className:"text-center mt-3 text-purple-800"},"Invalid map data")))),r.a.createElement("div",{className:"w-1/2 m-h-500px"},r.a.createElement("div",{className:"max-w rounded w-full shadow  p-5"},r.a.createElement("div",null,Z?r.a.createElement("div",null,r.a.createElement("button",{className:"bg-white py-2 px-3 border border-gray-300 rounded-md shadow-sm text-sm leading-4 font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 mr-3",onClick:function(){return W(!1)}},"Cancel"),r.a.createElement("button",{className:"inline-flex justify-center py-2 px-3 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-purple-900 hover:bg-purple-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",onClick:function(){return ae(!0)}},"Save")):r.a.createElement("button",{className:"bg-white py-2 px-3 border border-gray-300 rounded-md shadow-sm text-sm leading-4 font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",onClick:function(){return W(!0)}},"Edit")),r.a.createElement("p",{className:"text-xl font-bold mb-3"},"Attributes"),r.a.createElement(N.a,{className:"border-0",allowZeroExpanded:!0,preExpanded:["attributes"]},e.map((function(t,a){return r.a.createElement(N.b,Object(_.a)({className:"shadow-md mb-3",key:t.Latitude,uuid:"attributes"},"key",t+a),r.a.createElement(N.d,{className:"bg-gray-400 p-2"},r.a.createElement(N.c,{className:"w-full border-none outline-none focus:border-0 inline-flex"},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-arrow-right"},r.a.createElement("line",{x1:"5",y1:"12",x2:"19",y2:"12"}),r.a.createElement("polyline",{points:"12 5 19 12 12 19"})),"\u2003",e[a].hasOwnProperty("Tag Number")?e[a]["Tag Number"]:e[a]["TAG NUMBER"])),r.a.createElement(N.e,{className:"liveView-item-container"},r.a.createElement("table",{className:"table-auto w-full"},r.a.createElement("tbody",null,Object.keys(t).map((function(e,a){return r.a.createElement("tr",{key:e+a},r.a.createElement("td",{className:"border px-4 py-2"},e),Z?r.a.createElement("td",{className:"border px-4 py-2"},r.a.createElement("input",{onChange:function(t){return function(e,t){var a={};Object.keys(K).length>0?(a=Object(A.a)({},K),re={}):(console.log("tempSelectedObj ---\x3e",JSON.stringify(re)),a=Object(A.a)({},re)),a[t]=e,X(a)}(t.target.value,e)},defaultValue:t[e]})):r.a.createElement("td",{className:"border px-4 py-2"},t[e]))}))))))}))))))}())):r.a.createElement("div",{className:"centerItem"},r.a.createElement("img",{draggable:!1,width:300,src:C.a}),r.a.createElement("p",{className:"text-center mt-3 text-purple-800"},"Select the liveview to show the data here")))))},P=a(6),z=a.n(P);z.a.accessToken="pk.eyJ1IjoicmFuaml0aGRpbmFrYXJhbiIsImEiOiJja2h1bHd2azAwNmZvMnZvMm5jYXZubGt1In0.tG3PJN1RAiiFoDhCBFvADQ";var U=function(e){var t=Object(n.useState)([]),a=Object(l.a)(t,2),o=a[0],c=a[1],s=Object(n.useState)(!1),u=Object(l.a)(s,2),m=u[0],p=u[1],d=Object(n.useState)(!1),f=Object(l.a)(d,2),h=f[0],g=f[1],b=Object(n.useState)(""),v=Object(l.a)(b,2),E=v[0],y=v[1],w=Object(n.useState)(""),x=Object(l.a)(w,2),N=x[0],O=x[1],j=Object(n.useState)(!1),k=Object(l.a)(j,2),S=k[0],_=k[1],L=Object(n.useState)({}),I=Object(l.a)(L,2),T=I[0],D=I[1],M=Object(n.useState)([]),G=Object(l.a)(M,2),P=G[0],U=G[1],B=Object(n.useRef)(null),F=Object(n.useState)(5),R=Object(l.a)(F,2),H=R[0],V=R[1],J=Object(n.useState)(34),q=Object(l.a)(J,2),Z=q[0],W=q[1],Q=Object(n.useState)(5),Y=Object(l.a)(Q,2),K=Y[0],X=(Y[1],null),$=localStorage.getItem("b_token"),ee=localStorage.getItem("prefixUrl"),te="https://".concat(ee,".pim360.io/api"),ae=localStorage.getItem("userName"),ne=localStorage.getItem("password");Object(n.useEffect)((function(){re()}),[]);var re=function(){p(!0);var e="".concat(te,"/customviews?type=LIVE_VIEW");fetch(e,{headers:{Accept:"application/json",Authorization:$}}).then((function(e){return e.json()})).then((function(e){void 0!==e&&null!==e&&c(e),p(!1)})).catch((function(e){console.log("error --------\x3e"+e),p(!1)}))},oe=function(e){var t=Object(A.a)({},e),a=[];t.features.map((function(e){var t=Object.keys(e.properties),n="";n+="<p>",t.map((function(t){"undefined"!==t&&"(unresolved)"!==t&&(n+=t,n+=" : ",n+=e.properties[t],n+=" <br> ")})),n+="</p>";var r=e.properties["TAG NUMBER"]?e.properties["TAG NUMBER"]:e.properties["Tag Number"],o=e.properties[void 0]?e.properties[void 0]:e.properties["(unresolved)"],c="<a href='https://".concat(ee,".pim360.io/object/TAGGED_ITEM/").concat(o,"' target='_blank'> ").concat(r,' <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a>'),l="<div class='description-wrapper'><div class='header'></div><div class=\"content\">".concat(c).concat(n,"</div></div>");a.push({lat:Number(e.geometry.coordinates[1]),lng:Number(e.geometry.coordinates[0]),ref_or_fix:"fix",desc:l}),e.properties.description=l;var s=e.geometry.coordinates[1],i=e.geometry.coordinates[0];e.geometry.coordinates[0]=i,e.geometry.coordinates[1]=s})),W(t.features[0].geometry.coordinates[1]),V(t.features[0].geometry.coordinates[0]),D(t),U(a),g(!0),p(!1)},ce=function(e){var t="https://pim4.azurewebsites.net/api/pim360?function_name=liveview_to_geojson&live_view_name=".concat(e),a=new Headers;fetch(t,{method:"GET",headers:a,redirect:"follow"}).then((function(e){return e.json()})).then((function(e){console.log("result response-------",JSON.stringify(e)),null!=e&&oe(e)})).catch((function(e){p(!1),console.log("fetchSelectedLiveViewData error ---------\x3e",e),alert(e)}))};return Object(n.useEffect)((function(){h&&(S?((X=new z.a.Map({container:"map-container",style:"mapbox://styles/mapbox/streets-v11",center:[H,Z],zoom:K})).addControl(new z.a.NavigationControl,"top-right"),X.on("load",(function(){X.loadImage("https://res.cloudinary.com/di9ckb63k/image/upload/v1606463408/ref_1_bzw94s.png",(function(e,t){if(e)throw e;X.addImage("custom-marker",t),X.addSource("points",{type:"geojson",data:T,cluster:!0,clusterMaxZoom:14,clusterRadius:50}),X.addLayer({id:"points",type:"symbol",source:"points",layout:{"icon-image":"custom-marker","text-field":["get","title"],"text-font":["Open Sans Semibold","Arial Unicode MS Bold"],"text-offset":[0,1.25],"text-anchor":"top"}}),X.addLayer({id:"clusters",type:"circle",source:"points",filter:["has","point_count"],paint:{"circle-color":["step",["get","point_count"],"#51bbd6",100,"#f1f075",750,"#f28cb1"],"circle-radius":["step",["get","point_count"],20,100,30,750,40]}}),X.addLayer({id:"cluster-count",type:"symbol",source:"points",filter:["has","point_count"],layout:{"text-field":"{point_count_abbreviated}","text-font":["DIN Offc Pro Medium","Arial Unicode MS Bold"],"text-size":12}}),X.addLayer({id:"unclustered-point",type:"circle",source:"points",filter:["!",["has","point_count"]],paint:{"circle-color":"#11b4da","circle-radius":4,"circle-stroke-width":1,"circle-stroke-color":"#fff"}}),X.on("click","clusters",(function(e){var t=X.queryRenderedFeatures(e.point,{layers:["clusters"]}),a=t[0].properties.cluster_id;X.getSource("points").getClusterExpansionZoom(a,(function(e,a){e||X.easeTo({center:t[0].geometry.coordinates,zoom:a})}))})),X.on("click","unclustered-point",(function(e){var t=e.features[0].geometry.coordinates.slice();for(e.features[0].properties.mag,e.features[0].properties.tsunami;Math.abs(e.lngLat.lng-t[0])>180;)t[0]+=e.lngLat.lng>t[0]?360:-360})),X.on("mouseenter","clusters",(function(){X.getCanvas().style.cursor="pointer"})),X.on("mouseleave","clusters",(function(){X.getCanvas().style.cursor=""})),X.on("click","points",(function(e){for(var t=e.features[0].geometry.coordinates.slice(),a=e.features[0].properties.description;Math.abs(e.lngLat.lng-t[0])>180;)t[0]+=e.lngLat.lng>t[0]?360:-360;(new z.a.Popup).setLngLat(t).setHTML(a).addTo(X)})),X.on("mouseenter","places",(function(){X.getCanvas().style.cursor="pointer"})),X.on("mouseleave","places",(function(){X.getCanvas().style.cursor=""}))}))}))):window.InitializeMap(P))}),[S,h]),r.a.createElement("div",null,r.a.createElement(i,{showLogoutButton:!0,showSearch:!1}),m?r.a.createElement("div",{className:"popUpContainer"},r.a.createElement("div",{className:"loader"})):"",r.a.createElement("div",{className:"m-4"},r.a.createElement("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"username"},"LiveView"),r.a.createElement("div",{className:"inline-block relative w-1/1"},r.a.createElement("select",{class:"block appearance-none w-full bg-gray-300 border border-gray-400 hover:border-gray-500 px-4 py-2 pr-8 rounded shadow leading-tight focus:outline-none focus:shadow-outline",onChange:function(e){!function(e,t){p(!0),y(t),O(e);var a="https://pim4.azurewebsites.net/api/pim360?function_name=auth&username=".concat(ae,"&password=").concat(ne,"&purl=").concat(ee),n=new Headers;fetch(a,{method:"GET",headers:n,redirect:"follow"}).then((function(e){return e.json()})).then((function(t){void 0!==t&&null!==t&&ce(e)})).catch((function(e){console.log("doAuth error--------\x3e",JSON.stringify(e)),p(!1)}))}(e.target.options[e.target.selectedIndex].text,e.target.value)}},r.a.createElement("option",{value:""},"Select"),null!=o&&o.length>0?o.map((function(e,t){return r.a.createElement("option",{name:e.Name,value:e.Hdl},e.Name)})):""),r.a.createElement("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},r.a.createElement("svg",{class:"fill-current h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},r.a.createElement("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})))),r.a.createElement("div",{className:"inline-block relative mx-3"},void 0!==E&&""!=E?r.a.createElement("a",{target:"_blank",href:"https://".concat(ee,".pim360.io/liveview#view=").concat(E)},r.a.createElement("img",{width:"15%",src:"https://".concat(ee,".acl360.io/img/pim360-logo.svg"),onError:function(e){e.target.src="https://".concat(ee,".acl360.io/img/pim360_logo.png")}})):""),r.a.createElement("div",{className:"inline-block relative w-1/4 ml-3"},r.a.createElement("input",{type:"file",onChange:function(e){var t=new FileReader;t.readAsText(e.target.files[0],"UTF-8"),t.onload=function(e){var t=JSON.parse(e.target.result);oe(t)}}}))),r.a.createElement("div",{id:"liveView-container"},r.a.createElement("div",{className:"w-full"},h?r.a.createElement("div",{className:"relative"},r.a.createElement("div",{className:"m-4"},r.a.createElement("label",{className:"inline-block text-gray-700 text-sm font-bold ",htmlFor:"username"},"Selected LiveView:"),r.a.createElement("p",{className:"inline-block ml-4"},N)),r.a.createElement("div",{className:"m-4"},r.a.createElement("button",{className:S?"btn":"btn-selected",onClick:function(){return _(!1)}},"Google Map"),r.a.createElement("button",{className:S?"btn-selected":"btn",onClick:function(){_(!0)}},"Mapbox")),S?r.a.createElement("div",{id:"map-container",className:"map-container m-4 map-height width",ref:B}):"",S?"":r.a.createElement("div",{id:"dvMap",className:S?"opacity-25":"opacity-100 min-h-full width m-4 map-height"})):r.a.createElement("div",{className:"centerItem"},r.a.createElement("img",{draggable:!1,width:300,src:C.a}),r.a.createElement("p",{className:"text-center mt-3 text-purple-800"},"Select the liveview to show the data here")))))};a(105);var B=function(){return r.a.createElement("div",{style:{width:"100vw",height:"100vh"}},r.a.createElement("iframe",{style:{width:"100vw",height:"100vh"},src:"https://dev-env.space/esri.php?data="}))};z.a.accessToken="pk.eyJ1IjoicmFuaml0aGRpbmFrYXJhbiIsImEiOiJja2h1bHd2azAwNmZvMnZvMm5jYXZubGt1In0.tG3PJN1RAiiFoDhCBFvADQ";a(18);var F=function(e){var t=Object(n.useState)([]),a=Object(l.a)(t,2),o=a[0],c=a[1],s=Object(n.useState)(!1),u=Object(l.a)(s,2),m=u[0],p=u[1],d=Object(n.useState)(!1),f=Object(l.a)(d,2),h=f[0],g=f[1],b=Object(n.useState)(""),v=Object(l.a)(b,2),E=v[0],y=v[1],w=Object(n.useState)(""),x=Object(l.a)(w,2),N=x[0],O=x[1],j=Object(n.useState)(!0),k=Object(l.a)(j,2),S=k[0],_=k[1],L=Object(n.useState)({}),I=Object(l.a)(L,2),T=I[0],D=I[1],M=Object(n.useState)([]),G=Object(l.a)(M,2),P=(G[0],G[1],Object(n.useState)("")),U=Object(l.a)(P,2),F=U[0],R=U[1],H=Object(n.useRef)(null),V=Object(n.useState)(5),J=Object(l.a)(V,2),q=J[0],Z=J[1],W=Object(n.useState)(34),Q=Object(l.a)(W,2),Y=Q[0],K=Q[1],X=Object(n.useState)(5),$=Object(l.a)(X,2),ee=$[0],te=($[1],Object(n.useState)(Math.random()*Math.floor(100))),ae=Object(l.a)(te,2),ne=(ae[0],ae[1],Object(n.useState)(null)),re=Object(l.a)(ne,2),oe=re[0],ce=re[1],le=Object(n.useState)(""),se=Object(l.a)(le,2),ie=se[0],ue=se[1],me=null,pe=localStorage.getItem("b_token"),de=localStorage.getItem("prefixUrl"),fe="https://".concat(de,".pim360.io/api"),he=localStorage.getItem("userName"),ge=localStorage.getItem("password");Object(n.useEffect)((function(){be()}),[]);var be=function(){p(!0);var e="".concat(fe,"/customviews?type=LIVE_VIEW");fetch(e,{headers:{Accept:"application/json",Authorization:pe}}).then((function(e){return e.json()})).then((function(e){void 0!==e&&null!==e&&c(e),p(!1)})).catch((function(e){console.log("error --------\x3e"+e),p(!1)}))},ve=function(e,t){console.log("inside do auth ------",""),_(!1),g(!1),D([]),p(!0),y(t),O(e);var a="https://pim4.azurewebsites.net/api/pim360?function_name=auth&username=".concat(he,"&password=").concat(ge,"&purl=").concat(de),n=new Headers;fetch(a,{method:"GET",headers:n,redirect:"follow"}).then((function(e){return e.json()})).then((function(a){void 0!==a&&null!==a&&(console.log("doAuth responseData--------\x3e"),Ee(e,t))})).catch((function(e){console.log("doAuth error--------\x3e",JSON.stringify(e)),p(!1)}))},Ee=function(e,t){var a="https://pim4.azurewebsites.net/api/pim360?function_name=liveview_to_geojson&live_view_name=".concat(e),n=new Headers;fetch(a,{method:"GET",headers:n,redirect:"follow"}).then((function(e){return e.json()})).then((function(e){null!=e&&function(e){_(!0);var t=Object(A.a)({},e),a=[],n=[];t.features.map((function(e,t){var r={type:"Feature",properties:{mag:500},geometry:{type:"Point",coordinates:[parseFloat(e.properties["Geometry.Start.Longitude"]),parseFloat(e.properties["Geometry.Start.Latitude"])]}};Object.keys(e.properties).map((function(t){r.properties[t]=e.properties[t]})),0==t&&(a.push([e.properties["Geometry.Start.Longitude"],e.properties["Geometry.Start.Latitude"]]),n.push(r)),a.push([e.properties["Geometry.End.Longitude"],e.properties["Geometry.End.Latitude"]]),n.push(r);var o=e.geometry.coordinates[1],c=e.geometry.coordinates[0];e.geometry.coordinates[0]=c,e.geometry.coordinates[1]=o})),K(t.features[0].properties["Geometry.Start.Latitude"]),Z(t.features[0].properties["Geometry.Start.Longitude"]),D(a),g(!0),p(!1),ce(window.btoa(JSON.stringify(n))),ue(window.btoa(JSON.stringify(n[0])))}(e)})).catch((function(e){p(!1),console.log("fetchSelectedLiveViewData error ---------\x3e",e),alert(e)}))};return Object(n.useEffect)((function(){h&&S&&("linestring"==F?(console.log("inside show_linear_mapBox --------\x3e",""),(me=new z.a.Map({container:"map-container",style:"mapbox://styles/mapbox/streets-v11",center:[q,Y],zoom:ee})).addControl(new z.a.NavigationControl,"top-right"),me.on("load",(function(){me.loadImage("https://res.cloudinary.com/di9ckb63k/image/upload/v1606463408/ref_1_bzw94s.png",(function(e,t){if(e)throw e;me.addImage("custom-marker",t),me.addSource("route",{type:"geojson",data:{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:T}}}),me.addLayer({id:"route",type:"line",source:"route",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#44337a","line-width":8}})}))}))):"polygon"==F&&(console.log("inside show_polygon_mapBox --------\x3e",""),(me=new z.a.Map({container:"map-container",style:"mapbox://styles/mapbox/streets-v11",center:[q,Y],zoom:ee})).addControl(new z.a.NavigationControl,"top-right"),me.on("load",(function(){me.loadImage("https://res.cloudinary.com/di9ckb63k/image/upload/v1606463408/ref_1_bzw94s.png",(function(e,t){if(e)throw e;me.addImage("custom-marker",t),me.addSource("maine",{type:"geojson",data:{type:"Feature",geometry:{type:"Polygon",coordinates:[T]}}}),me.addLayer({id:"maine",type:"fill",source:"maine",layout:{},paint:{"fill-color":"#44337a","fill-opacity":.8}})}))}))))}),[S,h,T]),r.a.createElement("div",null,r.a.createElement(i,{showLogoutButton:!0,showSearch:!1}),m?r.a.createElement("div",{className:"popUpContainer"},r.a.createElement("div",{className:"loader"})):"",r.a.createElement("div",{className:"m-4 inline-block"},r.a.createElement("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"username"},"Choose type"),r.a.createElement("div",{className:"inline-block relative w-1/1"},r.a.createElement("select",{class:"block appearance-none w-full bg-gray-300 border border-gray-400 hover:border-gray-500 px-4 py-2 pr-8 rounded shadow leading-tight focus:outline-none focus:shadow-outline",onChange:function(e){R(e.target.value),null!=N&&""!=N&&(console.log("inside 1 -------\x3e",""),me=null,ve(N,E))}},r.a.createElement("option",{value:""},"Select"),[{value:"linestring",name:"Linestring"},{value:"polygon",name:"Polygon"}].map((function(e){return r.a.createElement("option",{value:e.value},e.name)}))),r.a.createElement("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},r.a.createElement("svg",{class:"fill-current h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},r.a.createElement("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"}))))),r.a.createElement("div",{className:"m-4 inline-block"},r.a.createElement("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"username"},"LiveView"),r.a.createElement("div",{className:"inline-block relative w-1/1"},r.a.createElement("select",{class:"block appearance-none w-full bg-gray-300 border border-gray-400 hover:border-gray-500 px-4 py-2 pr-8 rounded shadow leading-tight focus:outline-none focus:shadow-outline",onChange:function(e){var t=e.target.options[e.target.selectedIndex].text;_(!1),ve(t,e.target.value)}},r.a.createElement("option",{value:""},"Select"),null!=o&&o.length>0?o.map((function(e,t){return r.a.createElement("option",{name:e.Name,value:e.Hdl},e.Name)})):""),r.a.createElement("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},r.a.createElement("svg",{class:"fill-current h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},r.a.createElement("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})))),r.a.createElement("div",{className:"inline-block relative mx-3"},void 0!==E&&""!=E?r.a.createElement("a",{target:"_blank",href:"https://".concat(de,".pim360.io/liveview#view=").concat(E)},r.a.createElement("img",{width:"15%",src:"https://".concat(de,".acl360.io/img/pim360-logo.svg"),onError:function(e){e.target.src="https://".concat(de,".acl360.io/img/pim360_logo.png")}})):"")),r.a.createElement("div",{id:"liveView-container"},r.a.createElement("div",{className:"w-full"},h?r.a.createElement("div",{className:"relative"},r.a.createElement("div",{className:"m-4"},r.a.createElement("label",{className:"inline-block text-gray-700 text-sm font-bold ",htmlFor:"username"},"Selected LiveView:"),r.a.createElement("p",{className:"inline-block ml-4"},N)),r.a.createElement("div",{className:"m-4"},r.a.createElement("button",{className:S?"btn-selected":"btn",onClick:function(){_(!0)}},"Mapbox"),r.a.createElement("button",{className:S?"btn":"btn-selected",onClick:function(){return function(){p(!0);var e={data:oe};fetch("https://dev-env.space/post_req.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){p(!1),_(!1)})).catch((function(e){console.error("updateEsriMapData error: -------\x3e",e),p(!1)}))}()}},"ESRI")),S?r.a.createElement("div",{id:"map-container",className:"map-container m-4 map-height width",ref:H}):"",S?"":r.a.createElement(B,{data:null!=oe?oe:"",center:ie})):r.a.createElement("div",{className:"centerItem"},r.a.createElement("img",{draggable:!1,width:300,src:C.a}),r.a.createElement("p",{className:"text-center mt-3 text-purple-800"},"Select the liveview to show the data here")))))},R=a(24),H=a.n(R),V=a(31);z.a.accessToken="pk.eyJ1IjoicmFuaml0aGRpbmFrYXJhbiIsImEiOiJja2h1bHd2azAwNmZvMnZvMm5jYXZubGt1In0.tG3PJN1RAiiFoDhCBFvADQ";var J=a(18);window.mapData=[],window.esriJSONData=[];var q=function(e){var t=Object(n.useState)([]),a=Object(l.a)(t,2),o=a[0],c=a[1],s=Object(n.useState)(!1),u=Object(l.a)(s,2),m=u[0],p=u[1],d=Object(n.useState)(!1),f=Object(l.a)(d,2),h=f[0],g=f[1],v=Object(n.useState)(""),E=Object(l.a)(v,2),y=E[0],w=E[1],x=Object(n.useState)(""),N=Object(l.a)(x,2),O=N[0],j=N[1],k=Object(n.useState)(!0),S=Object(l.a)(k,2),_=S[0],I=S[1],T=Object(n.useState)([]),D=Object(l.a)(T,2),M=D[0],G=D[1],P=Object(n.useRef)(null),U=Object(n.useState)(5),F=Object(l.a)(U,2),R=F[0],q=(F[1],Object(n.useState)([])),Z=Object(l.a)(q,2),W=Z[0],Q=Z[1],Y=Object(n.useState)([]),K=Object(l.a)(Y,2),X=K[0],$=K[1],ee=Object(n.useState)(null),te=Object(l.a)(ee,2),ae=(te[0],te[1]),ne=Object(n.useState)(!1),re=Object(l.a)(ne,2),oe=re[0],ce=re[1],le=Object(n.useState)([]),se=Object(l.a)(le,2),ie=se[0],ue=se[1],me=Object(n.useState)([]),pe=Object(l.a)(me,2),de=pe[0],fe=pe[1],he=Object(n.useState)(0),ge=Object(l.a)(he,2),be=ge[0],ve=ge[1],Ee=Object(n.useState)(0),ye=Object(l.a)(Ee,2),we=ye[0],xe=ye[1],Ne=Object(n.useState)(!1),Oe=Object(l.a)(Ne,2),je=Oe[0],ke=Oe[1],Se=Object(n.useState)(!1),_e=Object(l.a)(Se,2),Ae=_e[0],Le=_e[1],Ie=Object(n.useState)(!1),Te=Object(l.a)(Ie,2),Ce=Te[0],De=Te[1],Me=Object(n.useState)(!1),Ge=Object(l.a)(Me,2),Pe=Ge[0],ze=Ge[1],Ue=null,Be=localStorage.getItem("b_token"),Fe=localStorage.getItem("prefixUrl"),Re="https://".concat(Fe,".pim360.io/api"),He=localStorage.getItem("userName"),Ve=localStorage.getItem("password"),Je=[],qe=[],Ze={chips:{background:"#44337a",color:"white"},searchBox:{border:"none","border-bottom":"1px solid blue","border-radius":"0px"},multiselectContainer:{color:"#44337a"}};Object(n.useEffect)((function(){Qe()}),[]);var We=function(){console.log("inside show_data------------\x3e");var e=[0,0];e=je&&0==M.length?[we,be]:M[0].geometry.coordinates[0].length<=3?M[0].geometry.coordinates[0]:M[0].geometry.coordinates[0][0];var t={type:"FeatureCollection",features:M};Ue=null,(Ue=new z.a.Map({container:"map-container",style:"mapbox://styles/mapbox/streets-v11",center:e,zoom:R})).addControl(new z.a.NavigationControl,"top-right"),Ue.on("load",(function(){Ue.loadImage("https://res.cloudinary.com/di9ckb63k/image/upload/v1606463408/ref_1_bzw94s.png",(function(e,a){if(e)throw e;Ue.addImage("custom-marker",a),Ue.addSource("route",{type:"geojson",data:t}),je&&(Ue.addLayer({id:"points",type:"symbol",source:"route",layout:{"icon-image":"custom-marker","text-field":["get","title"],"text-font":["Open Sans Semibold","Arial Unicode MS Bold"],"text-offset":[0,1.25],"text-anchor":"top"}}),Ue.addLayer({id:"clusters",type:"circle",source:"route",filter:["has","point_count"],paint:{"circle-color":["step",["get","point_count"],"#51bbd6",100,"#f1f075",750,"#f28cb1"],"circle-radius":["step",["get","point_count"],20,100,30,750,40]}}),Ue.on("click","points",(function(e){var t=e.features[0].geometry.coordinates.slice(),a=e.features[0].properties.description,n=t;for("object"!=typeof t[0]?n=t:"object"!=typeof t[0][0]&&(n=t[0]);Math.abs(e.lngLat.lng-n[0])>180;)n[0]+=e.lngLat.lng>n[0]?360:-360;(new z.a.Popup).setLngLat(n).setHTML(a).addTo(Ue)})),Ue.on("mouseenter","points",(function(){Ue.getCanvas().style.cursor="pointer"})),Ue.on("mouseleave","points",(function(){Ue.getCanvas().style.cursor=""}))),Ue.addLayer({id:"route",type:"line",source:"route",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#44337a","line-width":2},filter:["==","$type","LineString"]}),Ue.addLayer({id:"maine",type:"fill",source:"route",layout:{},paint:{"fill-color":"#44337a","fill-opacity":.8},filter:["==","$type","Polygon"]}),Ue.on("mouseenter","route",(function(){Ue.getCanvas().style.cursor="pointer"})),Ue.on("mouseleave","route",(function(){Ue.getCanvas().style.cursor=""})),Ue.on("click","route",(function(e){for(var t=e.features[0].geometry.coordinates.slice(),a=e.features[0].properties.description;Math.abs(e.lngLat.lng-t[0])>180;)t[0]+=e.lngLat.lng>t[0]?360:-360;(new z.a.Popup).setLngLat(t[0]).setHTML(a).addTo(Ue)}))}))}))},Qe=function(){p(!0);var e="".concat(Re,"/customviews?type=LIVE_VIEW");fetch(e,{headers:{Accept:"application/json",Authorization:Be}}).then((function(e){return e.json()})).then((function(e){void 0!==e&&null!==e&&c(e),p(!1)})).catch((function(e){console.log("error --------\x3e"+e),p(!1)}))},Ye=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];g(!1),I(!1),p(!0),w(t),j(e);var n="https://pim4.azurewebsites.net/api/pim360?function_name=auth&username=".concat(He,"&password=").concat(Ve,"&purl=").concat(Fe),r=new Headers,o={method:"GET",headers:r,redirect:"follow"};fetch(n,o).then((function(e){return e.json()})).then((function(n){void 0!==n&&null!==n&&(1==a?Ke():Xe(e,t))})).catch((function(e){console.log("doAuth error--------\x3e",JSON.stringify(e)),p(!1)}))},Ke=function(){p(!0);var e=0,t=[];de.map((function(a){var n="https://pim4.azurewebsites.net/api/pim360?function_name=liveview_to_geojson&live_view_name="+a.Name,r=new Headers;fetch(n,{method:"GET",headers:r,redirect:"follow"}).then((function(e){return e.json()})).then((function(a){null!=a&&(t.push(a),(e+=1)==de.length&&tt(t))})).catch((function(t){(e+=1)==de.length&&(p(!1),alert(t)),console.log("fetchSelectedLiveViewData error ---------\x3e",t)}))}))},Xe=function(e,t){p(!0);var a="".concat(Re,"/customviews/").concat(t);fetch(a,{headers:{Accept:"application/json",Authorization:Be}}).then((function(e){return e.json()})).then((function(e){void 0!==e&&null!==e&&$e(e)})).catch((function(e){console.log("fetchSelectedLiveViewData error --------\x3e"+e),p(!1)}))},$e=function(e){var t={type:"TAGGED_ITEM",eic:"",filter:e.Data.conditions,fields:e.Data.fields},a="".concat(Re,"/queries");fetch(a,{method:"POST",headers:{"Content-Type":"application/json",Authorization:Be},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){return function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r="".concat(Re).concat(t,"?limit=").concat(a,"&skip=").concat(n);return J.defaults.headers.common={Authorization:localStorage.getItem("b_token")},b.getRequest(r).then((function(n){return Je.push.apply(Je,Object(L.a)(n.data)),n.hasmore?e(t,a,Je.length/a*200):(p(!1),Je)}))}(e.resulturl).then((function(e){p(!1);var t=Object.keys(e[0]).filter((function(t){return"object"==typeof e[0][t]})),a=[],n=[];e.map((function(e){var r={};t.map((function(t){"Tag Number"!=e[t].name&&"TAG NUMBER"!=e[t].name||n.push(e[t].value),r[e[t].name]=e[t].value})),a.push(r)})),a.length>0&&(a[0].hasOwnProperty("Tag Number")||a[0].hasOwnProperty("TAG NUMBER")?n.length>0&&$(n):ce(!0))}))})).catch((function(e){console.error("Error:",e),p(!1)}))};Object(n.useEffect)((function(){_&&Object.keys(M).length>0&&(Ae?1==Ce&&1==Pe&&(p(!1),console.log(" inside call isDualCall showdata  ------------\x3e"),We()):(console.log("inside isDualCall else------------\x3e"),We()))}),[M,_]);var et=function(){var e,t,a,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];g(!0),I(!0);var r=Object(L.a)(M),o=Object(L.a)(W);n&&(r=[],o=[]);var c=[],l=[];qe.length>0&&qe.map((function(e){var t=Object.keys(e),a={},n={},r="",s=!1;if(t.map((function(t){"Route"==e[t].name?(s=!0,n=JSON.parse(e[t].value)):(a[e[t].name]=e[t].value,r+="<p>",r+=e[t].name,r+=" : ",r+=e[t].value,r+=" <br> ",r+="</p>")})),s){n.properties.description=r,c.push(a),l.push(n);l.length;o.push(n)}else ce(!0)})),Ae||p(!1),(e=window.esriJSONData).push.apply(e,Object(L.a)(o)),Q(o),De(!0),ae(c),(t=r).push.apply(t,l),(a=window.mapData).push.apply(a,Object(L.a)(r)),G(r),n&&(console.log("inside calling second api ----------\x3e"),Ye("","",!0))},tt=function(e){var t,a,n=Object(L.a)(window.mapData),r=Object(L.a)(window.esriJSONData);e.map((function(e,t){var a=Object(A.a)({},e),o=[];a.features.map((function(e,t){var a=Object.keys(e.properties),n="";n+="<p>",a.map((function(t){n+=t,n+=" : ",n+=e.properties[t],n+=" <br> "})),n+="</p>",o.push({lat:Number(e.geometry.coordinates[1]),lng:Number(e.geometry.coordinates[0]),ref_or_fix:"fix",desc:n}),e.properties.description=n;var r=e.geometry.coordinates[1],c=e.geometry.coordinates[0];e.geometry.coordinates[0]=c,e.geometry.coordinates[1]=r})),ve(a.features[0].geometry.coordinates[1]),xe(a.features[0].geometry.coordinates[0]);var c={};if(c.liveview2=a,r.length>0)if(Object.keys(r[r.length-1]).includes("liveview2")){var l,s=Object(L.a)(a.features);(l=r[r.length-1].liveview2.features).push.apply(l,Object(L.a)(s)),console.log("includes ----------\x3e")}else r.push(c),console.log("not includes ----------\x3e");else r.push(c);n.push.apply(n,Object(L.a)(a.features))})),Ae||p(!1),ze(!0),G(n),(t=window.esriJSONData).push.apply(t,Object(L.a)(r)),(a=window.mapData).push.apply(a,Object(L.a)(n)),Q(r),g(!0),I(!0)};return r.a.createElement("div",{id:"v2"},r.a.createElement(i,{showLogoutButton:!0,showSearch:!1}),m?r.a.createElement("div",{className:"popUpContainer"},r.a.createElement("div",{className:"loader"})):"",r.a.createElement("div",{className:"m-4 inline-block relative  w-1/1"},r.a.createElement("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"username"},"LiveView"),r.a.createElement("div",{className:"inline-block relative w-1/1"},r.a.createElement("select",{class:"block appearance-none w-full bg-gray-300 border border-gray-400 hover:border-gray-500 px-4 py-2 pr-8 rounded shadow leading-tight focus:outline-none focus:shadow-outline",onChange:function(e){var t=e.target.options[e.target.selectedIndex].text;ke(!1),I(!1),Ye(t,e.target.value)}},r.a.createElement("option",{value:""},"Select"),null!=o&&o.length>0?o.map((function(e,t){return r.a.createElement("option",{name:e.Name,value:e.Hdl},e.Name)})):""),r.a.createElement("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},r.a.createElement("svg",{class:"fill-current h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},r.a.createElement("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"}))))),X.length>0&&r.a.createElement("div",{className:"m-4 inline-block relative  w-1/1"},r.a.createElement(V.Multiselect,{displayValue:"key",showCheckbox:!0,style:Ze,options:X,isObject:!1,onSelect:function(e,t){g(!1),ue(e)},onRemove:function(e,t){g(!1),ue(e)}})),r.a.createElement("div",{className:"inline-block relative mx-3"},void 0!==y&&""!=y?r.a.createElement("a",{target:"_blank",href:"https://".concat(Fe,".pim360.io/liveview#view=").concat(y)},r.a.createElement("img",{width:"15%",src:"https://".concat(Fe,".acl360.io/img/pim360-logo.svg"),onError:function(e){e.target.src="https://".concat(Fe,".acl360.io/img/pim360_logo.png")}})):""),r.a.createElement("div",{className:"m-4 relative  w-1/1"},r.a.createElement("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"username"},"LiveView2"),r.a.createElement("div",{className:"inline-block relative w-1/1"},r.a.createElement(V.Multiselect,{displayValue:"Name",showCheckbox:!0,style:Ze,options:o,onSelect:function(e,t){ke(!0),g(!1),fe(e)},onRemove:function(e,t){ke(!0),g(!1),fe(e)}}))),r.a.createElement("div",{className:"m-4 relative  w-1/1"},ie.length>0||de.length>0?r.a.createElement("button",{className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded focus:outline-none m-auto",type:"button",onClick:function(){!function(){var e=!1;if(Le(!1),De(!1),ze(!1),ie.length>0&&de.length>0&&(e=!0,G([]),Q([]),window.esriJSONData=[],window.mapData=[],Le(!0)),p(!0),e){console.log("onSubmitTag if -----------------\x3e");var t=0;ie.map((function(e){var a="".concat(Re,"/objects/TAGGED_ITEM/id/").concat(e);fetch(a,{headers:{Accept:"application/json",Authorization:Be}}).then((function(e){return e.json()})).then((function(e){t+=1,null!==e&&void 0!==e&&null!==e.attrs&&qe.push(e.attrs),t!==ie.length||et(!0)})).catch((function(e){if((t+=1)===ie.length)return et(),void p(!1);console.log("getAttributes error --------\x3e"+e)}))}))}else if(console.log("onSubmitTag else -----------------\x3e"),je)Ye("","",!0);else{var a=0;ie.map((function(e){var t="".concat(Re,"/objects/TAGGED_ITEM/id/").concat(e);fetch(t,{headers:{Accept:"application/json",Authorization:Be}}).then((function(e){return e.json()})).then((function(e){a+=1,null!==e&&void 0!==e&&null!==e.attrs&&qe.push(e.attrs),a!==ie.length||et()})).catch((function(e){if((a+=1)===ie.length)return et(),void p(!1);console.log("getAttributes error --------\x3e"+e)}))}))}}()}},"Submit"):""),r.a.createElement("div",{id:"liveView-container"},r.a.createElement("div",{className:"w-full"},h?r.a.createElement("div",{className:"relative"},r.a.createElement("div",{className:"m-4"},r.a.createElement("label",{className:"inline-block text-gray-700 text-sm font-bold ",htmlFor:"username"},"Selected LiveView:"),r.a.createElement("p",{className:"inline-block ml-4"},O)),r.a.createElement("div",{className:"m-4"},r.a.createElement("button",{className:_?"btn-selected":"btn",onClick:function(){I(!0)}},"Mapbox"),r.a.createElement("button",{className:_?"btn":"btn-selected",onClick:function(){return function(){console.log("inside updateesrimap data esriJSONData-----------\x3e",W);var e=window.btoa(JSON.stringify(W));p(!0);var t={data:e};fetch("https://dev-env.space/post_req.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){p(!1),I(!1)})).catch((function(e){console.error("updateEsriMapData error: -------\x3e",e),p(!1)}))}()}},"ESRI")),_?r.a.createElement("div",{id:"map-container",className:"map-container m-4 map-height width",ref:P}):"",_?"":r.a.createElement(B,null)):oe?r.a.createElement("div",{className:"centerItem mt-5 pt-5 pri"},r.a.createElement("img",{draggable:!1,width:300,src:H.a}),r.a.createElement("p",{className:"text-center mt-3 text-purple-800"},"No Route found")):r.a.createElement("div",{className:"centerItem mt-5 pt-5 pri"},r.a.createElement("img",{draggable:!1,width:300,src:C.a}),r.a.createElement("p",{className:"text-center mt-3 text-purple-800"},"Select the liveview to show the data here")))))},Z=a(18);var W=function(e){var t=Object(n.useState)([]),a=Object(l.a)(t,2),o=a[0],c=a[1],s=Object(n.useState)(),u=Object(l.a)(s,2),m=(u[0],u[1],Object(n.useState)([])),f=Object(l.a)(m,2),h=f[0],g=f[1],v=Object(n.useState)(!1),E=Object(l.a)(v,2),y=E[0],w=E[1],x=Object(n.useState)([]),N=Object(l.a)(x,2),O=N[0],j=(N[1],Object(n.useState)(!1)),k=Object(l.a)(j,2),S=k[0],_=k[1],A=Object(n.useState)([]),T=Object(l.a)(A,2),D=T[0],M=T[1],G=Object(n.useState)(""),P=Object(l.a)(G,2),z=P[0],U=P[1],B=Object(n.useState)(!1),F=Object(l.a)(B,2),R=F[0],H=F[1],V=Object(n.useState)([]),J=Object(l.a)(V,2),q=(J[0],J[1]),W=Object(n.useState)([]),Q=Object(l.a)(W,2),Y=Q[0],K=Q[1],X={},$=[],ee=localStorage.getItem("b_token"),te=localStorage.getItem("prefixUrl"),ae="https://".concat(te,".pim360.io/api"),ne=localStorage.getItem("userName"),re=localStorage.getItem("password"),oe=[];Object(n.useEffect)((function(){ce()}),[]),Object(n.useEffect)((function(){D.length>0&&pe()}),[D]);var ce=function(){w(!0);var e="".concat(ae,"/customviews?type=LIVE_VIEW");fetch(e,{headers:{Accept:"application/json",Authorization:ee}}).then((function(e){return e.json()})).then((function(e){void 0!==e&&null!==e&&c(e),w(!1)})).catch((function(e){console.log("error --------\x3e"+e),w(!1)}))},le=function(){w(!0);fetch("https://pim4.azurewebsites.net/api/pim360?function_name=import",{method:"POST",headers:{"Content-Type":"application/json",Authorization:ee},body:JSON.stringify(X)}).then((function(e){return e.json()})).then((function(e){console.error("secondApi response ------------\x3e",e),se()})).catch((function(e){console.error(" secondApi Error:",e),w(!1)}))},se=function(){w(!0);var e=new Headers;fetch("https://pim4.azurewebsites.net/api/pim360?function_name=download-new",{method:"GET",headers:e,redirect:"follow"}).then((function(e){return e.json()})).then((function(e){console.log("thirdApi res -----\x3e",JSON.stringify(e)),ie(e.response)})).catch((function(e){console.error("thirdApi Error:",e),w(!1)}))},ie=function(e){w(!0);var t="https://pim4.azurewebsites.net/api/pim360?function_name=update&file_hdl=".concat(e);fetch(t,{method:"POST",headers:{"Content-Type":"application/json",Authorization:ee},body:JSON.stringify(X)}).then((function(e){return e.json()})).then((function(e){console.error(" fourthApi response---------\x3e:",e),w(!1),alert("Successfully updated.")})).catch((function(e){console.error(" fourthApi Error:",e),w(!1)}))},ue=function(e){var t={type:"TAGGED_ITEM",eic:"",filter:e.Data.conditions,fields:e.Data.fields},a="".concat(ae,"/queries");fetch(a,{method:"POST",headers:{"Content-Type":"application/json",Authorization:ee},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){return me(e.resulturl).then((function(e){w(!1);var t=Object.keys(e[0]).filter((function(t){return"object"==typeof e[0][t]})),a=[],n=[];e.map((function(e){var r={};t.map((function(t){"Tag Number"!=e[t].name&&"TAG NUMBER"!=e[t].name||n.push(e[t].value),r[e[t].name]=e[t].value})),a.push(r)})),a.length>0&&(a[0].hasOwnProperty("Tag Number")||a[0].hasOwnProperty("TAG NUMBER")?(n.length>0&&M(n),_(!0)):_(!0))}))})).catch((function(e){console.error("Error:",e),w(!1)}))},me=function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r="".concat(ae).concat(t,"?limit=").concat(a,"&skip=").concat(n);return Z.defaults.headers.common={Authorization:localStorage.getItem("b_token")},b.getRequest(r).then((function(n){return oe.push.apply(oe,Object(L.a)(n.data)),n.hasmore?e(t,a,oe.length/a*200):(w(!1),oe)}))},pe=function(){w(!0);var e=[];D.map(function(){var t=Object(d.a)(p.a.mark((function t(a,n){var r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r="".concat(ae,"/objects/TAGGED_ITEM/id/").concat(a),t.next=3,fetch(r,{headers:{Accept:"application/json",Authorization:ee}}).then((function(e){return e.json()})).then((function(t){e.push(t),D.length===n+1&&(g(e),w(!1))})).catch((function(e){w(!1),console.log("getAttributes error --------\x3e"+e)}));case 3:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}())},de=function(e){var t=Y.filter((function(e){return!0===e.isEdited}));X={finalObj:e,xlsxData:t},H(!1),function(){w(!0);var e="https://pim4.azurewebsites.net/api/pim360?function_name=auth&username=".concat(ne,"&password=").concat(re,"&purl=").concat(te),t=new Headers;fetch(e,{method:"GET",headers:t,redirect:"follow"}).then((function(e){return e.json()})).then((function(e){console.log("firstApi res -----\x3e",JSON.stringify(e)),le()})).catch((function(e){console.error("firstApi Error:",e),w(!1)}))}()};return r.a.createElement("div",null,r.a.createElement(i,{showLogoutButton:!0,showSearch:!1}),y?r.a.createElement("div",{className:"popUpContainer"},r.a.createElement("div",{className:"loader"})):"",R?r.a.createElement(I,{onClickCancel:function(){H(!1)},onClickSubmit:function(e){return de(e)}}):"",r.a.createElement("div",{id:"liveView-container"},r.a.createElement("div",{className:"sideBar bg-purple-900"},null!=o&&o.length>0?o.map((function(e,t){return r.a.createElement("div",{key:e.name+e.Hdl+t},r.a.createElement("button",{onClick:function(t){return function(e,t,a){U(t),w(!0);var n="".concat(ae,"/customviews/").concat(a);fetch(n,{headers:{Accept:"application/json",Authorization:ee}}).then((function(e){return e.json()})).then((function(e){void 0!==e&&null!==e&&ue(e)})).catch((function(e){console.log("fetchSelectedLiveViewData error --------\x3e"+e),w(!1)}))}(0,e.Name,e.Hdl)},className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded inline-flex my-2 justify-center w-full"},e.Name))})):""),r.a.createElement("div",{className:"liveView-wrapper"},S?r.a.createElement("div",{className:"relative"},r.a.createElement("div",{className:"m-4"},r.a.createElement("label",{className:"inline-block text-gray-700 text-sm font-bold ",htmlFor:"username"},"Selected LiveView:"),r.a.createElement("p",{className:"inline-block ml-4"},z)),void 0!==h&&h.length>0&&r.a.createElement("div",null,function(){var e=[];h.map((function(t){var a=Object.keys(t.attrs),n={};a.map((function(e){return n[t.attrs[e].name]=t.attrs[e].value,""})),n.isEdited=!1,e.push(n)})),$=e;var t=["TAG NUMBER","ASSET","CLASS NAME","DESCRIPTION"];return localStorage.setItem("pre_kml_data",JSON.stringify(e)),localStorage.setItem("inputsArray",JSON.stringify(O)),r.a.createElement("div",{className:"mb-4 max-w rounded w-full shadow  p-5"},r.a.createElement("div",{className:"flex mb-2"},r.a.createElement("p",{className:"text-xl font-bold mb-3"},"Attributes"),r.a.createElement("div",{className:"ml-5"},r.a.createElement("button",{className:"inline-flex justify-center py-2 px-3 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-purple-900 hover:bg-purple-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",onClick:function(){return H(!0)}},"Save"))),r.a.createElement("div",{className:"table-wrapper"},r.a.createElement("table",{className:"table-auto w-full withTable"},r.a.createElement("thead",null,r.a.createElement("tr",{key:"head_row"},t.map((function(e){return r.a.createElement("td",null,e)})))),r.a.createElement("tbody",null,e.map((function(e,a){return r.a.createElement("tr",{key:"body_row"+a},t.map((function(t,n){return r.a.createElement("td",{key:"body_td_"+t+a+n},r.a.createElement("input",{onChange:function(e){return function(e,t,a){var n=[];0===Y.length?(q($),n=Object(L.a)($)):n=Object(L.a)(Y);var r=n[a];r[t]=e,r.isEdited=!0,K(n)}(e.target.value,t,a)},defaultValue:e[t]}))})))}))))))}())):r.a.createElement("div",{className:"centerItem"},r.a.createElement("img",{draggable:!1,width:300,src:C.a,alt:""}),r.a.createElement("p",{className:"text-center mt-3 text-purple-800"},"Select the liveview to show the data here")))))},Q=a(18),Y=function(e){var t=e.text;return r.a.createElement("div",null,r.a.createElement("img",{alt:"Marker",src:"https://img.icons8.com/fluent/48/000000/marker-storm.png"}),t)};var K=function(e){var t=Object(n.useState)([]),a=Object(l.a)(t,2),o=(a[0],a[1],Object(n.useState)()),c=Object(l.a)(o,2),s=(c[0],c[1],Object(n.useState)([])),u=Object(l.a)(s,2),m=u[0],p=u[1],d=Object(n.useState)(!1),f=Object(l.a)(d,2),h=f[0],g=f[1],v=Object(n.useState)([]),E=Object(l.a)(v,2),w=E[0],x=(E[1],Object(n.useState)(!1)),O=Object(l.a)(x,2),k=O[0],S=O[1],L=Object(n.useState)([]),T=Object(l.a)(L,2),D=(T[0],T[1],Object(n.useState)("")),M=Object(l.a)(D,2),G=(M[0],M[1],Object(n.useState)(!1)),P=Object(l.a)(G,2),z=P[0],U=(P[1],Object(n.useState)({})),B=Object(l.a)(U,2),F=B[0],R=B[1],H=Object(n.useState)(!1),V=Object(l.a)(H,2),J=V[0],q=V[1],Z={},W={},K=localStorage.getItem("b_token"),X=localStorage.getItem("prefixUrl"),$=("https://".concat(X,".pim360.io/api"),localStorage.getItem("userName")),ee=localStorage.getItem("password");Object(n.useEffect)((function(){var e=new URLSearchParams(window.location.search).get("TAGGED_ITEM");e&&te(e)}),[]);var te=function(e){g(!0);var t="https://pim4.azurewebsites.net/api/pim360?function_name=auth&username=".concat($,"&password=").concat(ee,"&purl=").concat(X),a=new Headers;fetch(t,{method:"GET",headers:a,redirect:"follow"}).then((function(e){return e.json()})).then((function(t){void 0!==t&&null!==t&&(Q.defaults.headers.common={Authorization:localStorage.getItem("b_token")},ae(e))})).catch((function(e){console.log("doAuth error--------\x3e",JSON.stringify(e)),g(!1)}))},ae=function(e){b.objectByHdl("TAGGED_ITEM",e).then((function(e){if(null!=e){S(!0);var t=Object.keys(e.attrs),a={};t.map((function(t){a[e.attrs[t].name]=e.attrs[t].value})),p(e),g(!1)}})).catch((function(e){console.log("fetchTaggedItems error----------\x3e"+JSON.stringify(e)),g(!1)}))},ne=function(){g(!0);fetch("https://pim4.azurewebsites.net/api/pim360?function_name=import",{method:"POST",headers:{"Content-Type":"application/json",Authorization:K},body:JSON.stringify(Z)}).then((function(e){return e.json()})).then((function(e){console.error("secondApi response ------------\x3e",e),re()})).catch((function(e){console.error(" secondApi Error:",e),g(!1)}))},re=function(){g(!0);var e=new Headers;fetch("https://pim4.azurewebsites.net/api/pim360?function_name=download-new",{method:"GET",headers:e,redirect:"follow"}).then((function(e){return e.json()})).then((function(e){oe(e.response)})).catch((function(e){console.error("thirdApi Error:",e),g(!1)}))},oe=function(e){g(!0);var t="https://pim4.azurewebsites.net/api/pim360?function_name=update&file_hdl=".concat(e);fetch(t,{method:"POST",headers:{"Content-Type":"application/json",Authorization:K},body:JSON.stringify(Z)}).then((function(e){return e.json()})).then((function(e){console.error(" fourthApi response---------\x3e:",e),g(!1),alert("Successfully updated.")})).catch((function(e){console.error(" fourthApi Error:",e),g(!1)}))},ce=function(e){Z={finalObj:e,xlsxData:[F]},q(!1),function(){g(!0);var e="https://pim4.azurewebsites.net/api/pim360?function_name=auth&username=".concat($,"&password=").concat(ee,"&purl=").concat(X),t=new Headers;fetch(e,{method:"GET",headers:t,redirect:"follow"}).then((function(e){return e.json()})).then((function(e){ne()})).catch((function(e){console.error("firstApi Error:",e),g(!1)}))}()};return r.a.createElement("div",null,r.a.createElement(i,{showLogoutButton:!0,showSearch:!1}),h?r.a.createElement("div",{className:"popUpContainer"},r.a.createElement("div",{className:"loader"})):"",J?r.a.createElement(I,{onClickCancel:function(){q(!1)},onClickSubmit:function(e){return ce(e)}}):"",r.a.createElement("div",{id:"liveView-link-container"},r.a.createElement("div",{className:"liveView-wrapper"},k?r.a.createElement("div",{className:"relative"},void 0!==m&&Object.keys(m).length>0&&r.a.createElement("div",null,function(){var e=[],t=Object.keys(m.attrs),a={};return t.map((function(e){return a[m.attrs[e].name]=m.attrs[e].value,""})),e.push(a),W=e[0],localStorage.setItem("pre_kml_data",JSON.stringify(e)),localStorage.setItem("inputsArray",JSON.stringify(w)),r.a.createElement("div",{className:"flex mb-4"},r.a.createElement("div",{className:"w-1/2 m-h-500px p-5 pr-0"},e.length>0&&e[0].hasOwnProperty("Approved Longitude")&&e[0].hasOwnProperty("Approved Latitude")?r.a.createElement("div",{className:"w-full h-full shadow-lg"},r.a.createElement("a",{target:"_blank",href:"https://earth.google.com/web/search/Arsenal+fc/@".concat(parseFloat(e[0]["Approved Latitude"]),",").concat(parseFloat(e[0]["Approved Longitude"]),",9.09858867a,612.98636056d,35y,-40.1316669h,45.00000069t,0")},"Click here for Google Earth"),r.a.createElement(y.a,{bootstrapURLKeys:{key:"AIzaSyDNeF0TGdzD6PN696-ZWgdP7z9ltW0l1QY"},options:function(){return{mapTypeControl:!0,mapTypeId:"satellite"}},defaultCenter:{lat:parseFloat(e[0]["Approved Latitude"]),lng:parseFloat(e[0]["Approved Longitude"])},center:{lat:parseFloat(e[0]["Approved Latitude"]),lng:parseFloat(e[0]["Approved Longitude"])},distanceToMouse:function(){},defaultZoom:e?18:6},e.map((function(e){return r.a.createElement(Y,{lat:e["Approved Latitude"],lng:e["Approved Longitude"]})})))):r.a.createElement("div",{className:"w-full h-full shadow-lg relative"},r.a.createElement("div",{className:"centerItem"},r.a.createElement("img",{className:"attr_chat mx-auto",draggable:!1,src:j.a}),r.a.createElement("p",{className:"text-center mt-3 text-purple-800"},"Invalid map data")))),r.a.createElement("div",{className:"w-1/2 m-h-500px p-5 pb-0"},r.a.createElement("div",{className:"max-w rounded w-full shadow  p-5"},r.a.createElement("p",{className:"text-xl font-bold mb-3"},"Attributes"),r.a.createElement(N.a,{className:"border-0",allowZeroExpanded:!0,preExpanded:["attributes"]},e.map((function(t,a){return r.a.createElement(N.b,Object(_.a)({className:"shadow-md mb-3",key:t.Latitude,uuid:"attributes"},"key",t+a),r.a.createElement(N.d,{className:"bg-gray-400 p-2"},r.a.createElement(N.c,{className:"w-full border-none outline-none focus:border-0 inline-flex"},"\u2003",e[a].hasOwnProperty("Tag Number")?e[a]["Tag Number"]:e[a]["TAG NUMBER"])),r.a.createElement(N.e,{className:"liveView-item-container"},r.a.createElement("table",{className:"table-auto w-full"},r.a.createElement("tbody",null,Object.keys(t).map((function(e,a){return r.a.createElement("tr",{key:e+a},r.a.createElement("td",{className:"border px-4 py-2"},e),z?r.a.createElement("td",{className:"border px-4 py-2"},r.a.createElement("input",{onChange:function(t){return function(e,t){var a={};Object.keys(F).length>0?(a=Object(A.a)({},F),W={}):a=Object(A.a)({},W),a[t]=e,R(a)}(t.target.value,e)},defaultValue:t[e]})):r.a.createElement("td",{className:"border px-4 py-2"},t[e]))}))))))}))))))}())):r.a.createElement("div",{className:"centerItem"},r.a.createElement("img",{draggable:!1,width:300,src:C.a,alt:"errorImage"}),r.a.createElement("p",{className:"text-center mt-3 text-purple-800"},"Unable to show the data here")))))},X=a(55),$=a.n(X),ee=a(32),te=a.n(ee),ae=a(18);var ne=function(e){var t=Object(n.useState)([]),a=Object(l.a)(t,2),o=a[0],c=a[1],s=Object(n.useState)([]),u=Object(l.a)(s,2),m=(u[0],u[1]),p=Object(n.useState)([]),d=Object(l.a)(p,2),f=d[0],h=d[1],g=Object(n.useState)([]),v=Object(l.a)(g,2),E=v[0],y=v[1],w=Object(n.useState)(!1),x=Object(l.a)(w,2),O=x[0],k=x[1],S=Object(n.useState)(!1),_=Object(l.a)(S,2),A=_[0],I=_[1],T=Object(n.useState)(!1),D=Object(l.a)(T,2),M=D[0],G=D[1],P=Object(n.useState)(),z=Object(l.a)(P,2),U=(z[0],z[1],Object(n.useState)(!1)),B=Object(l.a)(U,2),F=B[0],R=B[1],V=Object(n.useState)(!1),J=Object(l.a)(V,2),q=J[0],Z=J[1],W=Object(n.useState)(!1),Q=Object(l.a)(W,2),Y=Q[0],K=Q[1],X=Object(n.useState)(!1),ee=Object(l.a)(X,2),ne=ee[0],re=ee[1],oe=function(e){Object.keys(e);var t=[],a=[];e.fixed.map((function(n){var r=e.fixed[e.fixed.length-1],o=0;o=parseInt(r.route_chainage)<25e3?300:1500;var c=Object.keys(n.refObj.attrs),l={};c.map((function(e,t){l[n.refObj.attrs[e].name]=n.refObj.attrs[e].value}));var s=Number(Object.values(n.refObj.attrs).filter((function(e){return"Approved Latitude"==e.name||"latitude"==e.name.toLowerCase()}))[0].value),i=Number(Object.values(n.refObj.attrs).filter((function(e){return"Approved Longitude"==e.name||"longitude"==e.name.toLowerCase()}))[0].value);s&&a.push({lat:s,lng:i,ref_or_fix:"fix"}),t.push({startDate:n.route_chainage,endDate:n.route_chainage+o,taskName:"Fixed",type:n.refObj.type,status:"RUNNING",attrs:[{name:"Tag: ",value:n.objId}],hdl:n.hdl,lat:s,lng:i})})),e.ref.map((function(n){var r=e.ref[e.ref.length-1],o=0;o=parseInt(r.route_chainage)<25e3?300:1500;var c=Number(Object.values(n.refObj.attrs).filter((function(e){return"Approved Latitude"==e.name||"latitude"==e.name.toLowerCase()}))[0].value),l=Number(Object.values(n.refObj.attrs).filter((function(e){return"Approved Longitude"==e.name||"longitude"==e.name.toLowerCase()}))[0].value);c&&a.push({lat:c,lng:l,ref_or_fix:"ref"}),t.push({startDate:n.route_chainage,endDate:n.route_chainage+o,taskName:"Reference",type:n.refObj.type,status:"SUCCEEDED",attrs:[{name:"Tag: ",value:n.objId}],hdl:n.hdl,lat:c,lng:l})})),window.InitializeMap(a),c(t);window.d3.gantt("gantt",t,ce).taskTypes(["Fixed","Reference"]).taskStatus({SUCCEEDED:"bar",FAILED:"bar-failed",RUNNING:"bar-running",KILLED:"bar-killed"}).tickFormat("%H:%M")(t)},ce=function(e){console.log("clickedObj -------\x3e "+JSON.stringify(e)),h([]),y([]),re(!1),I(!0);ae.defaults.headers.common={Authorization:localStorage.getItem("b_token")};b.objectByHdl(e.type,e.hdl).then((function(e){if(null!=e){var t=Object.keys(e.attrs),a={};t.map((function(t){a[e.attrs[t].name]=e.attrs[t].value})),h(a),I(!1)}})).catch((function(e){I(!1),console.log("objectByHdl error----------\x3e"+JSON.stringify(e))})),b.objectAssociations("TAGGED_ITEM",e.hdl,"DOCUMENT").then((function(e){var t=[];null!=e&&e.items.length>0&&(e.items.map((function(e){t.push({name:e.ID,class:e.ClsName,link:e.Url})})),y(t),I(!1))})).catch((function(e){I(!1),console.log("objectAssociations error----------\x3e"+JSON.stringify(e))})),window.myMap.setZoom(17),window.myMap.panTo({lat:e.lat,lng:e.lng})},le=function(e){var t=Object.keys(e.dataMapEq.Issue),a=[];t.map((function(t){e.dataMapEq.Issue[t].map((function(e){""!=e.attribute_name&&a.push({startDate:e.from_route_chainage,endDate:e.to_route_chainage,taskName:e.class_name,type:e.refObj.Type,status:"KILLED",attrs:[{name:e.attribute_name+": ",value:e.attribute_value+" "+e.attribute_uom},{name:"Ref: ",value:e.refObj.ID}],hdl:e.refObj.Hdl})}))}));var n=Object.keys(e.dataMapEq.Value);n.map((function(t){e.dataMapEq.Value[t].map((function(e){""!=e.attribute_name&&a.push({startDate:e.from_route_chainage,endDate:e.to_route_chainage,taskName:e.class_name,status:"RUNNING",attrs:[{name:e.attribute_name+": ",value:e.attribute_value+" "+e.attribute_uom},{name:"Ref: ",value:e.refObj.ID}],hdl:e.refObj.Hdl})}))})),m(a);var r=[].concat(Object(L.a)(t),Object(L.a)(n));window.d3.gantt("associate_gantt",a,ce).taskTypes(r).taskStatus({SUCCEEDED:"bar",FAILED:"bar-failed",RUNNING:"bar-running",KILLED:"bar-killed"}).tickFormat("%H:%M")(a)};return Object(n.useEffect)((function(){}),[]),r.a.createElement("div",null,r.a.createElement(i,{showLogoutButton:!0,showSearch:!0,onClickSearch:function(e){var t;R(!1),h([]),y([]),t=e,k(!0),ae.defaults.headers.common={Authorization:localStorage.getItem("b_token")},b.getRouteObj(t).then((function(e){console.log("response ------------\x3e"),console.log(e),void 0!=e&&null!=e&&(R(!0),void 0!=e.dataMap&&null!=e.dataMap&&Object.keys(e.dataMap).length>0?(console.log("inside if"),Z(!0),oe(e.dataMap)):(console.log("inside else"),Z(!1)),void 0!=e.dataMapEq&&null!=e.dataMapEq&&Object.keys(e.dataMapEq).length>0?(K(!0),le(e)):K(!1)),console.log("isGanntHaveData-----------\x3e"+q),console.log("isAssociateGanntHaveData ------------ "+Y),k(!1)})).catch((function(e){console.log("doApi error ------------\x3e"),console.log(e),k(!1),console.log("isGanntHaveData-----------\x3e"+q),console.log("isAssociateGanntHaveData ------------ "+Y),Y||o||G(!0)}))}}),O?r.a.createElement("div",{className:"popUpContainer"},r.a.createElement("div",{className:"loader"})):"",A?r.a.createElement("div",{className:"popUpContainer"},r.a.createElement("div",{className:"loader"})):"",F?r.a.createElement("div",{className:"relative"},r.a.createElement("svg",{style:{height:0,position:"absolute"}},r.a.createElement("defs",null,r.a.createElement("linearGradient",{id:"red",x1:"0%",y1:"0%",x2:"100%",y2:"0%"},r.a.createElement("stop",{offset:"0%",style:{stopColor:"#fd3c3c",stopOpacity:1}}),r.a.createElement("stop",{offset:"100%",style:{stopColor:"#dc281e",stopOpacity:1}})),r.a.createElement("linearGradient",{id:"green",x1:"0%",y1:"0%",x2:"100%",y2:"0%"},r.a.createElement("stop",{offset:"0%",style:{stopColor:"#7bdb06",stopOpacity:1}}),r.a.createElement("stop",{offset:"100%",style:{stopColor:"#36ac00",stopOpacity:1}})),r.a.createElement("linearGradient",{id:"blue",x1:"0%",y1:"0%",x2:"100%",y2:"0%"},r.a.createElement("stop",{offset:"0%",style:{stopColor:"#00c6ff",stopOpacity:1}}),r.a.createElement("stop",{offset:"100%",style:{stopColor:"#0072ff",stopOpacity:1}})),r.a.createElement("linearGradient",{id:"orange",x1:"0%",y1:"0%",x2:"100%",y2:"0%"},r.a.createElement("stop",{offset:"0%",style:{stopColor:"#fe8c00",stopOpacity:1}}),r.a.createElement("stop",{offset:"100%",style:{stopColor:"#f83600",stopOpacity:1}})))),r.a.createElement("div",{className:"flex"},r.a.createElement("div",{className:"w-1/4 pb-5"},r.a.createElement("div",{id:"dvMap",className:ne?"opacity-25":"opacity-100 min-h-full"}),ne?r.a.createElement("div",{className:"min-h-full mx-auto border-dashed border border-gray-600 relative mb-5"},r.a.createElement("div",{className:"centerItem"},r.a.createElement("img",{className:"attr_chat mx-auto",draggable:!1,src:j.a}),r.a.createElement("p",{className:"text-center mt-3 text-purple-800"},"Invalid map data"))):""),r.a.createElement("div",{className:"w-3/4 p-5"},r.a.createElement("div",{id:"gantt",className:q?"block":"hidden",style:{minHeight:"130px"}}),q?"":r.a.createElement("div",{className:"h-64 mx-auto border-dashed border border-gray-600 relative mb-5"},r.a.createElement("div",{className:"centerItem"},r.a.createElement("img",{className:"attr_chat mx-auto",draggable:!1,src:te.a}),r.a.createElement("p",{className:"text-center mt-3 text-purple-800"},"No fixed and refrence data found"))),r.a.createElement("div",{id:"associate_gantt",className:Y?"block":"hidden",style:{height:"200px"}}),Y?"":r.a.createElement("div",{className:"h-64 mx-auto border-dashed border border-gray-600 relative mb-5"},r.a.createElement("div",{className:"centerItem"},r.a.createElement("img",{className:"attr_chat mx-auto",draggable:!1,src:te.a}),r.a.createElement("p",{className:"text-center mt-3 text-purple-800"},"No associatives data found"))),r.a.createElement("div",{className:"grid grid-cols-2 gap-4"},void 0!=f&&""!=f?r.a.createElement("div",null,r.a.createElement(N.a,{className:"border-0",preExpanded:["attributes"]},r.a.createElement(N.b,{className:"shadow-md mb-3",uuid:"attributes"},r.a.createElement(N.d,{className:"bg-gray-400 p-2"},r.a.createElement(N.c,{className:"w-full border-none outline-none focus:border-0 inline-flex"},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-arrow-right"},r.a.createElement("line",{x1:"5",y1:"12",x2:"19",y2:"12"}),r.a.createElement("polyline",{points:"12 5 19 12 12 19"})),"\u2003","Attributes")),r.a.createElement(N.e,{className:"h-56 overflow-y-auto"},r.a.createElement("table",{class:"table-auto w-full"},r.a.createElement("tbody",null,Object.keys(f).map((function(e){return r.a.createElement("tr",null,r.a.createElement("td",{class:"border px-4 py-2"},e),r.a.createElement("td",{class:"border px-4 py-2"},f[e]))})))))))):r.a.createElement("div",{className:"h-64 border-dashed border border-gray-600 relative"},r.a.createElement("div",{className:"centerItem"},r.a.createElement("img",{className:"attr_chat mx-auto",draggable:!1,src:H.a}),r.a.createElement("p",{className:"text-center mt-3 text-purple-800"},"No attributes data found"))),void 0!=E&&E.length>0?r.a.createElement("div",null,r.a.createElement(N.a,{className:"border-0",preExpanded:["doc"]},r.a.createElement(N.b,{className:"shadow-md mb-3",uuid:"doc"},r.a.createElement(N.d,{className:"bg-gray-400 p-2"},r.a.createElement(N.c,{className:"w-full border-none outline-none focus:border-0 inline-flex"},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-arrow-right"},r.a.createElement("line",{x1:"5",y1:"12",x2:"19",y2:"12"}),r.a.createElement("polyline",{points:"12 5 19 12 12 19"})),"\u2003","Document Links")),r.a.createElement(N.e,{className:"h-56 overflow-y-auto"},r.a.createElement("table",{class:"table-auto w-full"},r.a.createElement("tbody",null,E.map((function(e){return r.a.createElement("tr",null,r.a.createElement("td",{class:"border px-4 py-2"},e.name),r.a.createElement("td",{class:"border px-4 py-2"},e.class),r.a.createElement("td",{class:"border px-4 py-2"},r.a.createElement("a",{href:e.link,target:"_blank"},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"17",height:"17",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-link"},r.a.createElement("path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"}),r.a.createElement("path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"})))))})))))))):r.a.createElement("div",{className:"h-64 border-dashed border border-gray-600 relative"},r.a.createElement("div",{className:"centerItem"},r.a.createElement("img",{className:"attr_chat mx-auto",draggable:!1,src:H.a}),r.a.createElement("p",{className:"text-center mt-3 text-purple-800"},"No documents data found"))))))):r.a.createElement("div",{className:"centerItem"},r.a.createElement("img",{draggable:!1,width:300,src:C.a}),r.a.createElement("p",{className:"text-center mt-3 text-purple-800"},"Search to show the data here")),M?r.a.createElement("div",{className:"centerItem"},r.a.createElement("img",{draggable:!1,width:300,src:$.a}),r.a.createElement("p",{className:"text-center mt-3 text-purple-800"},"Something went wrong. Please try again!!")):"")};z.a.accessToken="pk.eyJ1IjoicmFuaml0aGRpbmFrYXJhbiIsImEiOiJja2h1bHd2azAwNmZvMnZvMm5jYXZubGt1In0.tG3PJN1RAiiFoDhCBFvADQ";var re=function(e){var t=e.text;return r.a.createElement("div",null,r.a.createElement("img",{alt:"Marker",src:"https://res.cloudinary.com/di9ckb63k/image/upload/v1606463408/ref_1_bzw94s.png"}),t)};var oe=function(e){var t=Object(n.useState)([]),a=Object(l.a)(t,2),o=a[0],c=a[1],i=Object(n.useState)(!1),u=Object(l.a)(i,2),m=u[0],p=u[1],d=Object(n.useState)(!1),f=Object(l.a)(d,2),h=f[0],g=f[1],b=Object(n.useState)(""),v=Object(l.a)(b,2),E=(v[0],v[1]),w=Object(n.useState)(""),x=Object(l.a)(w,2),O=x[0],j=x[1],k=Object(n.useState)(!1),S=Object(l.a)(k,2),_=S[0],L=S[1],I=Object(n.useState)({}),T=Object(l.a)(I,2),D=T[0],M=T[1],G=Object(n.useState)([]),P=Object(l.a)(G,2),U=P[0],B=P[1],F=Object(n.useRef)(null),R=Object(n.useState)(5),H=Object(l.a)(R,2),V=H[0],J=H[1],q=Object(n.useState)(34),Z=Object(l.a)(q,2),W=Z[0],Q=Z[1],Y=Object(n.useState)(5),K=Object(l.a)(Y,2),X=K[0],$=(K[1],null),ee=localStorage.getItem("b_token"),te=localStorage.getItem("prefixUrl"),ae="https://".concat(te,".pim360.io/api"),ne=localStorage.getItem("userName"),oe=localStorage.getItem("password"),ce=Object(n.useState)(),le=Object(l.a)(ce,2),se=le[0],ie=le[1],ue=Object(n.useState)(""),me=Object(l.a)(ue,2),pe=me[0],de=me[1],fe=Object(n.useState)([]),he=Object(l.a)(fe,2),ge=he[0],be=he[1],ve=Object(n.useState)([]),Ee=Object(l.a)(ve,2),ye=Ee[0],we=Ee[1],xe=Object(n.useState)(!0),Ne=Object(l.a)(xe,2),Oe=Ne[0],je=Ne[1],ke=Object(n.useState)("Select the liveview / tag number to show the data here"),Se=Object(l.a)(ke,2),_e=Se[0],Ae=Se[1],Le=Object(s.e)();Object(n.useEffect)((function(){Ie()}),[]);var Ie=function(){p(!0);var e="".concat(ae,"/customviews?type=LIVE_VIEW");fetch(e,{headers:{Accept:"application/json",Authorization:ee}}).then((function(e){return e.json()})).then((function(e){void 0!==e&&null!==e&&c(e),p(!1)})).catch((function(e){console.log("error --------\x3e"+e),p(!1)}))},Te=function(){var e="https://pim4.azurewebsites.net/api/pim360?function_name=liveview_to_geojson&live_view_name=".concat(O),t=new Headers;fetch(e,{method:"GET",headers:t,redirect:"follow"}).then((function(e){return e.json()})).then((function(e){console.log("result response-------",JSON.stringify(e)),null!=e&&function(e){var t=Object(A.a)({},e),a=[];t.features.map((function(e){var t=Object.keys(e.properties),n="";n+="<p>",t.map((function(t){"undefined"!==t&&"(unresolved)"!==t&&(n+=t,n+=" : ",n+=e.properties[t],n+=" <br> ")})),n+="</p>";var r=e.properties["TAG NUMBER"]?e.properties["TAG NUMBER"]:e.properties["Tag Number"],o=e.properties[void 0]?e.properties[void 0]:e.properties["(unresolved)"],c="<a href='https://".concat(te,".pim360.io/object/TAGGED_ITEM/").concat(o,"' target='_blank'> ").concat(r,' <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a>'),l="<div class='description-wrapper'><div class='header'></div><div class=\"content\">".concat(c).concat(n,"</div></div>");a.push({lat:Number(e.geometry.coordinates[1]),lng:Number(e.geometry.coordinates[0]),ref_or_fix:"fix",desc:l}),e.properties.description=l;var s=e.geometry.coordinates[1],i=e.geometry.coordinates[0];e.geometry.coordinates[0]=i,e.geometry.coordinates[1]=s})),Q(t.features[0].geometry.coordinates[1]),J(t.features[0].geometry.coordinates[0]),M(t),B(a),g(!0),p(!1)}(e)})).catch((function(e){p(!1),console.log("fetchSelectedLiveViewData error ---------\x3e",e),alert(e)}))};Object(n.useEffect)((function(){h&&(_?(($=new z.a.Map({container:"map-container",style:"mapbox://styles/mapbox/streets-v11",center:[V,W],zoom:X})).addControl(new z.a.NavigationControl,"top-right"),$.on("load",(function(){$.loadImage("https://res.cloudinary.com/di9ckb63k/image/upload/v1606463408/ref_1_bzw94s.png",(function(e,t){if(e)throw e;$.addImage("custom-marker",t),$.addSource("points",{type:"geojson",data:D,cluster:!0,clusterMaxZoom:14,clusterRadius:50}),$.addLayer({id:"points",type:"symbol",source:"points",layout:{"icon-image":"custom-marker","text-field":["get","title"],"text-font":["Open Sans Semibold","Arial Unicode MS Bold"],"text-offset":[0,1.25],"text-anchor":"top"}}),$.addLayer({id:"clusters",type:"circle",source:"points",filter:["has","point_count"],paint:{"circle-color":["step",["get","point_count"],"#51bbd6",100,"#f1f075",750,"#f28cb1"],"circle-radius":["step",["get","point_count"],20,100,30,750,40]}}),$.addLayer({id:"cluster-count",type:"symbol",source:"points",filter:["has","point_count"],layout:{"text-field":"{point_count_abbreviated}","text-font":["DIN Offc Pro Medium","Arial Unicode MS Bold"],"text-size":12}}),$.addLayer({id:"unclustered-point",type:"circle",source:"points",filter:["!",["has","point_count"]],paint:{"circle-color":"#11b4da","circle-radius":4,"circle-stroke-width":1,"circle-stroke-color":"#fff"}}),$.on("click","clusters",(function(e){var t=$.queryRenderedFeatures(e.point,{layers:["clusters"]}),a=t[0].properties.cluster_id;$.getSource("points").getClusterExpansionZoom(a,(function(e,a){e||$.easeTo({center:t[0].geometry.coordinates,zoom:a})}))})),$.on("click","unclustered-point",(function(e){var t=e.features[0].geometry.coordinates.slice();for(e.features[0].properties.mag,e.features[0].properties.tsunami;Math.abs(e.lngLat.lng-t[0])>180;)t[0]+=e.lngLat.lng>t[0]?360:-360})),$.on("mouseenter","clusters",(function(){$.getCanvas().style.cursor="pointer"})),$.on("mouseleave","clusters",(function(){$.getCanvas().style.cursor=""})),$.on("click","points",(function(e){for(var t=e.features[0].geometry.coordinates.slice(),a=e.features[0].properties.description;Math.abs(e.lngLat.lng-t[0])>180;)t[0]+=e.lngLat.lng>t[0]?360:-360;(new z.a.Popup).setLngLat(t).setHTML(a).addTo($)})),$.on("mouseenter","places",(function(){$.getCanvas().style.cursor="pointer"})),$.on("mouseleave","places",(function(){$.getCanvas().style.cursor=""}))}))}))):window.InitializeMap(U))}),[_,h]);var Ce=function(){je(!1),be([]),""!=O&&function(){p(!0);var e="https://pim4.azurewebsites.net/api/pim360?function_name=auth&username=".concat(ne,"&password=").concat(oe,"&purl=").concat(te),t=new Headers;fetch(e,{method:"GET",headers:t,redirect:"follow"}).then((function(e){return e.json()})).then((function(e){void 0!==e&&null!==e&&Te()})).catch((function(e){console.log("doAuth error--------\x3e",JSON.stringify(e)),p(!1)}))}()};return r.a.createElement("div",{id:"searchContainer"},m?r.a.createElement("div",{className:"popUpContainer"},r.a.createElement("div",{className:"loader"})):"",r.a.createElement("div",{class:"header-nav"},r.a.createElement("div",{className:"flex items-center flex-shrink-0 text-black mr-6 cursor-pointer",onClick:function(){return Le.push("home")}},r.a.createElement("img",{alt:"Logo",className:"w-1/2",src:"https://d-lab-2020.pim360.io/img/pim-logo.svg"})),r.a.createElement("div",null,r.a.createElement("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"username"},"LiveView"),r.a.createElement("div",{className:"inline-block relative w-1/1"},r.a.createElement("select",{class:"block appearance-none w-full bg-gray-300 border border-gray-400 hover:border-gray-500 px-4 py-2 pr-8 rounded shadow leading-tight focus:outline-none focus:shadow-outline",onChange:function(e){var t=e.target.options[e.target.selectedIndex].text;j(t),E(e.target.value)}},r.a.createElement("option",{value:""},"Select"),null!=o&&o.length>0?o.map((function(e,t){return r.a.createElement("option",{name:e.Name,value:e.Hdl},e.Name)})):""),r.a.createElement("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},r.a.createElement("svg",{class:"fill-current h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},r.a.createElement("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})))),r.a.createElement("div",{className:"inline-block ml-5"},r.a.createElement("button",{className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded focus:outline-none m-auto",type:"button",onClick:function(){Ce()}},"Submit"))),r.a.createElement("div",null,r.a.createElement("div",{className:"inline-block"},r.a.createElement("label",{className:"block text-gray-700 text-sm font-bold mb-2"},"\u2003"),r.a.createElement("input",{className:se?"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline border-red-500":"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",value:pe,id:"tagNumber",type:"text",placeholder:"Enter your tag number",onChange:function(e){return de(e.target.value)}})),r.a.createElement("div",{className:"inline-block ml-5"},r.a.createElement("button",{className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded focus:outline-none m-auto",type:"button",onClick:function(){!function(){if(je(!1),ie(!1),g(!1),null!==pe&&pe.length>0){p(!0);var e=[],t=0,a=pe.split(",").map((function(e){return e.trim()}));we(a),a.map((function(n){var r="https://"+localStorage.getItem("prefixUrl")+".pim360.io/api/objects/TAGGED_ITEM/id/"+n,o=localStorage.getItem("b_token");return fetch(r,{headers:{Accept:"application/json",Authorization:o}}).then((function(e){return e.json()})).then((function(n){if(void 0!==n.attrs&&null!==n.attrs?e.push(n):console.log(n),(t+=1)===a.length)return p(!1),void be(e)})).catch((function(e){console.log("error --------\x3e"+e),(t+=1)===a.length&&(p(!1),je(!0),Ae("Something went wrong. Please try again"))})),""}))}else ie(!0),console.log("show error")}()}},"Submit")),r.a.createElement("div",{className:"inline-block ml-5"},r.a.createElement("label",{className:"block text-gray-700 text-sm font-bold mb-2"},"\u2003"),r.a.createElement("button",{className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded focus:outline-none m-auto",type:"button",onClick:function(){localStorage.clear(),Le.push("/")}},"Logout")))),r.a.createElement("div",{id:"liveView-container"},r.a.createElement("div",{className:"w-full"},h&&r.a.createElement("div",{className:"relative"},r.a.createElement("div",{className:"m-4"},r.a.createElement("label",{className:"inline-block text-gray-700 text-sm font-bold ",htmlFor:"username"},"Selected LiveView:"),r.a.createElement("p",{className:"inline-block ml-4"},O)),r.a.createElement("div",{className:"m-4"},r.a.createElement("button",{className:_?"btn":"btn-selected",onClick:function(){return L(!1)}},"Google Map"),r.a.createElement("button",{className:_?"btn-selected":"btn",onClick:function(){L(!0)}},"Mapbox")),_&&r.a.createElement("div",{id:"map-container",className:"map-container m-4 map-height width",ref:F}),_?"":r.a.createElement("div",{id:"dvMap",className:_?"opacity-25":"opacity-100 min-h-full width m-4 map-height"})),void 0!==ge&&ge.length>0&&r.a.createElement("div",null,function(){var e=[];return ge.map((function(t){var a=Object.keys(t.attrs),n={};return a.map((function(e){return n[t.attrs[e].name]=t.attrs[e].value,""})),e.push(n),""})),console.log("arrNameValue -------\x3e",e),localStorage.setItem("pre_kml_data",JSON.stringify(e)),localStorage.setItem("inputsArray",JSON.stringify(ye)),r.a.createElement("div",{className:"flex my-4"},r.a.createElement("div",{className:"w-1/2 m-h-500px p-5"},e.length>0&&(e[0].hasOwnProperty("Latitude")||e[0].hasOwnProperty("LATITUDE")||e[0].hasOwnProperty("Approved Latitude"))?r.a.createElement("div",{className:"w-full h-full shadow-lg"},r.a.createElement(y.a,{bootstrapURLKeys:{key:"AIzaSyDNeF0TGdzD6PN696-ZWgdP7z9ltW0l1QY"},options:function(){return{mapTypeControl:!0}},defaultCenter:{lat:parseFloat(e[0].hasOwnProperty("Latitude")?e[0].Latitude:e[0].hasOwnProperty("LATITUDE")?e[0].LATITUDE:e[0].hasOwnProperty("Approved Latitude")?e[0]["Approved Latitude"]:0),lng:parseFloat(e[0].hasOwnProperty("Longitude")?e[0].Longitude:e[0].hasOwnProperty("LONGITUDE")?e[0].LONGITUDE:e[0].hasOwnProperty("Approved Longitude")?e[0]["Approved Longitude"]:0)},center:{lat:parseFloat(e[0].hasOwnProperty("Latitude")?e[0].Latitude:e[0].hasOwnProperty("LATITUDE")?e[0].LATITUDE:e[0].hasOwnProperty("Approved Latitude")?e[0]["Approved Latitude"]:0),lng:parseFloat(e[0].hasOwnProperty("Longitude")?e[0].Longitude:e[0].hasOwnProperty("LONGITUDE")?e[0].LONGITUDE:e[0].hasOwnProperty("Approved Longitude")?e[0]["Approved Longitude"]:0)},distanceToMouse:function(){},defaultZoom:e?18:6},e.map((function(e){return r.a.createElement(re,{lat:parseFloat(e.hasOwnProperty("Latitude")?e.Latitude:e.hasOwnProperty("LATITUDE")?e.LATITUDE:e.hasOwnProperty("Approved Latitude")?e["Approved Latitude"]:0),lng:parseFloat(e.hasOwnProperty("Longitude")?e.Longitude:e.hasOwnProperty("LONGITUDE")?e.LONGITUDE:e.hasOwnProperty("Approved Longitude")?e["Approved Longitude"]:0)})})))):r.a.createElement("div",{className:"w-full h-full shadow-lg relative"},r.a.createElement("div",{className:"centerItem"},r.a.createElement("img",{className:"attr_chat mx-auto",draggable:!1,src:$}),r.a.createElement("p",{className:"text-center mt-3 text-purple-800"},"Invalid map data")))),r.a.createElement("div",{className:"w-1/2 m-h-500px"},r.a.createElement("div",{className:"max-w rounded w-full shadow  p-5"},r.a.createElement("p",{className:"text-xl font-bold mb-3"},"Attributes"),r.a.createElement(N.a,{className:"border-0",allowZeroExpanded:!0,preExpanded:["attributes"]},e.map((function(e,t){return r.a.createElement(N.b,{className:"shadow-md mb-3",key:t,uuid:"attributes"},r.a.createElement(N.d,{className:"bg-gray-400 p-2"},r.a.createElement(N.c,{className:"w-full border-none outline-none focus:border-0 inline-flex"},"\u2003",ye[t])),r.a.createElement(N.e,null,r.a.createElement("table",{class:"table-auto w-full"},r.a.createElement("tbody",null,Object.keys(e).map((function(t){return r.a.createElement("tr",null,r.a.createElement("td",{class:"border px-4 py-2"},t),r.a.createElement("td",{class:"border px-4 py-2"},e[t]))}))))))}))))))}()),Oe&&r.a.createElement("div",{className:"centerItem"},r.a.createElement("img",{draggable:!1,alt:"",width:300,src:C.a}),r.a.createElement("p",{className:"text-center mt-3 text-purple-800"},_e)))))};var ce=function(e){return Object(n.useEffect)((function(){var e=[{startDate:2885,endDate:3293,taskName:"Hexo",status:"KILLED",attrs:[{name:"Wear",value:"here"},{name:"ABC",value:"XYZ"}]},{startDate:4333,endDate:4453,taskName:"Fixed",status:"RUNNING",tootl:"hello2"},{startDate:7025,endDate:9280,taskName:"Reference",status:"SUCCEEDED",tootl:"hello3"}],t={SUCCEEDED:"bar",FAILED:"bar-failed",RUNNING:"bar-running",KILLED:"bar-killed"};e.sort((function(e,t){return e.endDate-t.endDate}));e[e.length-1].endDate;e.sort((function(e,t){return e.startDate-t.startDate}));e[0].startDate;window.d3.gantt("new-gantt",e).taskTypes(["Hexo","Fixed","Reference"]).taskStatus(t).tickFormat("%H:%M")(e);var a=[{startDate:35,endDate:45,taskName:"DS - Inner Rail Wear",status:"RUNNING",wear:"<0.5km"},{startDate:40,endDate:50,taskName:"DS - Outer Rail Wear",status:"SUCCEEDED",wear:"<0.1km"},{startDate:75,endDate:85,taskName:"DS - Speed Restriction",status:"FAILED",wear:"<10km"},{startDate:100,endDate:110,taskName:"DS - Vertical Clearance Limitation",status:"RUNNING",wear:"<3km"},{startDate:120,endDate:130,taskName:"DS - Vertical Clearance Limitation",status:"KILLED",wear:"<5km"}];a.sort((function(e,t){return e.endDate-t.endDate})),window.d3.gantt("new-gantt2",a).taskTypes(["DS - Inner Rail Wear","DS - Outer Rail Wear","DS - Speed Restriction","DS - Vertical Clearance Limitation"]).taskStatus(t).tickFormat("%H:%M")(a),window.InitializeMap([{lat:21.2379447,lng:72.7792278},{lat:21.2378812,lng:72.7792609},{lat:21.2380032,lng:72.779214},{lat:21.2381679,lng:72.7788641}])}),[]),r.a.createElement("div",null,r.a.createElement(i,{showLogoutButton:!0}),r.a.createElement("br",null),r.a.createElement("svg",{style:{height:0,position:"absolute"}},r.a.createElement("defs",null,r.a.createElement("linearGradient",{id:"red",x1:"0%",y1:"0%",x2:"100%",y2:"0%"},r.a.createElement("stop",{offset:"0%",style:{stopColor:"#fd3c3c",stopOpacity:1}}),r.a.createElement("stop",{offset:"100%",style:{stopColor:"#dc281e",stopOpacity:1}})),r.a.createElement("linearGradient",{id:"green",x1:"0%",y1:"0%",x2:"100%",y2:"0%"},r.a.createElement("stop",{offset:"0%",style:{stopColor:"#7bdb06",stopOpacity:1}}),r.a.createElement("stop",{offset:"100%",style:{stopColor:"#36ac00",stopOpacity:1}})),r.a.createElement("linearGradient",{id:"blue",x1:"0%",y1:"0%",x2:"100%",y2:"0%"},r.a.createElement("stop",{offset:"0%",style:{stopColor:"#00c6ff",stopOpacity:1}}),r.a.createElement("stop",{offset:"100%",style:{stopColor:"#0072ff",stopOpacity:1}})),r.a.createElement("linearGradient",{id:"orange",x1:"0%",y1:"0%",x2:"100%",y2:"0%"},r.a.createElement("stop",{offset:"0%",style:{stopColor:"#fe8c00",stopOpacity:1}}),r.a.createElement("stop",{offset:"100%",style:{stopColor:"#f83600",stopOpacity:1}})))),r.a.createElement("h3",null,"Gantt 1"),r.a.createElement("div",{id:"new-gantt",style:{height:"130px",width:"1000px"}}),r.a.createElement("h3",null,"Gantt 2"),r.a.createElement("div",{id:"new-gantt2",style:{height:"200px",width:"1000px"}}),r.a.createElement("br",null),r.a.createElement("h3",null,"Map"),r.a.createElement("br",null),r.a.createElement("div",{id:"dvMap",style:{height:"500px",width:"35%"}}))},le=(a(103),a(17));var se=function(){return r.a.createElement("div",null,r.a.createElement(le.a,null,r.a.createElement(s.a,{exact:!0,path:"/",component:v}),r.a.createElement(s.a,{exact:!0,path:"/home",component:S}),r.a.createElement(s.a,{exact:!0,path:"/liveView",component:G}),r.a.createElement(s.a,{exact:!0,path:"/poc",component:ce}),r.a.createElement(s.a,{exact:!0,path:"/linearAsset",component:ne}),r.a.createElement(s.a,{exact:!0,path:"/liveview2map",component:U}),r.a.createElement(s.a,{exact:!0,path:"/l2sv1",component:F}),r.a.createElement(s.a,{exact:!0,path:"/l2sv2",component:q}),r.a.createElement(s.a,{exact:!0,path:"/esriMapPOC",component:B}),r.a.createElement(s.a,{exact:!0,path:"/liveView_Table",component:W}),r.a.createElement(s.a,{exact:!0,path:"/liveview2link",component:K}),r.a.createElement(s.a,{exact:!0,path:"/search",component:oe})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(se,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},16:function(e,t,a){e.exports=a.p+"static/media/map.a856e094.svg"},24:function(e,t,a){e.exports=a.p+"static/media/noDataAttribute.cb61ac4f.svg"},32:function(e,t,a){e.exports=a.p+"static/media/gantt_chat.dd2288fc.svg"},55:function(e,t,a){e.exports=a.p+"static/media/bug.9062dc5c.svg"},56:function(e,t,a){e.exports=a(104)}},[[56,1,2]]]);
//# sourceMappingURL=main.68045748.chunk.js.map