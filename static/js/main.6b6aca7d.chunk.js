(this.webpackJsonpdatum360=this.webpackJsonpdatum360||[]).push([[0],{15:function(e,t,a){e.exports=a.p+"static/media/map.a856e094.svg"},19:function(e,t,a){e.exports=a.p+"static/media/search.0f7fe590.svg"},27:function(e,t,a){e.exports=a.p+"static/media/gantt_chat.dd2288fc.svg"},28:function(e,t,a){e.exports=a.p+"static/media/noDataAttribute.cb61ac4f.svg"},50:function(e,t,a){e.exports=a.p+"static/media/bug.9062dc5c.svg"},51:function(e,t,a){e.exports=a(99)},98:function(e,t,a){},99:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(22),o=a.n(l),s=a(1),c=a(4),i=function(e){var t=Object(c.e)();return r.a.createElement("nav",{className:"flex items-center justify-between flex-wrap bg-purple-900  p-6"},r.a.createElement("div",{className:"flex items-center flex-shrink-0 text-black mr-6"},r.a.createElement("img",{alt:"Logo",className:"w-1/2",src:"https://www.datum360.com/assets/img/logo.png"})),r.a.createElement("div",{className:"block lg:hidden"},r.a.createElement("button",{className:"flex items-center px-3 py-2 border rounded text-teal-200 border-teal-400 hover:text-white hover:border-white"},r.a.createElement("svg",{className:"fill-current h-3 w-3",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("title",null,"Menu"),r.a.createElement("path",{d:"M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0v-2z"})))),r.a.createElement("div",{className:"w-full block flex-grow lg:flex lg:items-center lg:w-auto"},r.a.createElement("div",{className:"text-sm lg:flex-grow"}),r.a.createElement("div",{className:e.showSearch?"relative mx-auto text-gray-600 mr-3":"hidden"},r.a.createElement("input",{id:"search",className:"border-2 bg-gray-300 bg-white h-10 px-5 pr-10 rounded-lg text-sm focus:outline-none",type:"search",name:"search",placeholder:"Enter you tag to search",defaultValue:""}),r.a.createElement("button",{type:"submit",className:"absolute right-0 top-0 mt-5 mr-4 r-5px t-n7px focus:outline-none",onClick:function(t){""!=document.getElementById("search").value&&e.onClickSearch(document.getElementById("search").value)}},r.a.createElement("svg",{className:"text-gray-600 h-4 w-4 fill-current",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",version:"1.1",id:"Capa_1",x:"0px",y:"0px",viewBox:"0 0 56.966 56.966",style:{enableBackground:"new 0 0 56.966 56.966"},xmlSpace:"preserve",width:"512px",height:"512px"},r.a.createElement("path",{d:"M55.146,51.887L41.588,37.786c3.486-4.144,5.396-9.358,5.396-14.786c0-12.682-10.318-23-23-23s-23,10.318-23,23  s10.318,23,23,23c4.761,0,9.298-1.436,13.177-4.162l13.661,14.208c0.571,0.593,1.339,0.92,2.162,0.92  c0.779,0,1.518-0.297,2.079-0.837C56.255,54.982,56.293,53.08,55.146,51.887z M23.984,6c9.374,0,17,7.626,17,17s-7.626,17-17,17  s-17-7.626-17-17S14.61,6,23.984,6z"})))),r.a.createElement("div",{className:"".concat(e.showLogoutButton?"":"hidden")},r.a.createElement("button",{className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded inline-flex items-center mr-3",onClick:function(){return t.push("/home")}},r.a.createElement("span",null,"Home"))),r.a.createElement("div",{className:"".concat(e.showLogoutButton?"":"hidden")},r.a.createElement("button",{className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded inline-flex items-center mr-3",onClick:function(){return t.push("/linearAsset")}},r.a.createElement("span",null,"Linear Asset"))),r.a.createElement("div",{className:"".concat(e.showLogoutButton?"":"hidden")},r.a.createElement("button",{className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded inline-flex items-center mr-3",onClick:function(){return t.push("/liveView")}},r.a.createElement("span",null,"Live View"))),r.a.createElement("div",{className:"".concat(e.showLogoutButton?"":"hidden")},r.a.createElement("button",{className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded inline-flex items-center",onClick:function(){return localStorage.clear(),void t.push("/")}},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-log-out"},r.a.createElement("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),r.a.createElement("polyline",{points:"16 17 21 12 16 7"}),r.a.createElement("line",{x1:"21",y1:"12",x2:"9",y2:"12"})),r.a.createElement("span",null,"Logout")))))},u=a(25),m=a(2),p=a.n(m),d=a(6),h=a(48),g=a(49),f=a(21);f.defaults.timeout=1e4;var b=function(){function e(){Object(h.a)(this,e),this.loginDetails={user:"",pass:""},this.attrGroups={}}return Object(g.a)(e,null,[{key:"warmUp",value:function(){var e=Object(d.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getToken();case 2:return e.next=4,this.contextFields("TAGGED_ITEM");case 4:return e.next=6,this.getAttributeGroups();case 6:this.attrGroups=e.sent;case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setUserPass",value:function(e,t){this.loginDetails={user:e,pass:t}}},{key:"login",value:function(){var e=Object(d.a)(p.a.mark((function e(){var t,a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("inside login ---------\x3e"),e.next=3,this.getToken();case 3:return t=e.sent,console.log(t),e.next=7,this.searchObject("TAGGED_ITEM","Route B to C");case 7:return a=e.sent,e.next=10,this.objectAssociations("TAGGED_ITEM",a.data[0].hdl,"EQUIPMENT_ITEM");case 10:return n=e.sent,e.next=13,this.generateDataMapEQ(n,"TAGGED_ITEM");case 13:e.sent,console.log("done");case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"generateDataMapEQ",value:function(){var e=Object(d.a)(p.a.mark((function e(t,a,n){var r,l,o,s,c,i,m,d,h,g,f,b,v,E,x;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("inside generateDataMapEQ ---------\x3e dataMap "+t+" route_length "+n),r=["Issue","Value"],l={},o=100/Number(n),s=Object(u.a)(t.items),e.prev=5,s.s();case 7:if((c=s.n()).done){e.next=25;break}return i=c.value,e.next=11,this.objectByHdl("EQUIPMENT_ITEM",i.Hdl);case 11:m=e.sent,d=this.helperAttrByName(m.attrs,"Class Name").value,h=this.helperAttrByName(m.attrs,"From Route Chainage"),g=this.helperAttrByName(m.attrs,"To Route Chainage"),f=this.helperAttrByName(m.attrs,"Linear Asset Attribute Name").value,b=this.helperAttrByName(m.attrs,"Linear Asset Attribute Value").value,v=this.helperAttrByName(m.attrs,"Linear Asset Value UoM").value,E=this.helperAttrByName(m.attrs,"DS Flag").value,(x={assocId:i.id,from_route_chainage:Number(h.value),to_route_chainage:Number(g.value),class_name:d,attribute_name:f,attribute_value:b,attribute_uom:v,ds_flag:E,refObj:i}).stylePlace=o*x.from_route_chainage,x.styleWidth=o*x.to_route_chainage-x.stylePlace,-1!=r.indexOf(E)&&(l[x.ds_flag]||(l[x.ds_flag]={}),l[x.ds_flag][x.class_name]||(l[x.ds_flag][x.class_name]=[]),l[x.ds_flag][x.class_name].push(x));case 23:e.next=7;break;case 25:e.next=30;break;case 27:e.prev=27,e.t0=e.catch(5),s.e(e.t0);case 30:return e.prev=30,s.f(),e.finish(30);case 33:return e.abrupt("return",l);case 34:case"end":return e.stop()}}),e,this,[[5,27,30,33]])})));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"generateDataMap",value:function(){var e=Object(d.a)(p.a.mark((function e(t,a){var n,r,l,o,s,c,i,m,d;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("inside generateDataMap ---------\x3e dataMap "+t+" objectType "+a),n={fixed:[],ref:[]},r=Object(u.a)(t.data),e.prev=3,r.s();case 5:if((l=r.n()).done){e.next=16;break}return o=l.value,s=["Isolator","AST Booster","Section Insulator"],e.next=10,this.objectByHdl(a,o.hdl);case 10:c=e.sent,i=this.helperAttrByName(c.attrs,"Class Name").value,(m=this.helperAttrByName(c.attrs,"Route Chainage"))&&(d={objId:o.objId,class_name:i,route_chainage:Number(m.value),route_chainage_uom:m.uom,hdl:o.hdl,refObj:c},-1!=s.indexOf(i)?n.fixed.push(d):n.ref.push(d));case 14:e.next=5;break;case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(3),r.e(e.t0);case 21:return e.prev=21,r.f(),e.finish(21);case 24:return n.fixed=n.fixed.sort((function(e,t){return e.route_chainage>t.route_chainage?1:-1})),n.ref=n.ref.sort((function(e,t){return e.route_chainage>t.route_chainage?1:-1})),e.abrupt("return",n);case 27:case"end":return e.stop()}}),e,this,[[3,18,21,24]])})));return function(t,a){return e.apply(this,arguments)}}()},{key:"getRouteObj",value:function(){var e=Object(d.a)(p.a.mark((function e(t){var a,n,r,l,o,s,c,i,u,m;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("inside getRouteObj --------\x3e searchTerm "+t),e.next=3,this.searchObject("TAGGED_ITEM",t);case 3:return a=e.sent,e.next=6,this.objectByHdl("TAGGED_ITEM",a.data[0].hdl);case 6:return n=e.sent,e.next=9,this.searchObjectWithAttr("TAGGED_ITEM","Route",t);case 9:return r=e.sent,e.next=12,this.generateDataMap(r,"TAGGED_ITEM");case 12:return l=e.sent,e.next=15,this.objectAssociations("TAGGED_ITEM",a.data[0].hdl,"EQUIPMENT_ITEM");case 15:return o=e.sent,s={route_length:Number(this.helperAttrByName(n.attrs,"Length").value),route_uom:this.helperAttrByName(n.attrs,"Length").uom,from_node:this.helperAttrByName(n.attrs,"From Reference Node").value,to_node:this.helperAttrByName(n.attrs,"To Reference Node").value,dataMap:l},c=100/Number(s.route_length),e.next=20,this.generateDataMapEQ(o,"TAGGED_ITEM",s.route_length);case 20:for(i=e.sent,s.dataMapEq=i,u=0;u<s.dataMap.fixed.length;u++)s.dataMap.fixed[u].stylePlace=c*s.dataMap.fixed[u].route_chainage;for(m=0;m<s.dataMap.ref.length;m++)s.dataMap.ref[m].stylePlace=c*s.dataMap.ref[m].route_chainage;return console.log("routeInfo  ------------\x3e "+JSON.stringify(s)),e.abrupt("return",s);case 26:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"helperAttrByName",value:function(e,t){for(var a in e)if(e.hasOwnProperty(a)){var n=e[a];if(n.name==t)return n}return null}},{key:"getToken",value:function(){var e=Object(d.a)(p.a.mark((function e(t,a,n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",f.request({url:"/oauth2/token",method:"post",baseURL:"https://"+n+".acl360.io",auth:{username:t,password:a},data:{grant_type:"client_credentials",service_url:"https://"+n+".pim360.io/"}}).then((function(e){return f.defaults.headers.common={Authorization:"Bearer "+e.data.access_token},e})));case 1:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"getRequest",value:function(){var e=Object(d.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",f.request({url:t,method:"get",baseURL:"https://mim.pim360.io/"}).then((function(e){return e.data})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"postRequest",value:function(){var e=Object(d.a)(p.a.mark((function e(t,a){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",f.request({url:t,method:"post",baseURL:"https://mim.pim360.io/",data:a}).then((function(e){return console.log("res ---------",e),e.data})));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"contextFields",value:function(){var e=Object(d.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("inside contextFields ------------\x3e "+t),console.log(this.contextCache),this.contextCache||(this.contextCache={}),this.contextCache[t]){e.next=7;break}return e.next=6,this.getRequest("api/context/fields/"+t);case 6:this.contextCache[t]=e.sent;case 7:return e.abrupt("return",this.contextCache[t]);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"objectByHdl",value:function(){var e=Object(d.a)(p.a.mark((function e(t,a){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("inside objectByHdl ---------\x3e objectType  "+t+" hdl "+a),e.abrupt("return",this.getRequest("api/objects/".concat(t,"/").concat(a)));case 2:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"getAttributeGroups",value:function(){var e=Object(d.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.getRequest("api/objects/attributegroups"));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"objectAssociations",value:function(){var e=Object(d.a)(p.a.mark((function e(t,a,n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.getRequest("api/associations?type=".concat(t,"&hdl=").concat(a,"&assoc=").concat(n,"&skip=0")));case 1:case"end":return e.stop()}}),e,this)})));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"searchObject",value:function(){var e=Object(d.a)(p.a.mark((function e(t,a){var n,r,l;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.contextFields(t);case 2:return n=e.sent,r={type:"TAGGED_ITEM",eic:"",filter:{logical:"AND",items:[{handle:n.ID.Hdl,operator:"$regex-l",value:a,caseSensitive:!1,excludeUoM:!1,regex:!1}]},fields:[n.ID.Hdl,n.CLASS.Hdl,n.DESCRIPTION.Hdl]},e.next=6,this.postRequest("api/queries",r);case 6:return l=e.sent,e.abrupt("return",this.getRequest("api".concat(l.resulturl)));case 8:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"searchObjectWithAttr",value:function(){var e=Object(d.a)(p.a.mark((function e(t,a,n){var r,l,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("inside searchObjectWithAttr ----------\x3e objectType "+t+" attrName "+a+" attrValue "+n),e.next=3,this.contextFields(a);case 3:return e.sent,e.next=6,this.contextFields(t);case 6:return r=e.sent,l={type:"TAGGED_ITEM",eic:"",filter:{logical:"AND",items:[{operator:"$regex-l",value:n,handle:"TMiQuiViT1OEjp8uEeLy_Q",caseSensitive:!1,excludeUoM:!1,regex:!1}]},fields:[r.ID.Hdl,r.CLASS.Hdl,r.DESCRIPTION.Hdl]},e.next=10,this.postRequest("api/queries",l);case 10:return o=e.sent,e.abrupt("return",this.getRequest("api".concat(o.resulturl)));case 12:case"end":return e.stop()}}),e,this)})));return function(t,a,n){return e.apply(this,arguments)}}()}]),e}();var v=function(e){var t=Object(c.e)(),a=Object(n.useState)(""),l=Object(s.a)(a,2),o=l[0],u=l[1],m=Object(n.useState)(""),p=Object(s.a)(m,2),d=p[0],h=p[1],g=Object(n.useState)(""),f=Object(s.a)(g,2),v=f[0],E=f[1],x=Object(n.useState)(!1),y=Object(s.a)(x,2),w=y[0],N=y[1],k=Object(n.useState)(!1),j=Object(s.a)(k,2),O=j[0],D=j[1],_=Object(n.useState)(!1),A=Object(s.a)(_,2),S=A[0],I=A[1],C=Object(n.useState)(),M=Object(s.a)(C,2),L=M[0],T=M[1],G=Object(n.useState)(),B=Object(s.a)(G,2),R=B[0],F=B[1],U=Object(n.useState)(!1),H=Object(s.a)(U,2),P=H[0],V=H[1],z="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:border-purple-900",q="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none border-red-500";return r.a.createElement(r.a.Fragment,null,r.a.createElement(i,{showLogoutButton:!1}),P?r.a.createElement("div",{className:"popUpContainer"},r.a.createElement("div",{className:"loader"})):"",r.a.createElement("div",{className:"w-full max-w-sm login-container mt-5"},r.a.createElement("form",{className:"bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4"},r.a.createElement("div",{className:"mb-4"},r.a.createElement("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"username"},"Username"),r.a.createElement("input",{className:w?q:z,id:"username",type:"text",value:o,placeholder:"Enter your username",onChange:function(e){return u(e.target.value)}})),r.a.createElement("div",{className:"mb-4"},r.a.createElement("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"password"},"Password"),r.a.createElement("input",{className:O?q:z,value:d,id:"password",type:"password",placeholder:"Enter your password",onChange:function(e){return h(e.target.value)}})),r.a.createElement("div",{className:"mb-3"},r.a.createElement("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"username"},"Prefix URL"),r.a.createElement("input",{className:S?q:z,value:v,id:"prefixUrl",type:"text",placeholder:"Enter your prefix url",onChange:function(e){return E(e.target.value)}}),r.a.createElement("span",{className:"text-gray-700 text-xs"},"Note: Its is 1st portion of your domain name (also known as subdomain), or its called as scope of pim360.")),r.a.createElement("p",{className:"text-center text-red-500"},L?R:""),r.a.createElement("div",{className:"flex"},r.a.createElement("button",{className:"mt-3 bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline m-auto",type:"button",onClick:function(){V(!0),T(!1),N(!1),D(!1),I(!1),F(""),void 0!==o&&o.length>0&&d.length>0&&v.length>0?(localStorage.setItem("prefixUrl",v),b.getToken(o,d,v).then((function(e){""!=e.data.access_token&&(V(!1),localStorage.setItem("b_token",e.data.token_type+" "+e.data.access_token),t.push("/home"))})).catch((function(e){T(!0),F("Something went wrong!!!"),V(!1)}))):(0==o.length&&N(!0),0==d.length&&D(!0),0==v.length&&I(!0),T(!0),F("Please fill all the fields"),V(!1))}},"Proceed"))),r.a.createElement("br",null),r.a.createElement("p",{className:"text-center"},"\xa9 Datum360 Limited")))},E=a(18),x=a.n(E),y=a(26),w=function(e,t){a(97);if(e){if(e.length>0){e.forEach((function(t,a){Object.keys(t).forEach((function(n){var r=t[n],l=n.replace(/\s+/g,"_");delete e[a][n],e[a][l]=r}))}));var n=[];return e.length>0&&e.map((function(e,a){var r=Object.keys(e).map((function(t){return"<div>"+t+" - "+e[t]+"<br></div>"})).join(""),l={Placemark:{name:t[a],description:"<![CDATA[".concat(r,"]]>"),Point:{coordinates:"".concat(e.Longitude,",").concat(e.Latitude)}}};n.push(l)})),function(e){for(var t="",a=(e=e.replace(/(>)\s*(<)(\/*)/g,"$1\n$2$3").replace(/ *(.*) +\n/g,"$1\n").replace(/(<.+>)(.+\n)/g,"$1\n$2")).split("\n"),n=0,r="other",l={"single->single":0,"single->closing":-1,"single->opening":0,"single->other":0,"closing->single":0,"closing->closing":-1,"closing->opening":0,"closing->other":0,"opening->single":1,"opening->closing":0,"opening->opening":1,"opening->other":1,"other->single":0,"other->closing":-1,"other->opening":0,"other->other":0},o=0;o<a.length;o++){var s=a[o];if(s.match(/\s*<\?xml/))t+=s+"\n";else{var c=Boolean(s.match(/<.+\/>/)),i=Boolean(s.match(/<\/.+>/)),u=Boolean(s.match(/<[^!].*>/)),m=c?"single":i?"closing":u?"opening":"other",p=r+"->"+m;r=m;var d="";n+=l[p];for(var h=0;h<n;h++)d+="\t";"opening->closing"==p?t=t.substr(0,t.length-1)+s+"\n":t+=d+s+"\n"}}return t}('<?xml version="1.0" encoding="UTF-8"?><kml xmlns="http://www.opengis.net/kml/2.2" xmlns:gx="http://www.google.com/kml/ext/2.2"><Document id="1">'+function e(t){var a="";for(var n in t){if(a+=t[n]instanceof Array?"":"<"+n+">",t[n]instanceof Array)for(var r in t[n])a+="<"+n+">",a+=e(new Object(t[n][r])),a+="</"+n+">";else"object"==typeof t[n]?a+=e(new Object(t[n])):a+=t[n];a+=t[n]instanceof Array?"":"</"+n+">"}return a=a.replace(/<\/?[0-9]{1,}>/g,"")}(n)+"</Document></kml>")}return""}return""},N=a(3),k=a(15),j=a.n(k),O=function(e){var t=e.text;return r.a.createElement("div",null,r.a.createElement("img",{alt:"Marker",src:"https://img.icons8.com/fluent/48/000000/marker-storm.png"}),t)},D=function(e){var t=Object(n.useState)(),a=Object(s.a)(t,2),l=a[0],o=a[1],c=Object(n.useState)(""),u=Object(s.a)(c,2),m=u[0],p=u[1],d=Object(n.useState)([]),h=Object(s.a)(d,2),g=h[0],f=h[1],b=Object(n.useState)(!1),v=Object(s.a)(b,2),E=v[0],k=v[1],D=Object(n.useState)([]),_=Object(s.a)(D,2),A=_[0],S=_[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(i,{showLogoutButton:!0}),E?r.a.createElement("div",{className:"popUpContainer"},r.a.createElement("div",{className:"loader"})):"",r.a.createElement("div",{className:"p-10"},r.a.createElement("div",{className:"w-full max-w"},r.a.createElement("form",{className:"bg-white rounded pt-6 pb-8 mb-4"},r.a.createElement("div",null,r.a.createElement("div",{className:"inline-block"},r.a.createElement("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"username"},"Tag Number"),r.a.createElement("input",{className:l?"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline border-red-500":"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",value:m,id:"tagNumber",type:"text",placeholder:"Enter your tag number",onChange:function(e){return p(e.target.value)}})),r.a.createElement("div",{className:"inline-block ml-5"},r.a.createElement("button",{className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded focus:outline-none m-auto",type:"button",onClick:function(){!function(){if(o(!1),null!==m&&m.length>0){k(!0);var e=[],t=0,a=m.split(",").map((function(e){return e.trim()}));S(a),a.map((function(n){var r="https://"+localStorage.getItem("prefixUrl")+".pim360.io/api/objects/TAGGED_ITEM/id/"+n,l=localStorage.getItem("b_token");return fetch(r,{headers:{Accept:"application/json",Authorization:l}}).then((function(e){return e.json()})).then((function(n){if(void 0!==n.attrs&&null!==n.attrs?e.push(n):console.log(n),(t+=1)===a.length)return k(!1),void f(e)})).catch((function(e){console.log("error --------\x3e"+e),(t+=1)===a.length&&k(!1)})),""}))}else o(!0),console.log("show error")}()}},"Submit")),r.a.createElement("div",{className:"inline-block ml-5",style:{display:g.length>0?"":"none"}},r.a.createElement("button",{onClick:function(e){e.preventDefault();var t=JSON.parse(localStorage.getItem("pre_kml_data")),a=JSON.parse(localStorage.getItem("inputsArray")),n=new File(["".concat(w(t,a))],"".concat(new Date,".kml"),{type:"text/xml;charset=utf-8"});Object(y.saveAs)(n)},class:"bg-purple-800 hover:bg-purple-900 text-white  py-2 px-4 rounded inline-flex items-center"},r.a.createElement("svg",{class:"fill-current w-4 h-4 mr-2",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},r.a.createElement("path",{d:"M13 8V2H7v6H2l8 8 8-8h-5zM0 18h20v2H0v-2z"})),r.a.createElement("span",null,"Download KML"))),r.a.createElement("div",{className:"inline-block ml-5",style:{display:g.length>0?"":"none"}},r.a.createElement("button",{onClick:function(e){e.preventDefault();var t=JSON.parse(localStorage.getItem("pre_kml_data")),a={type:"FeatureCollection",features:[]},n=(t.map((function(e){a.features.push({type:"Feature",geometry:{type:"Point",coordinates:[parseFloat(e.Longitude),parseFloat(e.Latitude)]},properties:e})})),new File(["".concat(JSON.stringify(a))],"".concat(new Date,".json"),{type:"application/json;charset=utf-8"}));Object(y.saveAs)(n)},class:"bg-purple-800 hover:bg-purple-900 text-white  py-2 px-4 rounded inline-flex items-center"},r.a.createElement("svg",{class:"fill-current w-4 h-4 mr-2",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},r.a.createElement("path",{d:"M13 8V2H7v6H2l8 8 8-8h-5zM0 18h20v2H0v-2z"})),r.a.createElement("span",null,"Download JSON")))),l?r.a.createElement("p",{className:"text-red-500 pl-2 text-xs pt-1"},"Tag name is required "):"")),void 0!==g&&g.length>0&&r.a.createElement("div",null,function(){var e=[];return g.map((function(t){var a=Object.keys(t.attrs),n={};return a.map((function(e){return n[t.attrs[e].name]=t.attrs[e].value,""})),e.push(n),""})),console.log("arrNameValue -------\x3e",e),localStorage.setItem("pre_kml_data",JSON.stringify(e)),localStorage.setItem("inputsArray",JSON.stringify(A)),r.a.createElement("div",{className:"flex mb-4"},r.a.createElement("div",{className:"w-1/2 m-h-500px p-5"},e.length>0&&e[0].hasOwnProperty("Approved Latitude")&&e[0].hasOwnProperty("Approved Longitude")?r.a.createElement("div",{className:"w-full h-full shadow-lg"},r.a.createElement(x.a,{bootstrapURLKeys:{key:"AIzaSyDNeF0TGdzD6PN696-ZWgdP7z9ltW0l1QY"},options:function(){return{mapTypeControl:!0}},defaultCenter:{lat:parseFloat(e[0]["Approved Latitude"]),lng:parseFloat(e[0]["Approved Longitude"])},center:{lat:parseFloat(e[0]["Approved Latitude"]),lng:parseFloat(e[0]["Approved Longitude"])},distanceToMouse:function(){},defaultZoom:6},e.map((function(e){return r.a.createElement(O,{lat:e["Approved Latitude"],lng:e["Approved Longitude"]})})))):r.a.createElement("div",{className:"w-full h-full shadow-lg relative"},r.a.createElement("div",{className:"centerItem"},r.a.createElement("img",{className:"attr_chat mx-auto",draggable:!1,src:j.a}),r.a.createElement("p",{className:"text-center mt-3 text-purple-800"},"Invalid map data")))),r.a.createElement("div",{className:"w-1/2 m-h-500px"},r.a.createElement("div",{className:"max-w rounded w-full shadow  p-5"},r.a.createElement("p",{className:"text-xl font-bold mb-3"},"Attributes"),r.a.createElement(N.a,{className:"border-0",allowZeroExpanded:!0,preExpanded:["attributes"]},e.map((function(e,t){return r.a.createElement(N.b,{className:"shadow-md mb-3",key:e.Latitude,uuid:"attributes"},r.a.createElement(N.d,{className:"bg-gray-400 p-2"},r.a.createElement(N.c,{className:"w-full border-none outline-none focus:border-0 inline-flex"},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-arrow-right"},r.a.createElement("line",{x1:"5",y1:"12",x2:"19",y2:"12"}),r.a.createElement("polyline",{points:"12 5 19 12 12 19"})),"\u2003",A[t])),r.a.createElement(N.e,null,r.a.createElement("table",{class:"table-auto w-full"},r.a.createElement("tbody",null,Object.keys(e).map((function(t){return r.a.createElement("tr",null,r.a.createElement("td",{class:"border px-4 py-2"},t),r.a.createElement("td",{class:"border px-4 py-2"},e[t]))}))))))}))))))}()),r.a.createElement("p",{className:"text-center"},"\xa9 Datum360 Limited")))},_=a(17),A=a(19),S=a.n(A),I=a(21),C=function(e){var t=e.text;return r.a.createElement("div",null,r.a.createElement("img",{alt:"Marker",src:"https://img.icons8.com/fluent/48/000000/marker-storm.png"}),t)};var M=function(e){var t=Object(n.useState)([]),a=Object(s.a)(t,2),l=a[0],o=a[1],c=Object(n.useState)(),u=Object(s.a)(c,2),m=(u[0],u[1],Object(n.useState)([])),p=Object(s.a)(m,2),d=p[0],h=p[1],g=Object(n.useState)(!1),f=Object(s.a)(g,2),v=f[0],E=f[1],y=Object(n.useState)([]),w=Object(s.a)(y,2),k=w[0],O=(w[1],Object(n.useState)(!1)),D=Object(s.a)(O,2),A=D[0],M=D[1],L=Object(n.useState)([]),T=Object(s.a)(L,2),G=T[0],B=T[1],R=Object(n.useState)(""),F=Object(s.a)(R,2),U=F[0],H=F[1],P=localStorage.getItem("b_token"),V=localStorage.getItem("prefixUrl"),z="https://".concat(V,".pim360.io/api"),q=[];Object(n.useEffect)((function(){J()}),[]);var J=function(){E(!0);var e="".concat(z,"/customviews?type=LIVE_VIEW");fetch(e,{headers:{Accept:"application/json",Authorization:P}}).then((function(e){return e.json()})).then((function(e){void 0!==e&&null!==e&&o(e),E(!1)})).catch((function(e){console.log("error --------\x3e"+e),E(!1)}))},W=function(e){var t={type:"TAGGED_ITEM",eic:"",filter:e.Data.conditions,fields:e.Data.fields},a="".concat(z,"/queries");fetch(a,{method:"POST",headers:{"Content-Type":"application/json",Authorization:P},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){return Q(e.resulturl).then((function(e){E(!1);var t=Object.keys(e[0]).filter((function(t){return"object"==typeof e[0][t]})),a=[],n=[];e.map((function(e){var r={};t.map((function(t){"Tag Number"!=e[t].name&&"TAG NUMBER"!=e[t].name||n.push(e[t].value),r[e[t].name]=e[t].value})),a.push(r)})),a.length>0&&(a[0].hasOwnProperty("Tag Number")||a[0].hasOwnProperty("TAG NUMBER")?(n.length>0&&B(n),M(!0)):M(!0))}))})).catch((function(e){console.error("Error:",e),E(!1)}))},Q=function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r="".concat(z).concat(t,"?limit=").concat(a,"&skip=").concat(n);return I.defaults.headers.common={Authorization:localStorage.getItem("b_token")},b.getRequest(r).then((function(n){return q.push.apply(q,Object(_.a)(n.data)),n.hasmore?e(t,a,q.length/a*200):(E(!1),q)}))};return console.log(d),r.a.createElement("div",null,r.a.createElement(i,{showLogoutButton:!0,showSearch:!1}),v?r.a.createElement("div",{className:"popUpContainer"},r.a.createElement("div",{className:"loader"})):"",r.a.createElement("div",{id:"liveView-container"},r.a.createElement("div",{className:"sideBar bg-purple-900"},null!=l&&l.length>0?l.map((function(e,t){return r.a.createElement("div",null,r.a.createElement("button",{onClick:function(t){return function(e,t,a){H(t),E(!0);var n="".concat(z,"/customviews/").concat(a);fetch(n,{headers:{Accept:"application/json",Authorization:P}}).then((function(e){return e.json()})).then((function(e){void 0!==e&&null!==e&&W(e)})).catch((function(e){console.log("fetchSelectedLiveViewData error --------\x3e"+e),E(!1)}))}(0,e.Name,e.Hdl)},className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded inline-flex my-2 justify-center w-full"},e.Name))})):""),r.a.createElement("div",{className:"liveView-wrapper"},A?r.a.createElement("div",{className:"relative"},r.a.createElement("div",{className:"m-4"},r.a.createElement("label",{className:"inline-block text-gray-700 text-sm font-bold ",htmlFor:"username"},"Selected LiveView:"),r.a.createElement("p",{className:"inline-block ml-4"},U)),G.length>0&&r.a.createElement("div",{className:"m-4 mt-0"},r.a.createElement("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"username"},"Tag Number"),r.a.createElement("div",{className:"inline-block relative w-1/4"},r.a.createElement("select",{class:"block appearance-none w-full bg-gray-300 border border-gray-400 hover:border-gray-500 px-4 py-2 pr-8 rounded shadow leading-tight focus:outline-none focus:shadow-outline",onChange:function(e){!function(e){var t="".concat(z,"/objects/TAGGED_ITEM/id/").concat(e);fetch(t,{headers:{Accept:"application/json",Authorization:P}}).then((function(e){return e.json()})).then((function(e){h(e)})).catch((function(e){E(!1),console.log("getAttributes error --------\x3e"+e)}))}(e.target.value)}},r.a.createElement("option",{value:""},"Select"),G.map((function(e){return r.a.createElement("option",{value:e},e)}))),r.a.createElement("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},r.a.createElement("svg",{class:"fill-current h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},r.a.createElement("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})))),r.a.createElement("div",{className:"inline-block relative w-1/4 ml-3"},void 0!==d&&Object.keys(d).length>0?r.a.createElement("a",{target:"_blank",href:"https://".concat(V,".pim360.io/object/TAGGED_ITEM/").concat(d.hdl)},r.a.createElement("img",{width:"15%",src:"https://".concat(V,".acl360.io/img/pim360-logo.svg"),onError:function(e){console.log("called me"),console.log(e),e.target.src="https://".concat(V,".acl360.io/img/pim360_logo.png")}})):"")),void 0!==d&&Object.keys(d).length>0&&r.a.createElement("div",null,function(){var e=[],t=Object.keys(d.attrs),a={};return t.map((function(e){return a[d.attrs[e].name]=d.attrs[e].value,""})),e.push(a),console.log("arrNameValue --------\x3e",JSON.stringify(e)),localStorage.setItem("pre_kml_data",JSON.stringify(e)),localStorage.setItem("inputsArray",JSON.stringify(k)),r.a.createElement("div",{className:"flex mb-4"},r.a.createElement("div",{className:"w-1/2 m-h-500px p-5"},e.length>0&&e[0].hasOwnProperty("Approved Longitude")&&e[0].hasOwnProperty("Approved Latitude")?r.a.createElement("div",{className:"w-full h-full shadow-lg"},r.a.createElement("a",{target:"_blank",href:"https://earth.google.com/web/search/Arsenal+fc/@".concat(parseFloat(e[0]["Approved Latitude"]),",").concat(parseFloat(e[0]["Approved Longitude"]),",9.09858867a,612.98636056d,35y,-40.1316669h,45.00000069t,0")},"Click here for Google Earth"),r.a.createElement(x.a,{bootstrapURLKeys:{key:"AIzaSyDNeF0TGdzD6PN696-ZWgdP7z9ltW0l1QY"},options:function(){return{mapTypeControl:!0,mapTypeId:"satellite"}},defaultCenter:{lat:parseFloat(e[0]["Approved Latitude"]),lng:parseFloat(e[0]["Approved Longitude"])},center:{lat:parseFloat(e[0]["Approved Latitude"]),lng:parseFloat(e[0]["Approved Longitude"])},distanceToMouse:function(){},defaultZoom:e?18:6},e.map((function(e){return r.a.createElement(C,{lat:e["Approved Latitude"],lng:e["Approved Longitude"]})})))):r.a.createElement("div",{className:"w-full h-full shadow-lg relative"},r.a.createElement("div",{className:"centerItem"},r.a.createElement("img",{className:"attr_chat mx-auto",draggable:!1,src:j.a}),r.a.createElement("p",{className:"text-center mt-3 text-purple-800"},"Invalid map data")))),r.a.createElement("div",{className:"w-1/2 m-h-500px"},r.a.createElement("div",{className:"max-w rounded w-full shadow  p-5"},r.a.createElement("p",{className:"text-xl font-bold mb-3"},"Attributes"),r.a.createElement(N.a,{className:"border-0",allowZeroExpanded:!0,preExpanded:["attributes"]},e.map((function(t,a){return r.a.createElement(N.b,{className:"shadow-md mb-3",key:t.Latitude,uuid:"attributes"},r.a.createElement(N.d,{className:"bg-gray-400 p-2"},r.a.createElement(N.c,{className:"w-full border-none outline-none focus:border-0 inline-flex"},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-arrow-right"},r.a.createElement("line",{x1:"5",y1:"12",x2:"19",y2:"12"}),r.a.createElement("polyline",{points:"12 5 19 12 12 19"})),"\u2003",e[a].hasOwnProperty("Tag Number")?e[a]["Tag Number"]:e[a]["TAG NUMBER"])),r.a.createElement(N.e,{className:"liveView-item-container"},r.a.createElement("table",{class:"table-auto w-full"},r.a.createElement("tbody",null,Object.keys(t).map((function(e){return r.a.createElement("tr",null,r.a.createElement("td",{class:"border px-4 py-2"},e),r.a.createElement("td",{class:"border px-4 py-2"},t[e]))}))))))}))))))}())):r.a.createElement("div",{className:"centerItem"},r.a.createElement("img",{draggable:!1,width:300,src:S.a}),r.a.createElement("p",{className:"text-center mt-3 text-purple-800"},"Select the liveview to show the data here")))))};var L=function(e){return Object(n.useEffect)((function(){var e=[{startDate:2885,endDate:3293,taskName:"Hexo",status:"KILLED",attrs:[{name:"Wear",value:"here"},{name:"ABC",value:"XYZ"}]},{startDate:4333,endDate:4453,taskName:"Fixed",status:"RUNNING",tootl:"hello2"},{startDate:7025,endDate:9280,taskName:"Reference",status:"SUCCEEDED",tootl:"hello3"}],t={SUCCEEDED:"bar",FAILED:"bar-failed",RUNNING:"bar-running",KILLED:"bar-killed"};e.sort((function(e,t){return e.endDate-t.endDate}));e[e.length-1].endDate;e.sort((function(e,t){return e.startDate-t.startDate}));e[0].startDate;window.d3.gantt("new-gantt",e).taskTypes(["Hexo","Fixed","Reference"]).taskStatus(t).tickFormat("%H:%M")(e);var a=[{startDate:35,endDate:45,taskName:"DS - Inner Rail Wear",status:"RUNNING",wear:"<0.5km"},{startDate:40,endDate:50,taskName:"DS - Outer Rail Wear",status:"SUCCEEDED",wear:"<0.1km"},{startDate:75,endDate:85,taskName:"DS - Speed Restriction",status:"FAILED",wear:"<10km"},{startDate:100,endDate:110,taskName:"DS - Vertical Clearance Limitation",status:"RUNNING",wear:"<3km"},{startDate:120,endDate:130,taskName:"DS - Vertical Clearance Limitation",status:"KILLED",wear:"<5km"}];a.sort((function(e,t){return e.endDate-t.endDate})),window.d3.gantt("new-gantt2",a).taskTypes(["DS - Inner Rail Wear","DS - Outer Rail Wear","DS - Speed Restriction","DS - Vertical Clearance Limitation"]).taskStatus(t).tickFormat("%H:%M")(a),window.InitializeMap([{lat:21.2379447,lng:72.7792278},{lat:21.2378812,lng:72.7792609},{lat:21.2380032,lng:72.779214},{lat:21.2381679,lng:72.7788641}])}),[]),r.a.createElement("div",null,r.a.createElement(i,{showLogoutButton:!0}),r.a.createElement("br",null),r.a.createElement("svg",{style:{height:0,position:"absolute"}},r.a.createElement("defs",null,r.a.createElement("linearGradient",{id:"red",x1:"0%",y1:"0%",x2:"100%",y2:"0%"},r.a.createElement("stop",{offset:"0%",style:{stopColor:"#fd3c3c",stopOpacity:1}}),r.a.createElement("stop",{offset:"100%",style:{stopColor:"#dc281e",stopOpacity:1}})),r.a.createElement("linearGradient",{id:"green",x1:"0%",y1:"0%",x2:"100%",y2:"0%"},r.a.createElement("stop",{offset:"0%",style:{stopColor:"#7bdb06",stopOpacity:1}}),r.a.createElement("stop",{offset:"100%",style:{stopColor:"#36ac00",stopOpacity:1}})),r.a.createElement("linearGradient",{id:"blue",x1:"0%",y1:"0%",x2:"100%",y2:"0%"},r.a.createElement("stop",{offset:"0%",style:{stopColor:"#00c6ff",stopOpacity:1}}),r.a.createElement("stop",{offset:"100%",style:{stopColor:"#0072ff",stopOpacity:1}})),r.a.createElement("linearGradient",{id:"orange",x1:"0%",y1:"0%",x2:"100%",y2:"0%"},r.a.createElement("stop",{offset:"0%",style:{stopColor:"#fe8c00",stopOpacity:1}}),r.a.createElement("stop",{offset:"100%",style:{stopColor:"#f83600",stopOpacity:1}})))),r.a.createElement("h3",null,"Gantt 1"),r.a.createElement("div",{id:"new-gantt",style:{height:"130px",width:"1000px"}}),r.a.createElement("h3",null,"Gantt 2"),r.a.createElement("div",{id:"new-gantt2",style:{height:"200px",width:"1000px"}}),r.a.createElement("br",null),r.a.createElement("h3",null,"Map"),r.a.createElement("br",null),r.a.createElement("div",{id:"dvMap",style:{height:"500px",width:"35%"}}))},T=(a(98),a(13)),G=a(50),B=a.n(G),R=a(27),F=a.n(R),U=a(28),H=a.n(U),P=a(21);var V=function(e){var t=Object(n.useState)([]),a=Object(s.a)(t,2),l=a[0],o=a[1],c=Object(n.useState)([]),u=Object(s.a)(c,2),m=(u[0],u[1]),p=Object(n.useState)([]),d=Object(s.a)(p,2),h=d[0],g=d[1],f=Object(n.useState)([]),v=Object(s.a)(f,2),E=v[0],x=v[1],y=Object(n.useState)(!1),w=Object(s.a)(y,2),k=w[0],O=w[1],D=Object(n.useState)(!1),A=Object(s.a)(D,2),I=A[0],C=A[1],M=Object(n.useState)(!1),L=Object(s.a)(M,2),T=L[0],G=L[1],R=Object(n.useState)(),U=Object(s.a)(R,2),V=(U[0],U[1],Object(n.useState)(!1)),z=Object(s.a)(V,2),q=z[0],J=z[1],W=Object(n.useState)(!1),Q=Object(s.a)(W,2),K=Q[0],$=Q[1],Z=Object(n.useState)(!1),Y=Object(s.a)(Z,2),X=Y[0],ee=Y[1],te=Object(n.useState)(!1),ae=Object(s.a)(te,2),ne=ae[0],re=ae[1],le=function(e){Object.keys(e);var t=[],a=[];e.fixed.map((function(n){var r=e.fixed[e.fixed.length-1],l=0;l=parseInt(r.route_chainage)<25e3?300:1500;var o=Object.keys(n.refObj.attrs),s={};o.map((function(e,t){s[n.refObj.attrs[e].name]=n.refObj.attrs[e].value}));var c=Number(Object.values(n.refObj.attrs).filter((function(e){return"Approved Latitude"==e.name}))[0].value),i=Number(Object.values(n.refObj.attrs).filter((function(e){return"Approved Longitude"==e.name}))[0].value);c&&a.push({lat:c,lng:i,ref_or_fix:"fix"}),t.push({startDate:n.route_chainage,endDate:n.route_chainage+l,taskName:"Fixed",type:n.refObj.type,status:"RUNNING",attrs:[{name:"Tag: ",value:n.objId}],hdl:n.hdl,lat:c,lng:i})})),e.ref.map((function(n){var r=e.ref[e.ref.length-1],l=0;l=parseInt(r.route_chainage)<25e3?300:1500;var o=Number(Object.values(n.refObj.attrs).filter((function(e){return"Approved Latitude"==e.name}))[0].value),s=Number(Object.values(n.refObj.attrs).filter((function(e){return"Approved Longitude"==e.name}))[0].value);o&&a.push({lat:o,lng:s,ref_or_fix:"ref"}),t.push({startDate:n.route_chainage,endDate:n.route_chainage+l,taskName:"Reference",type:n.refObj.type,status:"SUCCEEDED",attrs:[{name:"Tag: ",value:n.objId}],hdl:n.hdl,lat:o,lng:s})})),window.InitializeMap(a),o(t);window.d3.gantt("gantt",t,oe).taskTypes(["Fixed","Reference"]).taskStatus({SUCCEEDED:"bar",FAILED:"bar-failed",RUNNING:"bar-running",KILLED:"bar-killed"}).tickFormat("%H:%M")(t)},oe=function(e){console.log("clickedObj -------\x3e "+JSON.stringify(e)),g([]),x([]),re(!1),C(!0);P.defaults.headers.common={Authorization:localStorage.getItem("b_token")};b.objectByHdl(e.type,e.hdl).then((function(e){if(null!=e){var t=Object.keys(e.attrs),a={};t.map((function(t){a[e.attrs[t].name]=e.attrs[t].value})),g(a),C(!1)}})).catch((function(e){C(!1),console.log("objectByHdl error----------\x3e"+JSON.stringify(e))})),b.objectAssociations("TAGGED_ITEM",e.hdl,"DOCUMENT").then((function(e){var t=[];null!=e&&e.items.length>0&&(e.items.map((function(e){t.push({name:e.ID,class:e.ClsName,link:e.Url})})),x(t),C(!1))})).catch((function(e){C(!1),console.log("objectAssociations error----------\x3e"+JSON.stringify(e))})),window.myMap.setZoom(17),window.myMap.panTo({lat:e.lat,lng:e.lng})},se=function(e){var t=Object.keys(e.dataMapEq.Issue),a=[];t.map((function(t){e.dataMapEq.Issue[t].map((function(e){""!=e.attribute_name&&a.push({startDate:e.from_route_chainage,endDate:e.to_route_chainage,taskName:e.class_name,type:e.refObj.Type,status:"KILLED",attrs:[{name:e.attribute_name+": ",value:e.attribute_value+" "+e.attribute_uom},{name:"Ref: ",value:e.refObj.ID}],hdl:e.refObj.Hdl})}))}));var n=Object.keys(e.dataMapEq.Value);n.map((function(t){e.dataMapEq.Value[t].map((function(e){""!=e.attribute_name&&a.push({startDate:e.from_route_chainage,endDate:e.to_route_chainage,taskName:e.class_name,status:"RUNNING",attrs:[{name:e.attribute_name+": ",value:e.attribute_value+" "+e.attribute_uom},{name:"Ref: ",value:e.refObj.ID}],hdl:e.refObj.Hdl})}))})),m(a);var r=[].concat(Object(_.a)(t),Object(_.a)(n));window.d3.gantt("associate_gantt",a,oe).taskTypes(r).taskStatus({SUCCEEDED:"bar",FAILED:"bar-failed",RUNNING:"bar-running",KILLED:"bar-killed"}).tickFormat("%H:%M")(a)};return Object(n.useEffect)((function(){}),[]),r.a.createElement("div",null,r.a.createElement(i,{showLogoutButton:!0,showSearch:!0,onClickSearch:function(e){var t;J(!1),g([]),x([]),t=e,O(!0),P.defaults.headers.common={Authorization:localStorage.getItem("b_token")},b.getRouteObj(t).then((function(e){console.log("response ------------\x3e"),console.log(e),void 0!=e&&null!=e&&(J(!0),void 0!=e.dataMap&&null!=e.dataMap&&Object.keys(e.dataMap).length>0?(console.log("inside if"),$(!0),le(e.dataMap)):(console.log("inside else"),$(!1)),void 0!=e.dataMapEq&&null!=e.dataMapEq&&Object.keys(e.dataMapEq).length>0?(ee(!0),se(e)):ee(!1)),console.log("isGanntHaveData-----------\x3e"+K),console.log("isAssociateGanntHaveData ------------ "+X),O(!1)})).catch((function(e){console.log("doApi error ------------\x3e"),console.log(e),O(!1),console.log("isGanntHaveData-----------\x3e"+K),console.log("isAssociateGanntHaveData ------------ "+X),X||l||G(!0)}))}}),k?r.a.createElement("div",{className:"popUpContainer"},r.a.createElement("div",{className:"loader"})):"",I?r.a.createElement("div",{className:"popUpContainer"},r.a.createElement("div",{className:"loader"})):"",q?r.a.createElement("div",{className:"relative"},r.a.createElement("svg",{style:{height:0,position:"absolute"}},r.a.createElement("defs",null,r.a.createElement("linearGradient",{id:"red",x1:"0%",y1:"0%",x2:"100%",y2:"0%"},r.a.createElement("stop",{offset:"0%",style:{stopColor:"#fd3c3c",stopOpacity:1}}),r.a.createElement("stop",{offset:"100%",style:{stopColor:"#dc281e",stopOpacity:1}})),r.a.createElement("linearGradient",{id:"green",x1:"0%",y1:"0%",x2:"100%",y2:"0%"},r.a.createElement("stop",{offset:"0%",style:{stopColor:"#7bdb06",stopOpacity:1}}),r.a.createElement("stop",{offset:"100%",style:{stopColor:"#36ac00",stopOpacity:1}})),r.a.createElement("linearGradient",{id:"blue",x1:"0%",y1:"0%",x2:"100%",y2:"0%"},r.a.createElement("stop",{offset:"0%",style:{stopColor:"#00c6ff",stopOpacity:1}}),r.a.createElement("stop",{offset:"100%",style:{stopColor:"#0072ff",stopOpacity:1}})),r.a.createElement("linearGradient",{id:"orange",x1:"0%",y1:"0%",x2:"100%",y2:"0%"},r.a.createElement("stop",{offset:"0%",style:{stopColor:"#fe8c00",stopOpacity:1}}),r.a.createElement("stop",{offset:"100%",style:{stopColor:"#f83600",stopOpacity:1}})))),r.a.createElement("div",{className:"flex"},r.a.createElement("div",{className:"w-1/4 pb-5"},r.a.createElement("div",{id:"dvMap",className:ne?"opacity-25":"opacity-100 min-h-full"}),ne?r.a.createElement("div",{className:"min-h-full mx-auto border-dashed border border-gray-600 relative mb-5"},r.a.createElement("div",{className:"centerItem"},r.a.createElement("img",{className:"attr_chat mx-auto",draggable:!1,src:j.a}),r.a.createElement("p",{className:"text-center mt-3 text-purple-800"},"Invalid map data"))):""),r.a.createElement("div",{className:"w-3/4 p-5"},r.a.createElement("div",{id:"gantt",className:K?"block":"hidden",style:{minHeight:"130px"}}),K?"":r.a.createElement("div",{className:"h-64 mx-auto border-dashed border border-gray-600 relative mb-5"},r.a.createElement("div",{className:"centerItem"},r.a.createElement("img",{className:"attr_chat mx-auto",draggable:!1,src:F.a}),r.a.createElement("p",{className:"text-center mt-3 text-purple-800"},"No fixed and refrence data found"))),r.a.createElement("div",{id:"associate_gantt",className:X?"block":"hidden",style:{height:"200px"}}),X?"":r.a.createElement("div",{className:"h-64 mx-auto border-dashed border border-gray-600 relative mb-5"},r.a.createElement("div",{className:"centerItem"},r.a.createElement("img",{className:"attr_chat mx-auto",draggable:!1,src:F.a}),r.a.createElement("p",{className:"text-center mt-3 text-purple-800"},"No associatives data found"))),r.a.createElement("div",{className:"grid grid-cols-2 gap-4"},void 0!=h&&""!=h?r.a.createElement("div",null,r.a.createElement(N.a,{className:"border-0",preExpanded:["attributes"]},r.a.createElement(N.b,{className:"shadow-md mb-3",uuid:"attributes"},r.a.createElement(N.d,{className:"bg-gray-400 p-2"},r.a.createElement(N.c,{className:"w-full border-none outline-none focus:border-0 inline-flex"},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-arrow-right"},r.a.createElement("line",{x1:"5",y1:"12",x2:"19",y2:"12"}),r.a.createElement("polyline",{points:"12 5 19 12 12 19"})),"\u2003","Attributes")),r.a.createElement(N.e,{className:"h-56 overflow-y-auto"},r.a.createElement("table",{class:"table-auto w-full"},r.a.createElement("tbody",null,Object.keys(h).map((function(e){return r.a.createElement("tr",null,r.a.createElement("td",{class:"border px-4 py-2"},e),r.a.createElement("td",{class:"border px-4 py-2"},h[e]))})))))))):r.a.createElement("div",{className:"h-64 border-dashed border border-gray-600 relative"},r.a.createElement("div",{className:"centerItem"},r.a.createElement("img",{className:"attr_chat mx-auto",draggable:!1,src:H.a}),r.a.createElement("p",{className:"text-center mt-3 text-purple-800"},"No attributes data found"))),void 0!=E&&E.length>0?r.a.createElement("div",null,r.a.createElement(N.a,{className:"border-0",preExpanded:["doc"]},r.a.createElement(N.b,{className:"shadow-md mb-3",uuid:"doc"},r.a.createElement(N.d,{className:"bg-gray-400 p-2"},r.a.createElement(N.c,{className:"w-full border-none outline-none focus:border-0 inline-flex"},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-arrow-right"},r.a.createElement("line",{x1:"5",y1:"12",x2:"19",y2:"12"}),r.a.createElement("polyline",{points:"12 5 19 12 12 19"})),"\u2003","Document Links")),r.a.createElement(N.e,{className:"h-56 overflow-y-auto"},r.a.createElement("table",{class:"table-auto w-full"},r.a.createElement("tbody",null,E.map((function(e){return r.a.createElement("tr",null,r.a.createElement("td",{class:"border px-4 py-2"},e.name),r.a.createElement("td",{class:"border px-4 py-2"},e.class),r.a.createElement("td",{class:"border px-4 py-2"},r.a.createElement("a",{href:e.link,target:"_blank"},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"17",height:"17",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-link"},r.a.createElement("path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"}),r.a.createElement("path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"})))))})))))))):r.a.createElement("div",{className:"h-64 border-dashed border border-gray-600 relative"},r.a.createElement("div",{className:"centerItem"},r.a.createElement("img",{className:"attr_chat mx-auto",draggable:!1,src:H.a}),r.a.createElement("p",{className:"text-center mt-3 text-purple-800"},"No documents data found"))))))):r.a.createElement("div",{className:"centerItem"},r.a.createElement("img",{draggable:!1,width:300,src:S.a}),r.a.createElement("p",{className:"text-center mt-3 text-purple-800"},"Search to show the data here")),T?r.a.createElement("div",{className:"centerItem"},r.a.createElement("img",{draggable:!1,width:300,src:B.a}),r.a.createElement("p",{className:"text-center mt-3 text-purple-800"},"Something went wrong. Please try again!!")):"")};var z=function(){return r.a.createElement("div",null,r.a.createElement(T.a,null,r.a.createElement(c.a,{exact:!0,path:"/",component:v}),r.a.createElement(c.a,{exact:!0,path:"/home",component:D}),r.a.createElement(c.a,{exact:!0,path:"/liveView",component:M}),r.a.createElement(c.a,{exact:!0,path:"/poc",component:L}),r.a.createElement(c.a,{exact:!0,path:"/linearAsset",component:V})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(z,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[51,1,2]]]);
//# sourceMappingURL=main.6b6aca7d.chunk.js.map