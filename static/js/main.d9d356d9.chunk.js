(this.webpackJsonpdatum360=this.webpackJsonpdatum360||[]).push([[0],{28:function(e,t,a){e.exports=a(57)},56:function(e,t,a){},57:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(12),o=a.n(r),c=a(3),s=a(1),m=function(e){var t=Object(s.e)();return l.a.createElement("nav",{className:"flex items-center justify-between flex-wrap bg-purple-900  p-6"},l.a.createElement("div",{className:"flex items-center flex-shrink-0 text-black mr-6"},l.a.createElement("img",{alt:"Logo",className:"w-1/2",src:"https://www.datum360.com/assets/img/logo.png"})),l.a.createElement("div",{className:"block lg:hidden"},l.a.createElement("button",{className:"flex items-center px-3 py-2 border rounded text-teal-200 border-teal-400 hover:text-white hover:border-white"},l.a.createElement("svg",{className:"fill-current h-3 w-3",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},l.a.createElement("title",null,"Menu"),l.a.createElement("path",{d:"M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0v-2z"})))),l.a.createElement("div",{className:"w-full block flex-grow lg:flex lg:items-center lg:w-auto"},l.a.createElement("div",{className:"text-sm lg:flex-grow"}),l.a.createElement("div",{className:"".concat(e.showLogoutButton?"":"hidden")},l.a.createElement("button",{className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded inline-flex items-center",onClick:function(){return localStorage.clear(),void t.push("/")}},l.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-log-out"},l.a.createElement("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),l.a.createElement("polyline",{points:"16 17 21 12 16 7"}),l.a.createElement("line",{x1:"21",y1:"12",x2:"9",y2:"12"})),l.a.createElement("span",null,"Logout")))))};var i=function(e){var t=Object(s.e)(),a=Object(n.useState)(""),r=Object(c.a)(a,2),o=r[0],i=r[1],u=Object(n.useState)(""),d=Object(c.a)(u,2),p=d[0],g=d[1],h=Object(n.useState)(""),b=Object(c.a)(h,2),f=b[0],w=b[1],x=Object(n.useState)(!1),E=Object(c.a)(x,2),v=E[0],y=E[1],N=Object(n.useState)(!1),k=Object(c.a)(N,2),j=k[0],O=k[1],P=Object(n.useState)(!1),S=Object(c.a)(P,2),L=S[0],C=S[1],W=Object(n.useState)(),I=Object(c.a)(W,2),F=I[0],z=I[1],D=Object(n.useState)(),M=Object(c.a)(D,2),B=M[0],H=M[1],U="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:border-purple-900",A="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none border-red-500";return Object(n.useEffect)((function(e){var a=setInterval((function(){console.log("listening ------------\x3e"),null!=localStorage.getItem("b_token")&&(console.log("b_token found ----------\x3e"+localStorage.getItem("b_token")),void 0!==window.myWindow?(window.myWindow.close(),t.push("/home")):t.push("/home"),console.log("inside close window ---------\x3e"),clearInterval(a))}),1e3);return function(){return clearInterval(a)}}),[]),l.a.createElement(l.a.Fragment,null,l.a.createElement(m,{showLogoutButton:!1}),l.a.createElement("div",{className:"w-full max-w-xs login-container mt-5"},l.a.createElement("form",{className:"bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4"},l.a.createElement("div",{className:"mb-4"},l.a.createElement("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"username"},"Username"),l.a.createElement("input",{className:v?A:U,id:"username",type:"text",value:o,placeholder:"Enter your username",onChange:function(e){return i(e.target.value)}})),l.a.createElement("div",{className:"mb-4"},l.a.createElement("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"password"},"Password"),l.a.createElement("input",{className:j?A:U,value:p,id:"password",type:"password",placeholder:"Enter your password",onChange:function(e){return g(e.target.value)}})),l.a.createElement("div",{className:"mb-3"},l.a.createElement("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"username"},"Prefix URL"),l.a.createElement("input",{className:L?A:U,value:f,id:"prefixUrl",type:"text",placeholder:"Enter your prefix url",onChange:function(e){return w(e.target.value)}})),l.a.createElement("p",{className:"text-center text-red-500"},F?B:""),l.a.createElement("div",{className:"flex"},l.a.createElement("button",{className:"mt-3 bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline m-auto",type:"button",onClick:function(){!function(){if(z(!1),y(!1),O(!1),C(!1),H(""),void 0!==o&&o.length>0&&p.length>0&&f.length>0){localStorage.setItem("prefixUrl",f);var e="auth/index.php?clientId=".concat(o,"&clientSecret=").concat(p,"&prefix_url=").concat(f);window.myWindow=window.open(e,"targetWindow","toolbar=no,location=no,status=no,menubar=no,scrollbars=yes,resizable=yes,width=500,height=500")}else 0==o.length&&y(!0),0==p.length&&O(!0),0==f.length&&C(!0),z(!0),H("Please fill all the fields")}()}},"Proceed"))),l.a.createElement("br",null),l.a.createElement("p",{className:"text-center"},"\xa9 Datum360 Limited")))},u=a(26),d=a.n(u),p=a(27),g=a(9),h=function(e){var t=e.text;return l.a.createElement("div",null,l.a.createElement("img",{alt:"Marker",src:"https://img.icons8.com/fluent/48/000000/marker-storm.png"}),t)},b=function(e){var t=Object(n.useState)(),a=Object(c.a)(t,2),r=a[0],o=a[1],s=Object(n.useState)(""),i=Object(c.a)(s,2),u=i[0],b=i[1],f=Object(n.useState)([]),w=Object(c.a)(f,2),x=w[0],E=w[1],v=Object(n.useState)(!1),y=Object(c.a)(v,2),N=y[0],k=y[1],j=Object(n.useState)([]),O=Object(c.a)(j,2),P=O[0],S=O[1],L=new File(["<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n        <kml xmlns=\"http://www.opengis.net/kml/2.2\" xmlns:gx=\"http://www.google.com/kml/ext/2.2\">\n            <Document id=\"1\"><Placemark><name>01-CV-1001</name><Point><coordinates>54 34'13.64'' N, 1 19'44.34'' W</coordinates></Point></Placemark><Placemark><name>01-CV-1002</name><Point><coordinates>54 34' 27.22'' N, 1 14' 05.84'' W</coordinates></Point></Placemark><Placemark><name>01-LAH-1002</name><Point><coordinates>54 58' 41.71'' N, 1 37' 04.01'' W</coordinates></Point></Placemark><Placemark><name>NP-01-001</name><Point><coordinates>54 46'30.90'' N, 1 35'05.47'' W</coordinates></Point></Placemark><Placemark><name>HV-202</name><Point><coordinates>54 51'06.47'' N, 1 49'58.89'' W</coordinates></Point></Placemark></Document>\n            </kml>"],"".concat(new Date,".kml"),{type:"text/xml;charset=utf-8"});return l.a.createElement(l.a.Fragment,null,l.a.createElement(m,{showLogoutButton:!0}),N?l.a.createElement("div",{className:"popUpContainer"},l.a.createElement("div",{className:"loader"})):"",l.a.createElement("div",{className:"p-10"},l.a.createElement("div",{className:"w-full max-w"},l.a.createElement("form",{className:"bg-white rounded pt-6 pb-8 mb-4"},l.a.createElement("div",null,l.a.createElement("div",{className:"inline-block"},l.a.createElement("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"username"},"Tag Number"),l.a.createElement("input",{className:r?"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline border-red-500":"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",value:u,id:"tagNumber",type:"text",placeholder:"Enter your tag number",onChange:function(e){return b(e.target.value)}})),l.a.createElement("div",{className:"inline-block ml-5"},l.a.createElement("button",{className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded focus:outline-none m-auto",type:"button",onClick:function(){!function(){if(o(!1),null!==u&&u.length>0){k(!0);var e=[],t=0,a=u.split(",").map((function(e){return e.trim()}));S(a),a.map((function(n){var l="https://"+localStorage.getItem("prefixUrl")+".pim360.io/api/objects/TAGGED_ITEM/id/"+n,r=localStorage.getItem("b_token");return fetch(l,{headers:{Accept:"application/json",Authorization:r}}).then((function(e){return e.json()})).then((function(n){if(void 0!==n.attrs&&null!==n.attrs?e.push(n):console.log(n),(t+=1)===a.length)return k(!1),void E(e)})).catch((function(e){console.log("error --------\x3e"+e),(t+=1)===a.length&&k(!1)})),""}))}else o(!0),console.log("show error")}()}},"Submit")),l.a.createElement("div",{className:"inline-block ml-5",style:{display:x.length>0?"":"none"}},l.a.createElement("button",{onClick:function(e){e.preventDefault(),Object(p.saveAs)(L)},class:"bg-purple-800 hover:bg-purple-900 text-white  py-2 px-4 rounded inline-flex items-center"},l.a.createElement("svg",{class:"fill-current w-4 h-4 mr-2",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},l.a.createElement("path",{d:"M13 8V2H7v6H2l8 8 8-8h-5zM0 18h20v2H0v-2z"})),l.a.createElement("span",null,"Download KML")))),r?l.a.createElement("p",{className:"text-red-500 pl-2 text-xs pt-1"},"Tag name is required "):"")),void 0!==x&&x.length>0&&l.a.createElement("div",null,function(){var e=[];return x.map((function(t){var a=Object.keys(t.attrs),n={};return a.map((function(e){return n[t.attrs[e].name]=t.attrs[e].value,""})),e.push(n),""})),l.a.createElement("div",{className:"flex mb-4"},l.a.createElement("div",{className:"w-1/2 m-h-500px p-5"},e.length>0&&l.a.createElement("div",{className:"w-full h-full shadow-lg"},l.a.createElement(d.a,{bootstrapURLKeys:{key:"AIzaSyDNeF0TGdzD6PN696-ZWgdP7z9ltW0l1QY"},defaultCenter:{lat:parseFloat(e[0].Latitude),lng:parseFloat(e[0].Longitude)},distanceToMouse:function(){},defaultZoom:6},e.map((function(e){return l.a.createElement(h,{lat:e.Latitude,lng:e.Longitude})}))))),l.a.createElement("div",{className:"w-1/2 m-h-500px"},l.a.createElement("div",{className:"max-w rounded w-full shadow  p-5"},l.a.createElement("p",{className:"text-xl font-bold mb-3"},"Attributes"),l.a.createElement(g.a,{className:"border-0",allowZeroExpanded:!0},e.map((function(e,t){return l.a.createElement(g.b,{className:"shadow-md mb-3",key:e.Latitude},l.a.createElement(g.d,{className:"bg-gray-400 p-2"},l.a.createElement(g.c,{className:"w-full border-none outline-none focus:border-0 inline-flex"},l.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-arrow-right"},l.a.createElement("line",{x1:"5",y1:"12",x2:"19",y2:"12"}),l.a.createElement("polyline",{points:"12 5 19 12 12 19"})),"\u2003",P[t])),l.a.createElement(g.e,null,l.a.createElement("table",{class:"table-auto w-full"},l.a.createElement("tbody",null,Object.keys(e).map((function(t){return l.a.createElement("tr",null,l.a.createElement("td",{class:"border px-4 py-2"},t),l.a.createElement("td",{class:"border px-4 py-2"},e[t]))}))))))}))))))}()),l.a.createElement("p",{className:"text-center"},"\xa9 Datum360 Limited")))},f=(a(56),a(10));var w=function(){return l.a.createElement("div",null,l.a.createElement(f.a,null,l.a.createElement(s.a,{exact:!0,path:"/",component:i}),l.a.createElement(s.a,{exact:!0,path:"/home",component:b})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(w,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[28,1,2]]]);
//# sourceMappingURL=main.d9d356d9.chunk.js.map