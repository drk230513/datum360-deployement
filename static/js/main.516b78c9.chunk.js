(this.webpackJsonpdatum360=this.webpackJsonpdatum360||[]).push([[0],{28:function(e,t,a){e.exports=a(57)},56:function(e,t,a){},57:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(12),o=a.n(r),c=a(3),s=a(1),i=function(e){var t=Object(s.e)();return l.a.createElement("nav",{className:"flex items-center justify-between flex-wrap bg-purple-900  p-6"},l.a.createElement("div",{className:"flex items-center flex-shrink-0 text-black mr-6"},l.a.createElement("img",{alt:"Logo",className:"w-1/2",src:"https://www.datum360.com/assets/img/logo.png"})),l.a.createElement("div",{className:"block lg:hidden"},l.a.createElement("button",{className:"flex items-center px-3 py-2 border rounded text-teal-200 border-teal-400 hover:text-white hover:border-white"},l.a.createElement("svg",{className:"fill-current h-3 w-3",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},l.a.createElement("title",null,"Menu"),l.a.createElement("path",{d:"M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0v-2z"})))),l.a.createElement("div",{className:"w-full block flex-grow lg:flex lg:items-center lg:w-auto"},l.a.createElement("div",{className:"text-sm lg:flex-grow"}),l.a.createElement("div",{className:"".concat(e.showLogoutButton?"":"hidden")},l.a.createElement("button",{className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded inline-flex items-center",onClick:function(){return localStorage.clear(),void t.push("/")}},l.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-log-out"},l.a.createElement("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),l.a.createElement("polyline",{points:"16 17 21 12 16 7"}),l.a.createElement("line",{x1:"21",y1:"12",x2:"9",y2:"12"})),l.a.createElement("span",null,"Logout")))))};var m=function(e){var t=Object(s.e)(),a=Object(n.useState)(""),r=Object(c.a)(a,2),o=r[0],m=r[1],u=Object(n.useState)(""),d=Object(c.a)(u,2),g=d[0],p=d[1],h=Object(n.useState)(""),f=Object(c.a)(h,2),b=f[0],w=f[1],v=Object(n.useState)(!1),x=Object(c.a)(v,2),E=x[0],y=x[1],N=Object(n.useState)(!1),k=Object(c.a)(N,2),j=k[0],O=k[1],S=Object(n.useState)(!1),L=Object(c.a)(S,2),I=L[0],F=L[1],B=Object(n.useState)(),C=Object(c.a)(B,2),_=C[0],z=C[1],A=Object(n.useState)(),D=Object(c.a)(A,2),M=D[0],W=D[1],P="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:border-purple-900",U="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none border-red-500";return Object(n.useEffect)((function(e){var a=setInterval((function(){console.log("listening ------------\x3e"),null!=localStorage.getItem("b_token")&&(console.log("b_token found ----------\x3e"+localStorage.getItem("b_token")),void 0!==window.myWindow?(window.myWindow.close(),t.push("/home")):t.push("/home"),console.log("inside close window ---------\x3e"),clearInterval(a))}),1e3);return function(){return clearInterval(a)}}),[]),l.a.createElement(l.a.Fragment,null,l.a.createElement(i,{showLogoutButton:!1}),l.a.createElement("div",{className:"w-full max-w-sm login-container mt-5"},l.a.createElement("form",{className:"bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4"},l.a.createElement("div",{className:"mb-4"},l.a.createElement("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"username"},"Username"),l.a.createElement("input",{className:E?U:P,id:"username",type:"text",value:o,placeholder:"Enter your username",onChange:function(e){return m(e.target.value)}})),l.a.createElement("div",{className:"mb-4"},l.a.createElement("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"password"},"Password"),l.a.createElement("input",{className:j?U:P,value:g,id:"password",type:"password",placeholder:"Enter your password",onChange:function(e){return p(e.target.value)}})),l.a.createElement("div",{className:"mb-3"},l.a.createElement("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"username"},"Prefix URL"),l.a.createElement("input",{className:I?U:P,value:b,id:"prefixUrl",type:"text",placeholder:"Enter your prefix url",onChange:function(e){return w(e.target.value)}}),l.a.createElement("span",{className:"text-gray-700 text-xs"},"Note: Its is 1st portion of your domain name (also known as subdomain), or its called as scope of pim360.")),l.a.createElement("p",{className:"text-center text-red-500"},_?M:""),l.a.createElement("div",{className:"flex"},l.a.createElement("button",{className:"mt-3 bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline m-auto",type:"button",onClick:function(){!function(){if(z(!1),y(!1),O(!1),F(!1),W(""),void 0!==o&&o.length>0&&g.length>0&&b.length>0){localStorage.setItem("prefixUrl",b);var e="auth/index.php?clientId=".concat(o,"&clientSecret=").concat(g,"&prefix_url=").concat(b);window.myWindow=window.open(e,"targetWindow","toolbar=no,location=no,status=no,menubar=no,scrollbars=yes,resizable=yes,width=500,height=500")}else 0==o.length&&y(!0),0==g.length&&O(!0),0==b.length&&F(!0),z(!0),W("Please fill all the fields")}()}},"Proceed"))),l.a.createElement("br",null),l.a.createElement("p",{className:"text-center"},"\xa9 Datum360 Limited")))},u=a(26),d=a.n(u),g=a(27),p=function(e){if(e){if(e.length>0){e.forEach((function(t,a){Object.keys(t).forEach((function(n){var l=t[n],r=n.replace(/\s+/g,"_");delete e[a][n],e[a][r]=l}))}));var t=[];return e.length>0&&e.map((function(e){var a={Placemark:{Attributes:e,Point:{coordinates:"".concat(e.Latitude,", ").concat(e.Longitude)}}};t.push(a)})),function(e){for(var t="",a=(e=e.replace(/(>)\s*(<)(\/*)/g,"$1\n$2$3").replace(/ *(.*) +\n/g,"$1\n").replace(/(<.+>)(.+\n)/g,"$1\n$2")).split("\n"),n=0,l="other",r={"single->single":0,"single->closing":-1,"single->opening":0,"single->other":0,"closing->single":0,"closing->closing":-1,"closing->opening":0,"closing->other":0,"opening->single":1,"opening->closing":0,"opening->opening":1,"opening->other":1,"other->single":0,"other->closing":-1,"other->opening":0,"other->other":0},o=0;o<a.length;o++){var c=a[o];if(c.match(/\s*<\?xml/))t+=c+"\n";else{var s=Boolean(c.match(/<.+\/>/)),i=Boolean(c.match(/<\/.+>/)),m=Boolean(c.match(/<[^!].*>/)),u=s?"single":i?"closing":m?"opening":"other",d=l+"->"+u;l=u;var g="";n+=r[d];for(var p=0;p<n;p++)g+="\t";"opening->closing"==d?t=t.substr(0,t.length-1)+c+"\n":t+=g+c+"\n"}}return t}('<?xml version="1.0" encoding="UTF-8"?><kml xmlns="http://www.opengis.net/kml/2.2" xmlns:gx="http://www.google.com/kml/ext/2.2"><Document id="1">'+function e(t){var a="";for(var n in t){if(a+=t[n]instanceof Array?"":"<"+n+">",t[n]instanceof Array)for(var l in t[n])a+="<"+n+">",a+=e(new Object(t[n][l])),a+="</"+n+">";else"object"==typeof t[n]?a+=e(new Object(t[n])):a+=t[n];a+=t[n]instanceof Array?"":"</"+n+">"}return a=a.replace(/<\/?[0-9]{1,}>/g,"")}(t)+"</Document></kml>")}return""}return""},h=a(9),f=function(e){var t=e.text;return l.a.createElement("div",null,l.a.createElement("img",{alt:"Marker",src:"https://img.icons8.com/fluent/48/000000/marker-storm.png"}),t)},b=function(e){var t=Object(n.useState)(),a=Object(c.a)(t,2),r=a[0],o=a[1],s=Object(n.useState)(""),m=Object(c.a)(s,2),u=m[0],b=m[1],w=Object(n.useState)([]),v=Object(c.a)(w,2),x=v[0],E=v[1],y=Object(n.useState)(!1),N=Object(c.a)(y,2),k=N[0],j=N[1],O=Object(n.useState)([]),S=Object(c.a)(O,2),L=S[0],I=S[1];return l.a.createElement(l.a.Fragment,null,l.a.createElement(i,{showLogoutButton:!0}),k?l.a.createElement("div",{className:"popUpContainer"},l.a.createElement("div",{className:"loader"})):"",l.a.createElement("div",{className:"p-10"},l.a.createElement("div",{className:"w-full max-w"},l.a.createElement("form",{className:"bg-white rounded pt-6 pb-8 mb-4"},l.a.createElement("div",null,l.a.createElement("div",{className:"inline-block"},l.a.createElement("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"username"},"Tag Number"),l.a.createElement("input",{className:r?"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline border-red-500":"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",value:u,id:"tagNumber",type:"text",placeholder:"Enter your tag number",onChange:function(e){return b(e.target.value)}})),l.a.createElement("div",{className:"inline-block ml-5"},l.a.createElement("button",{className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded focus:outline-none m-auto",type:"button",onClick:function(){!function(){if(o(!1),null!==u&&u.length>0){j(!0);var e=[],t=0,a=u.split(",").map((function(e){return e.trim()}));I(a),a.map((function(n){var l="https://"+localStorage.getItem("prefixUrl")+".pim360.io/api/objects/TAGGED_ITEM/id/"+n,r=localStorage.getItem("b_token");return fetch(l,{headers:{Accept:"application/json",Authorization:r}}).then((function(e){return e.json()})).then((function(n){if(void 0!==n.attrs&&null!==n.attrs?e.push(n):console.log(n),(t+=1)===a.length)return j(!1),void E(e)})).catch((function(e){console.log("error --------\x3e"+e),(t+=1)===a.length&&j(!1)})),""}))}else o(!0),console.log("show error")}()}},"Submit")),l.a.createElement("div",{className:"inline-block ml-5",style:{display:x.length>0?"":"none"}},l.a.createElement("button",{onClick:function(e){e.preventDefault();var t=JSON.parse(localStorage.getItem("pre_kml_data")),a=new File(["".concat(p(t))],"".concat(new Date,".kml"),{type:"text/xml;charset=utf-8"});Object(g.saveAs)(a)},class:"bg-purple-800 hover:bg-purple-900 text-white  py-2 px-4 rounded inline-flex items-center"},l.a.createElement("svg",{class:"fill-current w-4 h-4 mr-2",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},l.a.createElement("path",{d:"M13 8V2H7v6H2l8 8 8-8h-5zM0 18h20v2H0v-2z"})),l.a.createElement("span",null,"Download KML")))),r?l.a.createElement("p",{className:"text-red-500 pl-2 text-xs pt-1"},"Tag name is required "):"")),void 0!==x&&x.length>0&&l.a.createElement("div",null,function(){var e=[];return x.map((function(t){var a=Object.keys(t.attrs),n={};return a.map((function(e){return n[t.attrs[e].name]=t.attrs[e].value,""})),e.push(n),""})),localStorage.setItem("pre_kml_data",JSON.stringify(e)),l.a.createElement("div",{className:"flex mb-4"},l.a.createElement("div",{className:"w-1/2 m-h-500px p-5"},e.length>0&&l.a.createElement("div",{className:"w-full h-full shadow-lg"},l.a.createElement(d.a,{bootstrapURLKeys:{key:"AIzaSyDNeF0TGdzD6PN696-ZWgdP7z9ltW0l1QY"},defaultCenter:{lat:parseFloat(e[0].Latitude),lng:parseFloat(e[0].Longitude)},center:{lat:parseFloat(e[0].Latitude),lng:parseFloat(e[0].Longitude)},distanceToMouse:function(){},defaultZoom:6},e.map((function(e){return l.a.createElement(f,{lat:e.Latitude,lng:e.Longitude})}))))),l.a.createElement("div",{className:"w-1/2 m-h-500px"},l.a.createElement("div",{className:"max-w rounded w-full shadow  p-5"},l.a.createElement("p",{className:"text-xl font-bold mb-3"},"Attributes"),l.a.createElement(h.a,{className:"border-0",allowZeroExpanded:!0},e.map((function(e,t){return l.a.createElement(h.b,{className:"shadow-md mb-3",key:e.Latitude},l.a.createElement(h.d,{className:"bg-gray-400 p-2"},l.a.createElement(h.c,{className:"w-full border-none outline-none focus:border-0 inline-flex"},l.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-arrow-right"},l.a.createElement("line",{x1:"5",y1:"12",x2:"19",y2:"12"}),l.a.createElement("polyline",{points:"12 5 19 12 12 19"})),"\u2003",L[t])),l.a.createElement(h.e,null,l.a.createElement("table",{class:"table-auto w-full"},l.a.createElement("tbody",null,Object.keys(e).map((function(t){return l.a.createElement("tr",null,l.a.createElement("td",{class:"border px-4 py-2"},t),l.a.createElement("td",{class:"border px-4 py-2"},e[t]))}))))))}))))))}()),l.a.createElement("p",{className:"text-center"},"\xa9 Datum360 Limited")))},w=(a(56),a(10));var v=function(){return l.a.createElement("div",null,l.a.createElement(w.a,null,l.a.createElement(s.a,{exact:!0,path:"/",component:m}),l.a.createElement(s.a,{exact:!0,path:"/home",component:b})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(v,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[28,1,2]]]);
//# sourceMappingURL=main.516b78c9.chunk.js.map